<div layout="column" flex>
  <md-card>
    <md-card-title>
      <md-card-title-text layout-align="center center">
        <span class="md-headline">Inserir Aliquota</span>
        <input type="text" class="aliquot-lot-input" placeholder="Aliquota" name="fast-trigger" value="Inserção rápida" ng-model="aliquot_code" ng-keydown="$ctrl.fastInsertion($event, this)" />
        <div layout="row" layout-xs="column">
          <div ng-if="$ctrl.action=='create'">
            <div layout="row" layout-xs="column" layout-align="center center">
              <span class="md-body-2">Envio</span>
            </div>
            <div layout="row" layout-xs="column" layout-align="right center">
              <md-input-container>
                <md-datepicker ng-model="$ctrl.lot.shipmentDate" ng-change="$ctrl.onLotAlteration({ newData: $ctrl.lot.toJSON()})" aria-label="Data de Envio"></md-datepicker>
              </md-input-container>
              <md-input-container>
                <md-icon class="material-icons">access_time</md-icon>
                <input type="time" style="margin-bottom:10px" ng-model="$ctrl.lot.shipmentDate" ng-change="$ctrl.onLotAlteration({ newData: $ctrl.lot.toJSON()})" aria-label="Tempo" min="0" max="4999">
              </md-input-container>
            </div>
          </div>
          <div>
            <div layout="row" layout-xs="column" layout-align="center center">
              <span class="md-body-2">Processamento</span>
            </div>
            <div layout="row" layout-xs="column" layout-align="center center">
              <md-input-container>
                <md-datepicker ng-model="$ctrl.lot.processingDate" ng-change="$ctrl.onLotAlteration({ newData: $ctrl.lot.toJSON()})" aria-label="Data de processamento"></md-datepicker>
              </md-input-container>
              <md-input-container>
                <md-icon class="material-icons">access_time</md-icon>
                <input type="time" style="margin-bottom:10px" ng-model="$ctrl.lot.processingDate" ng-change="$ctrl.onLotAlteration({ newData: $ctrl.lot.toJSON()})" aria-label="Tempo" min="0" max="4999">
              </md-input-container>
            </div>
          </div>
        </div>
        <div ng-if="$ctrl.action=='alter'">
          <span class="md-body-1" layout-margin>{{$ctrl.lot.shipmentDate | date:format:timezone}} - {{$ctrl.lot.shipmentDate | date: "HH:mm"}}</span>
          <span class="md-body-1">{{$ctrl.lot.operator}}</span>
        </div>
      </md-card-title-text>
    </md-card-title>
    <md-card-content>
      <md-list>
        <md-list-item ng-repeat="aliquot in $ctrl.lot.aliquotList track by $index" ng-class="{ 'selectedState': aliquot.isSelected, 'regularState': !aliquot.isSelected}" ng-click="$ctrl.selectAliquot(aliquot)">
          <div ng-class="{'md-list-item-text': true, 'error': aliquot.hasError}" flex>
            <span class="md-title" layout-margin>{{aliquot.code}}</span><span>{{aliquot.containerLabel + " de " + aliquot.label}}</span>
          </div>
          <md-divider></md-divider>
        </md-list-item>
      </md-list>
    </md-card-content>
  </md-card>
</div>
