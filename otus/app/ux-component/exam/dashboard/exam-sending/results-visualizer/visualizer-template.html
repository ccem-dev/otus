<div ui-view layout="column" ng-if="$ctrl.fileStructure">
  <otus-result-visualizer-manager-toolbar action="$ctrl.action" aliquots-with-problems="$ctrl.aliquotsWithProblems" dynamic-data-table-change="$ctrl.updateDataTable"
    error-aliquots="$ctrl.errorAliquots" sending-exam="$ctrl.sendingExam"></otus-result-visualizer-manager-toolbar>
  <md-content layout="column">
    <div>
      <md-card flex style="min-height: 150px">
        <md-card-title flex>
          <md-card-title-text>
            <span class="md-headline">Informações relacionadas ao arquivo que será enviado</span>
          </md-card-title-text>
        </md-card-title>
        <md-card-content flex>
          <div layout="row" flex>
            <div layout="column" flex>
              <div layout="row">
                <li>Data e hora de envio: {{$ctrl.formattedDate}}</li>
              </div>
              <div layout="row">
                <li>Nome do arquivo: {{$ctrl.sendingExam.examSendingLot.fileName}}</li>
              </div>
              <div layout="row">
                <li>Centro de realização: {{$ctrl.sendingExam.examSendingLot.fieldCenter.acronym}}</li>
              </div>
            </div>
            <div layout="column" flex>
              <div layout="row">
                <li>Quantidade de resultados: {{$ctrl.sendingExam.examSendingLot.resultsQuantity}}</li>
              </div>
              <div layout="row">
                <li>Operador: {{$ctrl.sendingExam.examSendingLot.operator}}</li>
              </div>
            </div>
          </div>
        </md-card-content>
      </md-card>

      <div layout="row" ng-if="$ctrl.aliquotsWithProblems.length" ng-init="button={which: 'error'}" flex>
        <md-button ng-if="button.which == 'error'" ng-click="$ctrl.changeResults('resultsWithErrors'); button.which = 'all'" class="md-warn md-accent"
          aria-label="Salvar">
          <md-tooltip md-direction="down">exibir</md-tooltip>
          Exibir resultados com erro
        </md-button>

        <md-button ng-if="button.which == 'all'" ng-click="$ctrl.changeResults('all'); button.which = 'error'" class="md-accent" aria-label="Salvar">
          <md-tooltip md-direction="down">exibir</md-tooltip>
          Exibir todos resultados
        </md-button>
      </div>
    </div>

    <md-divider></md-divider>

    <dynamic-data-table flex dynamic-table-settings="$ctrl.settings" table-update-function="$ctrl.updateDataTable">
    </dynamic-data-table>
</div>
</md-content>
</div>
<div layout="column" layout-align="center center">
  <img src="app/static-resource/image/otus-crash.png" ng-if="!$ctrl.fileStructure" flex>
</div>