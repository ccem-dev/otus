!function(){"use strict";angular.module("otusjs.otus",["otusjs.activity","otusjs.participant","otusjs.user","otusjs.user.access","otusjs.otus.installer","otusjs.otus.laboratory","otusjs.otus.dashboard","otusjs.otus.uxComponent","otusjs.application","otusjs.deploy"])}(),function(){"use strict";angular.module("otusjs.application",["otusjs.application.dependency","otusjs.application.environment","otusjs.application.storage","otusjs.application.session","otusjs.application.context","otusjs.application.core","otusjs.application.state","otusjs.application.http","otusjs.application.locale","otusjs.application.theme"]).run(function(){console.info("Application module ready.")})}(),function(){"use strict";function t(t,i,n,r){n.initializeOpenResources(),e(i).then(function(){r.run(),o(t)})}function e(t){var e="otus";return t.initializeSessionStorage(),t.dbExists(e)?t.loadLocalStorage(e):t.createLocalStorage(e)}function o(t){var e=angular.module("otusjs.deploy"),o=t.get("otusjs.application.core.ModuleService");o.notifyModuleLoad(e.name),o.finalizeDeploy(),console.info("Deploy module ready.")}angular.module("otusjs.deploy",["otus.client","otus.domain.client","otusjs","otusjs.player.core","otusjs.player.component","otusjs.labelMaker.config","otusjs.labelMaker.setupView","otusjs.labelMaker.dataBuilder","otusjs.labelMaker.labelBuilder","otusjs.labelMaker.labelPage"]).value("OtusLocalStorage",["otusjs.activity.storage.ActivityLocalStorageService","otusjs.laboratory.storage.ParticipantLaboratoryLocalStorageService","otusjs.activity.storage.SurveyStorageService","otusjs.participant.storage.ParticipantStorageService","otusjs.user.storage.UserStorageService"]).run(t),t.$inject=["$injector","otusjs.deploy.StorageLoaderService","otusjs.deploy.OtusApiService","otusjs.deploy.BootstrapService"]}(),angular.module("passwordControl",[]).directive("stPassword",function(){return{require:"ngModel",restrict:"A",link:function(t,e,o,i){var n=/(?=.*\d)(?=.*[a-z])(?=.*[A-Z])/;t.$watch(function(){return i.$modelValue},function(t){n.test(t)&&t.length>=6&&t.length<=32?i.$setValidity("passwordPattern",!0):i.$setValidity("passwordPattern",!1)})}}}).directive("stPasswordMatch",function(){return{require:"ngModel",restrict:"A",scope:{stPasswordMatch:"="},link:function(t,e,o,i){function n(t,e){t!==e?i.$setValidity("passwordMatch",!1):i.$setValidity("passwordMatch",!0)}t.$watch(function(){return t.stPasswordMatch},function(t){n(t,i.$modelValue)}),t.$watch(function(){return i.$modelValue},function(e){n(t.stPasswordMatch,e)})}}}),function(){"use strict";angular.module("otusjs.otus.uxComponent",[])}(),function(){"use strict";function t(){function t(t){return new e(t)}var o=this;return o.create=t,o}function e(t){function e(){return l}function o(t){return f[t]}function i(t,e){f[t]=e}function n(t){delete f[t]}function r(){f={}}function a(){return JSON.stringify(f)}function c(t){f=JSON.parse(t)||{}}function s(){return _context}var u=this,l=t,f={};u.getName=e,u.getData=o,u.setData=i,u.removeData=n,u.clear=r,u.toJson=a,u.fromJson=c,u.toObject=s}angular.module("otusjs.application.context").factory("otusjs.application.context.ContextFactory",t)}(),function(){"use strict";angular.module("otusjs.application.context",[]).run(function(t){var e=angular.module("otusjs.application.context"),o=t.get("otusjs.application.core.ModuleService");o.notifyModuleLoad(e.name),console.info("Context module ready.")})}(),function(){"use strict";function t(t){function e(){r()}function o(){v(),f()}function i(){h.removeItem(A)}function n(){v()}function r(){v(),h.setItem(A,j.toJson())}function a(t){return v(),j.getData(t)}function c(t,e){v(),j.setData(t,e),r()}function s(t){v(),j.removeData(t),r()}function u(t){j=t.create(A)}function l(t){h=t}function f(){v(),j.fromJson(h.getItem(A))}function v(){if(!j)throw new Error("Internal context is not initialized.","application-context-service.js",159);if(!h)throw new Error("Internal storage is not initialized.","application-context-service.js",165)}function p(){return b.promise}function d(e){b=t.defer(),e&&b.resolve(e)}function g(){return a("selectedActivities")}function y(){c("selectedActivities",[])}function S(t){c("selectedActivities",t)}var m=this,j=null,h=null,A="application_context",b=null;m.begin=e,m.restore=o,m.end=i,m.isValid=n,m.save=r,m.configureContext=u,m.configureStorage=l,m.getData=a,m.setData=c,m.removeData=s,m.getSelectedParticipant=p,m.setSelectedParticipant=d,m.selectActivities=S,m.getSelectedActivities=g,m.clearSelectedActivities=y}angular.module("otusjs.application.core").service("otusjs.application.core.ContextService",t),t.$inject=["$q"]}(),function(){"use strict";function t(t,e,o){function i(t){l.push(t)}function n(t){e.configureContext(t)}function r(t){e.configureStorage(t)}function a(){return f?v.resolve():v=t.defer(),v.promise}function c(){f=!0,v.resolve()}function s(){e.begin()}var u=this,l=[],f=!1,v=t.defer();u.notifyModuleLoad=i,u.configureContext=n,u.configureStorage=r,u.isDeployed=a,u.finalizeDeploy=c,u.begin=s}angular.module("otusjs.application.core").service("otusjs.application.core.ModuleService",t),t.$inject=["$q","otusjs.application.core.ContextService"]}(),function(){"use strict";angular.module("otusjs.application.core",[]).run(function(t){var e=angular.module("otusjs.application.core"),o=t.get("otusjs.application.core.ModuleService");o.notifyModuleLoad(e.name),console.info("Core module ready.")})}(),function(){"use strict";angular.module("otusjs.application.dependency",["ngMaterial","ngMessages","ngAnimate","ui.router","ui.mask","passwordControl","angular-bind-html-compile"]).run(function(t){var e=angular.module("otusjs.application.dependency"),o=t.get("otusjs.application.core.ModuleService");o.notifyModuleLoad(e.name),console.info("Dependency module ready.")})}(),function(t){"use strict";t.__env=t.__env||{},t.__env.apiUrl="http://api-otus.localhost:8080"}(this),function(){"use strict";function t(t,e,o){var i=t.__env;e.setUrl(i.apiUrl)}angular.module("otusjs.application.environment").run(t),t.$inject=["$window","OtusRestResourceService"]}(),function(){"use strict";angular.module("otusjs.application.environment",[]).run(function(t){var e=angular.module("otusjs.application.environment"),o=t.get("otusjs.application.core.ModuleService");o.notifyModuleLoad(e.name),console.info("Environment module ready.")})}(),function(){"use strict";angular.module("otusjs.application.http",[]).run(function(t){var e=angular.module("otusjs.application.http"),o=t.get("otusjs.application.core.ModuleService");o.notifyModuleLoad(e.name),console.info("Http module ready.")})}(),function(){"use strict";function t(t){t.formatDate=function(t){if("[object Date]"!==Object.prototype.toString.call(t))return null;var e=t.getDate(),o=t.getMonth(),i=t.getFullYear();return e+"/"+(o+1)+"/"+i},t.parseDate=function(t){var e=new Date(t);if("[object Date]"!==Object.prototype.toString.call(e))return e;var o=t.split("/");return 3===o.length?e=new Date(o[2],o[1]-1,o[0]):void 0}}angular.module("otusjs.application.locale").config(t),t.$inject=["$mdDateLocaleProvider"]}(),function(){"use strict";angular.module("otusjs.application.locale",[]).run(function(){console.info("Locale module ready.")})}(),function(){"use strict";function t(t,e,o){e.onLogin(o.begin),e.onLogout(o.end);var i=angular.module("otusjs.application.session"),n=t.get("otusjs.application.core.ModuleService");n.notifyModuleLoad(i.name),console.info("Session module ready.")}angular.module("otusjs.application.session",["otusjs.application.session.core"]).run(t),t.$inject=["$injector","otusjs.application.session.core.EventService","otusjs.application.session.core.ContextService"]}(),function(){"use strict";function t(t,e,o){t.$on("$stateChangeStart",function(t,i,n){i.data&&i.data.redirect&&e.invoke(i.data.redirect).then(function(e){t.preventDefault(),e&&o.go(e)})}),t.$on("$stateChangeError",function(t,e,i,n,r,a){t.preventDefault(),console.error(a.message),a.redirectTo?o.go(a.redirectTo):o.go("error",{status:a.status})});var i=angular.module("otusjs.application.state"),n=e.get("otusjs.application.core.ModuleService");n.notifyModuleLoad(i.name),console.info("State module ready.")}angular.module("otusjs.application.state",[]).run(t),t.$inject=["$rootScope","$injector","$state"]}(),function(){"use strict";angular.module("otusjs.application.storage",["lokijs"]).run(function(t){var e=angular.module("otusjs.application.storage"),o=t.get("otusjs.application.core.ModuleService");o.notifyModuleLoad(e.name),console.info("Storage module ready.")})}(),function(){"use strict";angular.module("otusjs.application.theme",[]).run(function(t){var e=angular.module("otusjs.application.theme"),o=t.get("otusjs.application.core.ModuleService");o.notifyModuleLoad(e.name),console.info("Theme module ready.")})}(),function(){"use strict";function t(t,e){t.theme("default").primaryPalette("teal",{"default":"700","hue-1":"500","hue-2":"600","hue-3":"800"}).accentPalette("light-blue",{"default":"A700","hue-2":"A100","hue-3":"A400"}).warnPalette("red",{"default":"A200","hue-2":"A100","hue-3":"A400"}).backgroundPalette("grey"),e.defaultIconSet("app/static-resource/image/icons/mdi.svg",24)}angular.module("otusjs.application.theme").config(t),t.$inject=["$mdThemingProvider","$mdIconProvider"]}(),function(){"use strict";function t(t,e,o,i,n,r){function a(){return f=t.defer(),u(),f.promise}function c(){return{getData:function(){return r.getCollection()},save:function(){r.save()}}}function s(t){return o.list(t.recruitmentNumber).then(function(t){t.data&&t.data.length?n.loadData(t.data):console.log("Não foi possível atualizar o storage local."),p=!0,v&&p&&f.resolve()})}function u(){e.getSurveys().then(function(t){t.data&&t.data.length?(r.getCollection().clear(),r.getCollection().insert(t.data),r.save()):console.log("Não foi possível atualizar o storage local."),v=!0,v&&p&&f.resolve()})}var l=this,f=null,v=!1,p=!1;l.up=a,l.getSurveyDataSet=c,l.loadDataByParticipant=s}angular.module("otusjs.deploy").service("otusjs.deploy.ActivityDataSourceService",t),t.$inject=["$q","otusjs.deploy.ProjectConfigurationRestService","otusjs.deploy.ActivityRestService","otusjs.deploy.SurveyRestService","otusjs.activity.storage.ActivityLocalStorageService","otusjs.activity.storage.SurveyStorageService"]}(),function(){"use strict";function t(e,o,i,n){function r(){return o.up().then(c),i.up().then(c),n.up().then(c),u.promise}function a(){l===f&&u.resolve()}function c(){++l,a()}var s=this,u=e.defer(),l=0,f=t.$inject.length-1;s.initializeDataSources=r}angular.module("otusjs.deploy").service("otusjs.deploy.DataSourceLoaderService",t),t.$inject=["$q","otusjs.deploy.ActivityDataSourceService","otusjs.deploy.ParticipantDataSourceService","otusjs.deploy.UserDataSourceService"]}(),function(){"use strict";function t(t,e,o){function i(){return s=t.defer(),r(),a(),s.promise}function n(){return o.getCollection().find()}function r(){e.initialize()}function a(){e.listIdexers().then(function(t){o.getCollection().clear(),o.getCollection().insert(t),o.save(),s.resolve()})}var c=this,s=null;c.up=i,c.listIndexers=n}angular.module("otusjs.deploy").service("otusjs.deploy.ParticipantDataSourceService",t),t.$inject=["$q","otusjs.deploy.ParticipantRestService","otusjs.participant.storage.ParticipantStorageService"]}(),function(){"use strict";function t(t,e,o,i,n){function r(){return v=t.defer(),s(),u(),v.promise}function a(){return{getData:function(){return i.getCollection()},save:function(){i.save(),l()}}}function c(){return{getData:function(){return n.getCollection()},save:function(){n.save()}}}function s(){e.initialize(),o.initialize()}function u(){o.list().then(function(t){t.data&&t.data.length?(n.getCollection().clear(),n.getCollection().insert(t.data),n.save()):console.log("Não foi possível atualizar o storage local."),p=!0,p&&d&&v.resolve()}),e.list().then(function(t){t.data&&t.data.length?(i.getCollection().clear(),i.getCollection().insert(t.data),i.save(),console.log("Storage local de atividades atualizado com dados do servidor.")):console.log("Não foi possível atualizar o storage local."),d=!0,p&&d&&v.resolve()})}function l(){var t=i.getCollection().find();e.update(t).then(function(t){console.log("Dados de atividade sincronizados.")})["catch"](function(t){console.log("Falha ao sincronizar dados de atividade.")})}var f=this,v=null,p=!1,d=!1;f.up=r,f.getActivityDataSet=a,f.getSurveyDataSet=c}angular.module("otusjs.deploy").service("otusjs.deploy.ActivityDataSourceService",t),t.$inject=["$q","otusjs.deploy.ActivityRestService","otusjs.deploy.SurveyRestService","otusjs.activity.storage.ActivityLocalStorageService","otusjs.activity.storage.SurveyStorageService"]}(),function(){"use strict";function t(t,e,o){function i(){return u=t.defer(),a(),c(),u.promise}function n(){return o.getCollection().find()}function r(){}function a(){e.initialize()}function c(){e.listIdexers().then(function(t){o.getCollection().clear(),o.getCollection().insert(t.data),o.save(),u.resolve()})}var s=this,u=null;s.up=i,s.getData=r,s.listIndexers=n}angular.module("otusjs.deploy").service("otusjs.deploy.UserDataSourceService",t),t.$inject=["$q","otusjs.deploy.UserRestService","otusjs.user.storage.UserStorageService"]}(),function(){"use strict";function t(t,e,o,i){function n(){var e=t.defer();return r(o),a(i.session),e.resolve(),e.promise}function r(t){e.configureContext(t)}function a(t){e.configureStorage(t)}var c=this;c.bootstrap=n,c.configureContext=r,c.configureStorage=a}angular.module("otusjs.deploy").service("otusjs.deploy.AccessModuleBootstrap",t),t.$inject=["$q","otusjs.user.access.core.ModuleService","otusjs.application.context.ContextFactory","otusjs.application.storage.StorageService"]}(),function(){"use strict";function t(t,e,o,i,n,r,a,c,s,u){function l(){f(e),v(o.session),d(r),t.setActivityRemoteStorage(n),p(i),g(a),y(u),S(c),S(s)}function f(e){t.configureContext(e)}function v(e){t.configureStorage(e)}function p(e){t.configureActivityDataSourceService(e)}function d(e){t.configureUserDataSourceService(e)}function g(e){t.configureActivityFacadeService(e)}function y(e){t.configureActivityPlayerService(e)}function S(e){e.getModels().forEach(t.addModel)}var m=this;m.bootstrap=l,m.configureContext=f,m.configureStorage=v,m.configureActivityDataSourceService=p}angular.module("otusjs.deploy").service("otusjs.deploy.ActivityModuleBootstrap",t),t.$inject=["otusjs.activity.core.ModuleService","otusjs.application.context.ContextFactory","otusjs.application.storage.StorageService","otusjs.deploy.ActivityDataSourceService","otusjs.deploy.ActivityRemoteStorageService","otusjs.deploy.UserDataSourceService","otusjs.deploy.model.ActivityFacadeService","otusjs.deploy.model.ActivityModelPoolService","otusjs.deploy.model.SurveyModelPoolService","otusjs.deploy.PlayerService"]}(),function(){"use strict";function t(t,e,o,i){function n(){var e=t.defer();return r(o),a(i.session),e.resolve(),e.promise}function r(t){e.configureContext(t)}function a(t){e.configureStorage(t)}function c(t){e.begin()}var s=this;s.bootstrap=n,s.configureContext=r,s.configureStorage=a,s.beginApplicationContext=c}angular.module("otusjs.deploy").service("otusjs.deploy.ApplicationModuleBootstrap",t),t.$inject=["$q","otusjs.application.core.ModuleService","otusjs.application.context.ContextFactory","otusjs.application.storage.StorageService"]}(),function(){"use strict";function t(t,e,o,i,n,r,a,c,s,u,l,f,v,p,d,g,y){function S(){n.bootstrap(),o.bootstrap(),i.bootstrap(),r.bootstrap(),a.bootstrap(),c.bootstrap(),s.bootstrap(),g.hasContextActive()&&(u.ignore(),p.recover()),u.Service.Authentication=y.Service.UserAuthenticationService,l.DataSource.User=y.DataSource.User,u.onLogin(g.Event.fireLogin),u.onLogin(p.Event.fireLogin),u.onLogin(l.Event.fireLogin),u.onLogout(g.Event.fireLogout),u.onLogout(p.Event.fireLogout),u.onLogout(d.Event.fireLogout),u.onLogout(l.Event.fireLogout),u.onLogout(g.Event.fireLogout),u.onLogin(t.initializeRestrictResources),u.onLogin(e.initializeDataSources),g.Event.onLogin(p.Event.fireLogin),g.Event.onLogin(l.Event.fireLogin),g.Event.onLogin(t.initializeRestrictResources),g.Event.onLogin(e.initializeDataSources),d.Event.onParticipantSelected(l.Event.fireParticipantSelected),d.Event.onParticipantSelected(p.Event.fireParticipantSelected),d.Event.onParticipantSelected(f.Event.fireParticipantSelected),n.beginApplicationContext()}var m=this;m.run=S}angular.module("otusjs.deploy").service("otusjs.deploy.BootstrapService",t),t.$inject=["otusjs.deploy.OtusApiService","otusjs.deploy.DataSourceLoaderService","otusjs.deploy.AccessModuleBootstrap","otusjs.deploy.ActivityModuleBootstrap","otusjs.deploy.ApplicationModuleBootstrap","otusjs.deploy.ParticipantModuleBootstrap","otusjs.deploy.SessionModuleBootstrap","otusjs.deploy.UserModuleBootstrap","otusjs.deploy.LaboratoryModuleBootstrap","otusjs.user.access.core.ModuleService","otusjs.activity.core.ModuleService","otusjs.laboratory.core.ModuleService","otusjs.application.core.ModuleService","otusjs.otus.dashboard.core.ModuleService","otusjs.participant.core.ModuleService","otusjs.application.session.core.ModuleService","otusjs.user.core.ModuleService"]}(),function(){"use strict";function t(t,e,o,i){function n(){r(e),a(o.session),t.setParticipantLaboratoryRemoteStorage(i)}function r(e){t.configureContext(e)}function a(e){t.configureStorage(e)}var c=this;c.bootstrap=n,c.configureContext=r,c.configureStorage=a}angular.module("otusjs.deploy").service("otusjs.deploy.LaboratoryModuleBootstrap",t),t.$inject=["otusjs.laboratory.core.ModuleService","otusjs.application.context.ContextFactory","otusjs.application.storage.StorageService","otusjs.deploy.ParticipantLaboratoryRemoteStorageService"]}(),function(){"use strict";function t(t,e,o,i,n){function r(){var e=t.defer();return a(o),c(i.session),s(n),e.promise}function a(t){e.configureContext(t)}function c(t){e.configureStorage(t)}function s(t){return e.configureParticipantDataSourceService(t)}var u=this;u.bootstrap=r,u.configureContext=a,u.configureStorage=c,u.configureParticipantDataSource=s}angular.module("otusjs.deploy").service("otusjs.deploy.ParticipantModuleBootstrap",t),t.$inject=["$q","otusjs.participant.core.ModuleService","otusjs.application.context.ContextFactory","otusjs.application.storage.StorageService","otusjs.deploy.ParticipantDataSourceService"]}(),function(){"use strict";function t(t,e,o,i){function n(){var e=t.defer();return r(o),a(i.session),e.resolve(),e.promise}function r(t){e.configureContext(t)}function a(t){e.configureStorage(t)}var c=this;c.bootstrap=n,c.configureContext=r,c.configureStorage=a}angular.module("otusjs.deploy").service("otusjs.deploy.SessionModuleBootstrap",t),t.$inject=["$q","otusjs.application.session.core.ModuleService","otusjs.application.context.ContextFactory","otusjs.application.storage.StorageService"]}(),function(){"use strict";function t(t,e,o,i,n,r){function a(){var e=t.defer();return c(o),s(i.session),l(r),u(n),e.promise}function c(t){e.configureContext(t)}function s(t){e.configureStorage(t)}function u(t){return e.configureUserDataSource(t)}function l(t){e.configureLoginProxy(t)}var f=this;f.bootstrap=a,f.configureContext=c,f.configureStorage=s,f.configureUserDataSource=u,f.configureLoginProxy=l}angular.module("otusjs.deploy").service("otusjs.deploy.UserModuleBootstrap",t),t.$inject=["$q","otusjs.user.core.ModuleService","otusjs.application.context.ContextFactory","otusjs.application.storage.StorageService","otusjs.deploy.UserDataSourceService","otusjs.deploy.AuthenticationRestService"]}(),function(){"use strict";function t(t){function e(){}var o=this;o.setup=e}angular.module("otusjs.deploy").service("otusjs.deploy.PlayerLabelMaker",t),t.$inject=["otusjs.labelMaker.setupView.setupComponent"]}(),function(){"use strict";function t(t){function e(t,e){}function o(e,o){t.activateParticipantActivities()}function i(t,e){}function n(t,e){return e}var r=this;r.beforeEffect=e,r.effect=o,r.afterEffect=i,r.getEffectResult=n}angular.module("otusjs.deploy").service("otusjs.deploy.ExitPlayerStepService",t),t.$inject=["otusjs.application.state.ApplicationStateService"]}(),function(){"use strict";function t(t,e,o,i,n){function r(){s||a(),t.setup()}function a(){e.onEject(o),e.onEject(n),e.onSave(n),e.onStop(i),s=!0}var c=this,s=!1;c.setup=r}angular.module("otusjs.deploy").service("otusjs.deploy.PlayerService",t),t.$inject=["otusjs.player.core.player.PlayerService","otusjs.player.core.player.PlayerConfigurationService","otusjs.deploy.ExitPlayerStepService","otusjs.deploy.StopPlayerStepService","otusjs.deploy.SavePlayerStepService"]}(),function(){"use strict";function t(t,e,o){function i(t,e){}function n(i,n){e.whenActivityFacadeServiceReady().then(function(e){o.save(e.getActivity()).then(t.activateParticipantActivities)})}function r(t,e){}function a(t,e){return e}var c=this;c.beforeEffect=i,c.effect=n,c.afterEffect=r,c.getEffectResult=a}angular.module("otusjs.deploy").service("otusjs.deploy.SavePlayerStepService",t),t.$inject=["otusjs.application.state.ApplicationStateService","otusjs.activity.core.ModuleService","otusjs.activity.repository.ActivityRepositoryService"]}(),function(){"use strict";function t(t){function e(t,e){}function o(e,o){t.activateParticipantActivities()}function i(t,e){}function n(t,e){return e}var r=this;r.beforeEffect=e,r.effect=o,r.afterEffect=i,r.getEffectResult=n}angular.module("otusjs.deploy").service("otusjs.deploy.StopPlayerStepService",t),t.$inject=["otusjs.application.state.ApplicationStateService"]}(),function(){"use strict";function t(t,e,o,i,n,r,a,c,s,u,l,f,v,p,d,g){e.state(o.state),e.state(i.state),e.state(n.state),e.state(r.state),e.state(a.state),e.state(c.state),e.state(l.state),e.state(v.state),e.state(p.state),e.state(s.state),e.state(u.state),e.state(f.state),e.state(d.state),e.state(g.state),t.otherwise(l.state.url)}angular.module("otusjs.deploy").constant("STATE",{ACCESS:"access",ACTIVITY_ADDER:"activity-adder",ACTIVITY_PLAYER:"activity-player",PAPER_ACTIVITY_ADDER:"paper-activity-adder",PAPER_ACTIVITY_INITIALIZER:"paper-activity-initializer",APPLICATION:"application",DASHBOARD:"dashboard",INSTALLER:"installer",LOGIN:"login",PARTICIPANT:"participant",PARTICIPANT_ACTIVITY:"activity",PARTICIPANT_REPORT:"report",SESSION:"session",SIGNUP:"signup",SIGNUP_RESULT:"signup-result",LABORATORY:"laboratory-participant"}).config(t),t.$inject=["$urlRouterProvider","$stateProvider","otusjs.deploy.AccessStateProvider","otusjs.deploy.ActivityStateProvider","otusjs.deploy.ActivityAdderStateProvider","otusjs.deploy.ActivityPlayerStateProvider","otusjs.deploy.PaperActivityAdderStateProvider","otusjs.deploy.PaperActivityInitializerStateProvider","otusjs.deploy.DashboardStateProvider","otusjs.deploy.InstallerStateProvider","otusjs.deploy.LoginStateProvider","otusjs.deploy.ParticipantStateProvider","otusjs.deploy.SignupStateProvider","otusjs.deploy.SignupResultStateProvider","otusjs.deploy.SessionStateProvider","otusjs.deploy.LaboratoryStateProvider"]}(),function(){"use strict";function t(t,e,o,i,n){function r(){o.initialize()}function a(e){var o=t.defer();return i.newDb(e,u(n)).then(function(){o.resolve()}),o.promise}function c(e){var o=t.defer();return i.loadDb(e,u(n)).then(function(){o.resolve()}),o.promise}function s(t){return i.dbExists(t)}function u(t){return t.map(function(t){return e.get(t)})}var l=this;l.initializeSessionStorage=r,l.createLocalStorage=a,l.loadLocalStorage=c,l.dbExists=s}angular.module("otusjs.deploy").service("otusjs.deploy.StorageLoaderService",t),t.$inject=["$q","$injector","otusjs.application.storage.SessionStorageService","otusjs.application.storage.LocalStorageService","OtusLocalStorage"]}(),function(){"use strict";function t(t,e,o){o.onLogin(e.setLoggedUser),o.onLogout(e.end),o.onParticipantSelected(e.setSelectedParticipant),o.onParticipantSelected(e.begin)}angular.module("otusjs.activity",["otusjs.activity.core","otusjs.activity.business","otusjs.activity.repository","otusjs.activity.storage"]).run(t),t.$inject=["otusjs.activity.core.ModuleService","otusjs.activity.core.ContextService","otusjs.activity.core.EventService"]}(),function(){"use strict";function t(t,e){t.onLogin(e.begin),t.onLogin(e.setLoggedUser),t.onLogout(e.end),t.onParticipantSelected(e.setSelectedParticipant)}angular.module("otusjs.otus.dashboard",["otusjs.otus.dashboard.core","otusjs.otus.dashboard.service"]).run(t),t.$inject=["otusjs.otus.dashboard.core.EventService","otusjs.otus.dashboard.core.ContextService"]}(),function(){"use strict";angular.module("otusjs.otus.installer",[])}(),function(){"use strict";function t(t,e,o){o.onParticipantSelected(e.setSelectedParticipant),o.onParticipantSelected(e.begin)}angular.module("otusjs.otus.laboratory",["otusjs.laboratory.core","otusjs.laboratory.business","otusjs.laboratory.repository","otusjs.laboratory.storage"]).run(t),t.$inject=["otusjs.laboratory.core.ModuleService","otusjs.laboratory.core.ContextService","otusjs.laboratory.core.EventService"]}(),function(){"use strict";function t(t,e){e.onLogout(t.end)}angular.module("otusjs.participant",["otusjs.participant.core","otusjs.participant.business","otusjs.participant.repository","otusjs.participant.storage"]).run(t),t.$inject=["otusjs.participant.core.ContextService","otusjs.participant.core.EventService"]}(),function(){"use strict";angular.module("otusjs.user",["otusjs.user.core","otusjs.user.business","otusjs.user.repository","otusjs.user.storage"])}(),function(){"use strict";function t(t,e){t.onLogin(e.end),t.onLogout(e.begin)}angular.module("otusjs.user.access",["otusjs.user.access.core","otusjs.user.access.service"]).run(t),t.$inject=["otusjs.user.access.core.EventService","otusjs.user.access.core.ContextService"]}(),function(){"use strict";function t(t,e){function o(){t.add(r),r=[],e.activateParticipantActivities()}function i(t){var e=r.indexOf(t);e!==-1?r.splice(e,1):r.push(t)}var n=this,r=[];n.addActivities=o,n.catchActivity=i}angular.module("otusjs.otus.uxComponent").component("otusActivityAdder",{controller:t,templateUrl:"app/ux-component/activity-adder/activity-adder-template.html"}),t.$inject=["otusjs.activity.business.ParticipantActivityService","otusjs.application.state.ApplicationStateService"]}(),function(){"use strict";function t(t){function e(){r.isListEmpty=!0,o()}function o(){t.listAvailables().then(function(t){r.activities=t,t.length&&(r.isListEmpty=!1)})}function i(t){return"FORM_INTERVIEW"===t.surveyFormType||"INTERVIEW"===t.surveyFormType?"Entrevista":"PROFILE"===t.surveyFormType?"Perfil":""}function n(t){r.onActivitySelection({activity:t})}var r=this;r.activities=[],r.isListEmpty=!0,r.getType=i,r.selectActivity=n,r.$onInit=e}angular.module("otusjs.otus.uxComponent").component("otusActivityAdderList",{controller:t,templateUrl:"app/ux-component/activity-adder-list/activity-adder-list-template.html",bindings:{onActivitySelection:"&"}}),t.$inject=["otusjs.activity.business.ParticipantActivityService"]}(),function(){"use strict";function t(t){function e(){i.onAddActivities()}function o(){t.activateParticipantActivities()}var i=this;i.addActivities=e,i.returnToParticipantActivities=o}angular.module("otusjs.otus.uxComponent").component("otusActivityAdderToolbar",{controller:t,templateUrl:"app/ux-component/activity-adder-toolbar/activity-adder-toolbar-template.html",bindings:{activityType:"<",onAddActivities:"&"}}),t.$inject=["otusjs.application.state.ApplicationStateService"]}(),function(){"use strict";function t(t,e,o){function i(){r.otusActivityManager.activityInfoComponent=r}function n(){var i=e.getSelectedActivities()[0];r.activity={},r.activity.details=i.surveyForm.surveyTemplate.identity,r.activity.history=i.statusHistory.getHistory().map(o.create),r.activity.history.reverse(),t("right").toggle()}var r=this;r.show=n,r.$onInit=i}angular.module("otusjs.otus.uxComponent").component("otusActivityInformation",{controller:t,templateUrl:"app/ux-component/activity-information/activity-information-template.html",require:{otusActivityManager:"^otusActivityManager"}}),t.$inject=["$mdSidenav","otusjs.activity.core.ContextService","otusjs.otus.uxComponent.ActivityStatusItemFactory"]}(),function(){"use strict";function t(){function t(t){return new e(t)}var o=this;return o.create=t,o}function e(t){function e(t){var e={CREATED:{label:"Criado",color:"#595959",icon:"fiber_new"},OPENED:{label:"Aberto",color:"#0091ea",icon:"visibility"},FINALIZED:{label:"Finalizado",color:"#009688",icon:"check_circle"},SAVED:{label:"Salvo",color:"#ae8323",icon:"save"},INITIALIZED_OFFLINE:{label:"Realizado em Papel",color:"#886430",icon:"edit"},INITIALIZED_ONLINE:{label:"Iniciado Online",color:"#513c1c",icon:"edit"}};return e[t.name]}function o(t){try{var e=new Date(t.date);return e.getDate()+"/"+(e.getMonth()+1)+"/"+e.getFullYear()}catch(o){return null}}var i=this;i.date=o(t),i.user=t.user,i.user.name=t.user.name+" "+t.user.surname,i.status=e(t)}angular.module("otusjs.otus.uxComponent").factory("otusjs.otus.uxComponent.ActivityStatusItemFactory",t)}(),function(){"use strict";function t(){function t(){i.listComponent.update()}function e(){i.activityInfoComponent.show()}function o(){i.listComponent={},i.activityInfoComponent={}}var i=this;i.handleDeleteAction=t,i.handleViewInfoAction=e,i.$onInit=o}angular.module("otusjs.otus.uxComponent").component("otusActivityManager",{controller:t,templateUrl:"app/ux-component/activity-manager/activity-manager-template.html"})}(),function(){"use strict";function t(t){function e(){t.activateActivityAdder()}function o(){t.activatePaperActivityInitializer()}var i=this;i.goToActivityAdder=e,i.goToPaperActivityInitializer=o}angular.module("otusjs.otus.uxComponent").component("otusActivityManagerCommander",{controller:t,templateUrl:"app/ux-component/activity-manager-commander/activity-manager-commander-template.html"}),t.$inject=["otusjs.application.state.ApplicationStateService"]}(),function(){"use strict";function t(){function t(t){return new e(t)}var o=this;return o.create=t,o}function e(t){function e(){try{var e=new Date(t.getRealizationDate());return e.getDate()+"/"+(e.getMonth()+1)+"/"+e.getFullYear()}catch(o){return null}}function o(){var e=t.statusHistory.getLastStatus();return"INITIALIZED_OFFLINE"===e.name?"Realizado em papel":"SAVED"===e.name?"Salvo":"FINALIZED"===e.name?"Finalizado":""}function i(){return"PAPER"===t.mode?{name:"Em papel",icon:"file-document"}:"ONLINE"===t.mode?{name:"Online",icon:"signal"}:{name:"",icon:""}}var n=this;n.name=t.surveyForm.surveyTemplate.identity.name,n.acronym=t.surveyForm.surveyTemplate.identity.acronym,n.mode=i(),n.realizationDate=e(),n.status=o(),n.isDiscarded=t.isDiscarded,n.activity=t,n.id=t.getID()}angular.module("otusjs.otus.uxComponent").factory("otusjs.otus.uxComponent.ActivityItemFactory",t)}(),function(){"use strict";function t(t,e,o){function i(e){var o=u.indexOf(e.activity);o>-1?(u.splice(o,1),e.isSelected=!1):(u.push(e.activity),e.isSelected=!0),t.selectActivities(u)}function n(){u=[],a()}function r(){e.onParticipantSelected(a),s.isListEmpty=!0,s.otusActivityManager.listComponent=s,a()}function a(){t.listAll().then(function(t){s.activities=t.filter(c).map(o.create),s.isListEmpty=!s.activities.length})}function c(t){return!t.isDiscarded}var s=this,u=[];s.activities=[],s.isListEmpty=!0,s.selectActivity=i,s.update=n,s.$onInit=r}angular.module("otusjs.otus.uxComponent").component("otusActivityList",{controller:t,templateUrl:"app/ux-component/activity-manager-list/activity-manager-list-template.html",require:{otusActivityManager:"^otusActivityManager"}}),t.$inject=["otusjs.activity.business.ParticipantActivityService","otusjs.activity.core.EventService","otusjs.otus.uxComponent.ActivityItemFactory"]}(),function(){"use strict";function t(t,e,o,i){function n(){e.load().then(function(){i.activateActivityPlayer()})}function r(){t.getSelectedActivities().discard(),l.onDelete()}function a(){l.onViewInfo()}function c(){s(),o.onParticipantSelected(s),o.onActivitySelected(u)}function s(e){e?l.selectedParticipant=e:t.getSelectedParticipant().then(function(t){l.selectedParticipant=t})}function u(t){t.length<=0?(l.showVisualizationButton=!1,
l.showFillingButton=!1,l.showDeleteButton=!1,l.showInfoButton=!1):1===t.length?(l.showVisualizationButton=!0,l.showFillingButton=!0,l.showDeleteButton=!0,l.showInfoButton=!0):(l.showVisualizationButton=!1,l.showFillingButton=!1,l.showDeleteButton=!0,l.showInfoButton=!1)}var l=this;l.fillSelectedActivity=n,l.deleteSelectedActivity=r,l.visualizeSelectedActivityInfo=a,l.$onInit=c}angular.module("otusjs.otus.uxComponent").component("otusActivityManagerToolbar",{controller:t,templateUrl:"app/ux-component/activity-manager-toolbar/activity-manager-toolbar-template.html",require:{otusActivityManager:"^otusActivityManager"},bindings:{onDelete:"&",onViewInfo:"&"}}),t.$inject=["otusjs.activity.business.ParticipantActivityService","otusjs.activity.business.ActivityPlayerService","otusjs.activity.core.EventService","otusjs.application.state.ApplicationStateService"]}(),function(){"use strict";function t(t){function e(){}var o=this;o.x=e}angular.module("otusjs.otus.uxComponent").component("otusActivityPlayer",{controller:t,templateUrl:"app/ux-component/activity-player/activity-player-template.html"}),t.$inject=["otusjs.activity.core.EventService"]}(),function(){"use strict";function t(t){function e(e){i.selectedParticipant=e,t.activateParticipantActivities()}function o(){i.selectedParticipant=null}var i=this;i.selectParticipant=e,i.$onInit=o}angular.module("otusjs.otus.uxComponent").component("otusDashboard",{controller:t,templateUrl:"app/ux-component/dashboard/dashboard-template.html"}),t.$inject=["otusjs.application.state.ApplicationStateService"]}(),function(){"use strict";function t(){}angular.module("otusjs.otus.uxComponent").component("otusDashboardDisplay",{controller:t,templateUrl:"app/ux-component/dashboard-display/dashboard-display-template.html"})}(),function(){"use strict";function t(t,e,o,i,n){function r(){e.activateParticipantActivities()}function a(){e.activateParticipantReports()}function c(){e.activateLaboratory()}function s(){l.isEmpty=!0,u(),i.onParticipantSelected(u)}function u(t){t?(l.selectedParticipant=t,l.isEmpty=!1):n.getSelectedParticipant().then(function(t){l.selectedParticipant=t,l.isEmpty=!1})}var l=this;l.loadParticipantActivities=r,l.loadParticipantReports=a,l.loadLaboratory=c,l.$onInit=s}angular.module("otusjs.otus.uxComponent").component("otusParticipantBox",{controller:t,templateUrl:"app/ux-component/dashboard-participant-box/dashboard-participant-box-template.html"}),t.$inject=["$element","otusjs.application.state.ApplicationStateService","otusjs.participant.core.ContextService","otusjs.otus.dashboard.core.EventService","otusjs.otus.dashboard.service.DashboardService"]}(),function(){"use strict";function t(t,e,o){function i(){u.toggle()}function n(){e.logout()}function r(){o.activateParticipantActivities()}function a(){o.activateParticipantReports()}function c(){t.when(l).then(function(t){u=t})}var s=this,u=null,l="left";s.close=i,s.logout=n,s.loadParticipantActivities=r,s.loadParticipantReports=a,s.$onInit=c}angular.module("otusjs.otus.uxComponent").component("otusDashboardSidenav",{controller:t,templateUrl:"app/ux-component/dashboard-sidenav/dashboard-sidenav-template.html",bindings:{participant:"<"}}),t.$inject=["$mdComponentRegistry","otusjs.user.access.service.LogoutService","otusjs.application.state.ApplicationStateService"]}(),function(){"use strict";function t(t){function e(){n&&n.toggle()}function o(){t.when(r).then(function(t){n=t})}var i=this,n=null,r="left";i.launchSidenav=e,i.$onInit=o}angular.module("otusjs.otus.uxComponent").component("otusDashboardSidenavLauncher",{controller:t,templateUrl:"app/ux-component/dashboard-sidenav-launcher/dashboard-sidenav-launcher-template.html"}),t.$inject=["$mdComponentRegistry"]}(),function(){"use strict";function t(t,e){function o(t){r.onParticipantSelect({participant:t})}function i(){n(),e.onLogin(n)}function n(e){e?r.loggedUser=e:t.getLoggedUser().then(function(t){r.loggedUser=t})}var r=this;r.selectParticipant=o,r.$onInit=i}angular.module("otusjs.otus.uxComponent").component("otusDashboardToolbar",{controller:t,templateUrl:"app/ux-component/dashboard-toolbar/dashboard-toolbar-template.html",bindings:{onParticipantSelect:"&"}}),t.$inject=["otusjs.otus.dashboard.core.ContextService","otusjs.otus.dashboard.core.EventService"]}(),function(){"use strict";function t(t,e,o,i,n,r,a){function c(){j=e.getOtusInstallerResource()}function s(t){i.isLoading=!0,delete t.userPasswordConfirm,j.config(t,function(t){t.data?S():l(t),i.isLoading=!1})}function u(t){o.setHostname(t);var e=o.getInstallerResource();e.ready(function(t){t.data||p()})}function l(t){switch(t.STATUS){case"CONFLICT":f();break;case"PRECONDITION_FAILED":v();break;default:d()}}function f(){i.initialConfigForm.email.$setValidity("email",!1),i.initialConfigForm.$setValidity("email",!1)}function v(){i.initialConfigForm.emailSenderEmail.$setValidity("emailService",!1),i.initialConfigForm.$setValidity("emailService",!1)}function p(){i.initialConfigForm.urlProject.$setValidity("domainAccess",!1),i.initialConfigForm.$setValidity("domainAccess",!1)}function d(){m(h)}function g(){i.initialConfigForm.emailSenderEmail.$setValidity("emailService",!0),i.initialConfigForm.$setValidity("emailService",!0)}function y(){i.initialConfigForm.urlProject.$setValidity("domainAccess",!0),i.initialConfigForm.$setValidity("domainAccess",!0)}function S(){var t=a.alert().title("Informação").content(A).ok("ok");a.show(t)["finally"](function(){})}function m(t){n.show(n.simple().textContent(t))}var j,h="Erro ao adicionar novas configurações. Contate a equipe de desenvolvimento",A="Suas configurações foram realizadas com sucesso! Você vai ser redirecionado para a tela de login.",b=this;b.register=s,b.validateDomain=u,b.resetValidationEmail=g,b.resetValidationDomain=y,c()}angular.module("otusjs.otus.uxComponent").controller("otusjs.otus.uxComponent.InitialConfigController",t),t.$inject=["otusjs.application.state.ApplicationStateService","OtusRestResourceService","RestResourceService","$scope","$mdToast","$q","$mdDialog"]}(),function(){"use strict";function t(t){function e(){t.hasLaboratory().then(function(t){n.hasLaboratory=t,t&&i()})}function o(){t.createLaboratory().then(function(t){t&&(n.hasLaboratory=!0,i())})}function i(){t.getLaboratory().then(function(){n.json=t.toJson()})}var n=this;n.hasLaboratory=!1,n.json="",n.$onInit=e,n.intializeLaboratory=o}angular.module("otusjs.otus.uxComponent").component("otusLaboratory",{controller:t,templateUrl:"app/ux-component/laboratory/laboratory-start.html"}),t.$inject=["otusjs.laboratory.business.ParticipantLaboratoryService"]}(),function(){"use strict";function t(t,e){function o(){t.add(r),r=[],e.activateParticipantActivities()}function i(t){var e=r.indexOf(t);e!==-1?r.splice(e,1):r.push(t)}var n=this,r=[];n.addActivities=o,n.catchActivity=i}angular.module("otusjs.otus.uxComponent").component("otusPaperActivityAdder",{controller:t,templateUrl:"app/ux-component/paper-activity-adder/paper-activity-adder-template.html"}),t.$inject=["otusjs.activity.business.ParticipantActivityService","otusjs.application.state.ApplicationStateService"]}(),function(){"use strict";function t(t){function e(){o()}function o(){n.activities=t.listAvailables(),console.log(n.activities)}function i(t){n.onActivitySelection({activity:t})}var n=this;n.activities=[],n.selectActivity=i,n.$onInit=e}angular.module("otusjs.otus.uxComponent").component("otusPaperActivityAdderList",{controller:t,templateUrl:"app/ux-component/paper-activity-adder-list/paper-activity-adder-list-template.html",bindings:{onActivitySelection:"&"}}),t.$inject=["otusjs.activity.business.ParticipantActivityService"]}(),function(){"use strict";function t(){function t(t){return new e(t)}var o=this;return o.create=t,o}function e(t){var e=this;e.text=t.name+" "+t.surname,e.title=t.name+" "+t.surname,e.metastat={},e.metastat.code=t.$loki,e.metastat.email=t.email,e.checker=t}angular.module("otusjs.otus.uxComponent").factory("otusjs.otus.uxComponent.CheckerItemFactory",t)}(),function(){"use strict";function t(t,e,o,i,n){function r(o){var i=o?f.filter(u(o)):f,n=t.defer();return e(function(){n.resolve(i)},1e3*Math.random(),!1),n.promise}function a(){i.activateParticipantActivities()}function c(){l.paperActivityData.checker=l.selectedItem.checker,o.initializePaperActivityData(l.paperActivityData),i.activateActivityAdder()}function s(){l.paperActivityData={},l.paperActivityData.realizationDate=new Date}function u(t){var e=angular.lowercase(t);return function(t){return t.text.toLowerCase().indexOf(e)>-1}}var l=this,f=o.listActivityCheckers().map(n.create);l.querySearch=r,l.returnToParticipantActivities=a,l.goToActivityAdder=c,l.$onInit=s}angular.module("otusjs.otus.uxComponent").component("otusPaperActivityInitializer",{controller:t,templateUrl:"app/ux-component/paper-activity-initializer/paper-activity-initializer-template.html"}),t.$inject=["$q","$timeout","otusjs.activity.business.ParticipantActivityService","otusjs.application.state.ApplicationStateService","otusjs.otus.uxComponent.CheckerItemFactory"]}(),function(){"use strict";function t(t){function e(e){t.selectParticipant(e),n.participants=[],n.showResultList=t.hasResultFilter(),n.onSelect({participant:e})}function o(e){n.participants=e,n.showResultList=t.hasResultFilter()}function i(){n.participants=[],n.showResultList=!1,n.otusParticipantSearchTool.resultComponent=n}var n=this;n.selectParticipant=e,n.setResultData=o,n.$onInit=i}angular.module("otusjs.otus.uxComponent").component("otusParticipantSearchResult",{controller:t,templateUrl:"app/ux-component/participant-search-result/participant-search-result-template.html",require:{otusParticipantSearchTool:"^otusParticipantSearchTool"},bindings:{onSelect:"&"}}),t.$inject=["otusjs.participant.business.ParticipantSearchService"]}(),function(){"use strict";function t(t){function e(){t.filter(n.query),n.resultComponent.setResultData(t.getFilteredData())}function o(){n.resultComponent={}}function i(t){n.query="",n.onSelect({participant:t})}var n=this;n.filter=e,n.$onInit=o,n.selectParticipant=i}angular.module("otusjs.otus.uxComponent").component("otusParticipantSearchTool",{controller:t,templateUrl:"app/ux-component/participant-search-tool/participant-search-tool-template.html",bindings:{onSelect:"&"}}),t.$inject=["otusjs.participant.business.ParticipantSearchService"]}(),function(){"use strict";function t(t,e,o){function i(e){t.authenticate(e).then(r,a)}function n(){e.activateSignup()}function r(){e.activateDashboard()}function a(){o.show(u)}var c=this,s="Login Inválido! Verifique os dados informados.",u=o.simple().textContent(s);c.authenticate=i,c.goToSignupPage=n}angular.module("otusjs.otus.uxComponent").controller("otusjs.otus.uxComponent.LoginController",t),t.$inject=["otusjs.user.access.service.LoginService","otusjs.application.state.ApplicationStateService","$mdToast"]}(),function(){"use strict";function t(t,e,o,i){function n(o){v.isWaiting=!0,e.executeSignup(o).then(function(e){e.data?t.activateSignupResult():r(e),v.isWaiting=!1})}function r(t){switch(t.STATUS){case"CONFLICT":a();break;default:c()}}function a(){o.signupForm.email.$setValidity("emailInUse",!1),v.isWaiting=!1}function c(){i.show(i.simple().textContent(f))}function s(){o.signupForm.email.$setValidity("emailInUse",!0),o.signupForm.$setValidity("emailInUse",!0)}function u(){t.activateLogin()}function l(){t.activateLogin()}var f="Houve um erro ao realizar o cadastro. Informe a equipe de desenvolvimento",v=this;v.signup=n,v.back=u,v.agree=l,v.resetEmailValidation=s}angular.module("otusjs.otus.uxComponent").controller("otusjs.otus.uxComponent.SignupController",t),t.$inject=["otusjs.application.state.ApplicationStateService","otusjs.user.access.service.SignupService","$scope","$mdToast"]}(),function(){"use strict";function t(t){}angular.module("otusjs.application.http").config(t),t.$inject=["$httpProvider"]}(),function(){"use strict";function t(){function t(t){return t}var e=this;return e.responseError=t,e}angular.module("otusjs.application.http").factory("otusjs.application.http.ResponseInterceptor",t),t.$inject=[]}(),function(){"use strict";function t(t,e){function o(e){t.sessionStorage.setItem("outk",e.token),u(A,e)}function i(){r(),p(),j&&(e.fireLogin(s(A)),j=!1)}function n(){m.removeItem(h),t.sessionStorage.removeItem("outk")}function r(){if(d(),!a())throw new Error("There is no active session context.","session/context-service.js",58)}function a(){return!!m.getItem(h)}function c(){d(),m.setItem(h,S.toJson())}function s(t){return d(),S.getData(t)}function u(t,e){d(),S.setData(t,e),c()}function l(t){d(),S.removeData(t),c()}function f(t){S=t.create(h)}function v(t){m=t}function p(){r(),a()&&S.fromJson(m.getItem(h))}function d(){if(!S)throw new Error("Internal context is not initialized.","session-context-service.js",152);if(!m)throw new Error("Internal storage is not initialized.","application-context-service.js",158)}function g(){return null}var y=this,S=null,m=null,j=!0,h="session_context",A="loggedUser";y.begin=o,y.restore=i,y.end=n,y.isValid=r,y.hasContextActive=a,y.save=c,y.configureContext=f,y.configureStorage=v,y.getData=s,y.setData=u,y.removeData=l,y.getToken=g}angular.module("otusjs.application.session.core").service("otusjs.application.session.core.ContextService",t),t.$inject=["$window","otusjs.application.session.core.EventService"]}(),function(){"use strict";function t(){function t(t){n(a,t,a.length)}function e(t){a.push(t)}function o(t){n(c,t,c.length)}function i(t){c.push(t)}function n(t,e,o){for(var i=0;i<o;i++)t[i](e)}var r=this,a=[],c=[];r.fireLogin=t,r.onLogin=e,r.fireLogout=o,r.onLogout=i}angular.module("otusjs.application.session.core").service("otusjs.application.session.core.EventService",t)}(),function(){"use strict";function t(t,e){function o(e){t.configureContext(e)}function i(e){t.configureStorage(e)}function n(){return t.hasContextActive()}var r=this;r.Event=e,r.configureContext=o,r.configureStorage=i,r.hasContextActive=n}angular.module("otusjs.application.session.core").service("otusjs.application.session.core.ModuleService",t),t.$inject=["otusjs.application.session.core.ContextService","otusjs.application.session.core.EventService"]}(),function(){"use strict";angular.module("otusjs.application.session.core",[])}(),function(){"use strict";angular.module("otusjs.application.state").constant("STATE",{ACCESS:"access",ACTIVITY_ADDER:"activity-adder",ACTIVITY_PLAYER:"activity-player",PAPER_ACTIVITY_ADDER:"paper-activity-adder",PAPER_ACTIVITY_INITIALIZER:"paper-activity-initializer",APPLICATION:"application",DASHBOARD:"dashboard",INSTALLER:"installer",LOGIN:"login",LABORATORY:"laboratory-participant",PARTICIPANT:"participant",PARTICIPANT_ACTIVITY:"activity",PARTICIPANT_REPORT:"report",SESSION:"session",SIGNUP:"signup",SIGNUP_RESULT:"signup-result",LABELMAKER:"labelMaker"})}(),function(){"use strict";function t(t,e,o,i){e.$on("$stateChangeSuccess",function(t,e,o,n,r){i.setCurrentState(e)})}angular.module("otusjs.application.state").service("otusjs.application.state.RouteResolverService",t),t.$inject=["$injector","$rootScope","$state","otusjs.application.state.ApplicationStateService"]}(),function(){"use strict";function t(t,e){function o(){e.go(t.ACTIVITY_ADDER)}function i(){e.go(t.ACTIVITY_PLAYER)}function n(){e.go(t.PAPER_ACTIVITY_ADDER)}function r(){e.go(t.PAPER_ACTIVITY_INITIALIZER)}function a(){e.go(t.INSTALLER)}function c(){e.go(t.LOGIN)}function s(){e.go(t.LABORATORY)}function u(){e.go(t.DASHBOARD)}function l(){e.go(t.PARTICIPANT_ACTIVITY)}function f(){e.go(t.PARTICIPANT_REPORT)}function v(){e.go(t.SIGNUP)}function p(){e.go(t.SIGNUP_RESULT)}var d=this;d.activateActivityAdder=o,d.activateActivityPlayer=i,d.activatePaperActivityAdder=n,d.activatePaperActivityInitializer=r,d.activateInstaller=a,d.activateLogin=c,d.activateLaboratory=s,d.activateDashboard=u,d.activateParticipantActivities=l,d.activateParticipantReports=f,d.activateSignup=v,d.activateSignupResult=p}angular.module("otusjs.application.state").service("otusjs.application.state.ApplicationStateService",t),t.$inject=["STATE","$state"]}(),function(){"use strict";function t(t){function e(){v=t.createInstance({name:"otus",driver:"asyncStorage",storeName:"session_data"})._localforage,o("dbname","otus")}function o(t,e){return v.setItem(t,e)}function i(t){return v.getItem(t)}function n(t){return v.removeItem(t)}function r(t){return v.pull(t)}function a(){return v.clear()}function c(t){return v.key(t)}function s(){return v.keys()}function u(){return v.length()}function l(t){return v.iterate(t)}var f=this,v=null;f.initialize=e,f.setItem=o,f.getItem=i,f.removeItem=n,f.pull=r,f.clear=a,f.key=c,f.keys=s,f.length=u,f.iterate=l}angular.module("otusjs.application.storage").service("otusjs.application.storage.IndexedDbService",t),t.$inject=["$localForage"]}(),function(){"use strict";function t(t,e,o){function i(t){return l[t].lokiDb}function n(e,o){return l[e]={},l[e].loading=t.defer(),l[e].storages=o,l[e].lokiDb=new loki(e,{autoload:!0,autoloadCallback:function(){c(e)}}),l[e].loading.promise}function r(e,o){return l[e]={},l[e].loading=t.defer(),l[e].storages=o,l[e].lokiDb=new loki(e,{autoload:!0,autoloadCallback:function(){s(e)}}),l[e].loading.promise}function a(t){return!!e.localStorage.getItem(t)}function c(t){l[t].storages.forEach(function(e){e.options||(e.options={}),e.initialize(i(t).addCollection(e.collectionName,e.options),i(t))}),i(t).saveDatabase(),l[t].loading.resolve()}function s(t){l[t].storages.forEach(function(e){e.initialize(i(t).getCollection(e.collectionName),i(t))}),l[t].loading.resolve()}var u=this,l={};u.getDb=i,u.newDb=n,u.loadDb=r,u.dbExists=a}angular.module("otusjs.application.storage").service("otusjs.application.storage.LocalStorageService",t),t.$inject=["$q","$window","Lokiwork"]}(),function(){"use strict";function t(t,e){function o(){return d=t.defer(),v=e.sessionStorage,p=!0,d.resolve(),d.promise}function i(){return p}function n(t,e){return v.setItem(t,e)}function r(t){return v.getItem(t)}function a(t){return v.removeItem(t)}function c(){return v.clear()}function s(t){return v.key(t)}function u(){return v.keys()}function l(){return v.length()}var f=this,v=null,p=!1,d=null;f.initialize=o,f.isReady=i,f.setItem=n,f.getItem=r,f.removeItem=a,f.clear=c,f.key=s,f.keys=u,f.length=l}angular.module("otusjs.application.storage").service("otusjs.application.storage.SessionStorageService",t),t.$inject=["$q","$window"]}(),function(){"use strict";function t(t,e,o){function i(){return v=t.defer(),e.initialize().then(c),o.initialize().then(s),v.promise}function n(){return v=t.defer(),o.initialize().then(s),v.promise}function r(){return v=t.defer(),e.initialize().then(c),v.promise}function a(){return f}function c(){f=e.isReady()&&o.isReady(),u()}function s(){f=e.isReady()&&o.isReady(),u()}function u(){a()&&v.resolve("Application start data loaded.")}var l=this,f=!1,v=null;l.local=e,l.session=o,l.initialize=i,l.initializeSession=n,l.initializeLocal=r,l.isReady=a}angular.module("otusjs.application.storage").service("otusjs.application.storage.StorageService",t),t.$inject=["$q","otusjs.application.storage.LocalStorageService","otusjs.application.storage.SessionStorageService"]}(),function(){"use strict";function t(t){function e(){return t.surveyActivity}function o(e){t.surveyActivity=e,u.surveyActivity=e}function i(o,i,n,r){return r?t.createPaperActivity(o,i,n,r):t.createActivity(o,i,n,n),e()}function n(e){l=e,t.openActivitySurvey(l)}function r(){t.initializeActivitySurvey()}function a(e,o,i,n){return t.createQuestionFill(e,o,i,n)}function c(e){t.fillQuestion(e)}function s(e){return t.getFillingByQuestionID(e)}var u=this,l=null;u.getActivity=e,u.useActivity=o,u.createActivity=i,u.createQuestionFill=a,u.fillQuestion=c,u.openSurveyActivity=n,u.initializeActivitySurvey=r,u.getFillingByQuestionID=s}angular.module("otusjs.deploy").service("otusjs.deploy.model.ActivityFacadeService",t),t.$inject=["otusjs.model.activity.ActivityFacadeService"]}(),function(){"use strict";function t(t){function e(){return a}function o(){a=a.concat([i("ActivityParticipantDataFactory"),i("ActivityStatusFactory"),i("ActivityFactory"),i("ActivityUserFactory"),i("AnswerFillFactory"),i("InterviewFactory"),i("InterviewerFactory")])}function i(e){return t.get(r+e)}var n=this,r="otusjs.model.activity.",a=[];n.getModels=e,o()}angular.module("otusjs.deploy").service("otusjs.deploy.model.ActivityModelPoolService",t),t.$inject=["$injector"]}(),function(){"use strict";function t(t){function e(){return a}function o(){a=a.concat([i("SurveyFactory"),i("SurveyFormFactory"),i("SurveyIdentityFactory"),i("SurveyMetaInfoFactory")])}function i(e){return t.get(r+e)}var n=this,r="",a=[];n.getModels=e,o()}angular.module("otusjs.deploy").service("otusjs.deploy.model.SurveyModelPoolService",t),t.$inject=["$injector"]}(),function(){"use strict";function t(t,e,o,i,n,r,a){function c(){t.initialize(),e.initialize()}function s(){o.initialize(),i.initialize(),n.initialize(),r.initialize(),a.initialize()}var u=this;u.initializeOpenResources=c,u.initializeRestrictResources=s}angular.module("otusjs.deploy").service("otusjs.deploy.OtusApiService",t),t.$inject=["otusjs.deploy.AuthenticationRestService","otusjs.deploy.InstallerRestService","otusjs.deploy.ActivityRestService","otusjs.deploy.ProjectConfigurationRestService","otusjs.deploy.ParticipantRestService","otusjs.deploy.UserRestService","otusjs.deploy.ParticipantLaboratoryRestService"]}(),function(){"use strict";function t(t){function e(){return n}function o(e,o,i){var n=e.defer();return i.isDeployed().then(function(){try{o.isValid(),n.resolve()}catch(e){n.resolve(t.DASHBOARD)}}),n.promise}function i(e){e.ready(function(e){return e.data?t.LOGIN:t.INSTALLER})}var n=this;n.$get=[e],n.state={"abstract":!0,name:t.ACCESS,template:'<div flex layout="column"><div ui-view flex layout="row"></div></div>',data:{redirect:o},resolve:{applicationReady:i}},o.$inject=["$q","otusjs.user.access.core.ContextService","otusjs.application.core.ModuleService"],i.$inject=["otusjs.deploy.InstallerRestService"]}angular.module("otusjs.deploy").provider("otusjs.deploy.AccessState",t),t.$inject=["STATE"]}(),function(){"use strict";function t(t){function e(){return o}var o=this;o.$get=[e],o.state={parent:t.ACCESS,name:t.LOGIN,url:"/"+t.LOGIN,templateUrl:"app/ux-component/user-login/login.html",controller:"otusjs.otus.uxComponent.LoginController as $ctrl"}}angular.module("otusjs.deploy").provider("otusjs.deploy.LoginState",t),t.$inject=["STATE"]}(),function(){"use strict";function t(t){function e(){return o}var o=this;o.$get=[e],o.state={parent:t.ACCESS,name:t.SIGNUP_RESULT,url:"/"+t.SIGNUP_RESULT,templateUrl:"app/ux-component/user-signup/signup-result.html",controller:"otusjs.otus.uxComponent.SignupController as $ctrl"}}angular.module("otusjs.deploy").provider("otusjs.deploy.SignupResultState",t),t.$inject=["STATE"]}(),function(){"use strict";function t(t){function e(){return o}var o=this;o.$get=[e],o.state={parent:t.ACCESS,name:t.SIGNUP,url:"/"+t.SIGNUP,templateUrl:"app/ux-component/user-signup/signup.html",controller:"otusjs.otus.uxComponent.SignupController as $ctrl"}}angular.module("otusjs.deploy").provider("otusjs.deploy.SignupState",t),t.$inject=["STATE"]}(),function(){"use strict";function t(t){function e(){return i}function o(t,e){e.isDeployed().then(function(){try{t.restore()}catch(e){t.begin()}})}var i=this;i.$get=[e],i.state={parent:t.DASHBOARD,name:t.ACTIVITY_ADDER,url:"/"+t.ACTIVITY_ADDER,template:'<otus-activity-adder layout="column" flex></otus-activity-adder>',onEnter:o},o.$inject=["otusjs.activity.core.ContextService","otusjs.application.core.ModuleService"]}angular.module("otusjs.deploy").provider("otusjs.deploy.ActivityAdderState",t),t.$inject=["STATE"]}(),function(){"use strict";function t(t){function e(){return n}function o(e,o,i,n){var r=e.defer();return i.isDeployed().then(function(){try{o.isValid(),o.restore(),r.resolve()}catch(e){r.resolve(t.DASHBOARD)}}),r.promise}function i(t,e,o){o.isDeployed().then(function(){try{t.restore(),e.restore()}catch(o){console.log(o)}})}var n=this;n.$get=[e],n.state={name:t.ACTIVITY_PLAYER,url:"/"+t.ACTIVITY_PLAYER,template:'<otus-activity-player layout="row" flex></otus-activity-player>',data:{redirect:o},resolve:{loadPlayerContext:i}},o.$inject=["$q","otusjs.activity.core.ContextService","otusjs.application.core.ModuleService","otusjs.deploy.model.ActivityFacadeService"],i.$inject=["otusjs.activity.core.ContextService","otusjs.application.session.core.ContextService","otusjs.application.core.ModuleService"]}angular.module("otusjs.deploy").provider("otusjs.deploy.ActivityPlayerState",t),t.$inject=["STATE"]}(),function(){"use strict";function t(t){function e(){return n}function o(e,o,i){var n=e.defer();return i.isDeployed().then(function(){try{o.isValid(),n.resolve()}catch(e){n.resolve(t.LOGIN)}}),n.promise}function i(t,e,o,i,n){i.isDeployed().then(function(){try{e.restore(),o.restore()}catch(t){console.log(t)}})}var n=this;n.$get=[e],n.state={parent:t.DASHBOARD,name:t.PARTICIPANT_ACTIVITY,url:"/"+t.PARTICIPANT_ACTIVITY,template:'<otus-activity-manager layout="column" flex></otus-activity-manager>',data:{redirect:o},resolve:{loadStateData:i}},o.$inject=["$q","otusjs.activity.core.ContextService","otusjs.application.core.ModuleService"],i.$inject=["otusjs.activity.core.ContextService","otusjs.participant.core.ContextService","otusjs.application.session.core.ContextService","otusjs.application.core.ModuleService","otusjs.deploy.ActivityDataSourceService"]}angular.module("otusjs.deploy").provider("otusjs.deploy.ActivityState",t),t.$inject=["STATE"]}(),function(){"use strict";function t(t){function e(){return i}function o(t,e){e.isDeployed().then(function(){try{t.restore()}catch(e){t.begin()}})}var i=this;i.$get=[e],i.state={parent:t.DASHBOARD,name:t.PAPER_ACTIVITY_ADDER,url:"/"+t.PAPER_ACTIVITY_ADDER,template:'<otus-paper-activity-adder layout="column" flex></otus-paper-activity-adder>',onEnter:o},o.$inject=["otusjs.activity.core.ContextService","otusjs.application.core.ModuleService"]}angular.module("otusjs.deploy").provider("otusjs.deploy.PaperActivityAdderState",t),t.$inject=["STATE"]}(),function(){"use strict";function t(t){function e(){return i}function o(t,e){e.isDeployed().then(function(){try{t.restore()}catch(e){t.begin()}})}var i=this;i.$get=[e],i.state={parent:t.DASHBOARD,name:t.PAPER_ACTIVITY_INITIALIZER,url:"/"+t.PAPER_ACTIVITY_INITIALIZER,template:'<otus-paper-activity-initializer layout="column" layout-align="center center" flex></otus-paper-activity-initializer>',onEnter:o},o.$inject=["otusjs.activity.core.ContextService","otusjs.application.core.ModuleService"]}angular.module("otusjs.deploy").provider("otusjs.deploy.PaperActivityInitializerState",t),t.$inject=["STATE"]}(),function(){"use strict";function t(t){function e(){return n}function o(e,o,i){var n=e.defer();return i.isDeployed().then(function(){try{o.isValid(),n.resolve()}catch(e){n.resolve(t.LOGIN)}}),n.promise}function i(t,e,o){o.isDeployed().then(function(){try{t.restore(),e.restore()}catch(o){console.log(o)}})}var n=this;n.$get=[e],n.state={parent:t.SESSION,name:t.DASHBOARD,url:"/"+t.DASHBOARD,template:'<otus-dashboard layout="column" flex></otus-dashboard>',data:{redirect:o},resolve:{loadParticipantContext:i}},o.$inject=["$q","otusjs.otus.dashboard.core.ContextService","otusjs.application.core.ModuleService"],i.$inject=["otusjs.participant.core.ContextService","otusjs.application.session.core.ContextService","otusjs.application.core.ModuleService"]}angular.module("otusjs.deploy").provider("otusjs.deploy.DashboardState",t),t.$inject=["STATE"]}(),function(){"use strict";function t(t){function e(){return i}function o(e,o){var i=e.defer();return o.ready(function(e){e.data?i.resolve(t.LOGIN):i.resolve()}),i.promise}var i=this;i.$get=[e],i.state={name:t.INSTALLER,url:"/"+t.INSTALLER,templateUrl:"app/ux-component/installer/initial-config.html",controller:"otusjs.otus.uxComponent.InitialConfigController as controller",data:{redirect:o}},o.$inject=["$q","otusjs.deploy.InstallerRestService"]}angular.module("otusjs.deploy").provider("otusjs.deploy.InstallerState",t),t.$inject=["STATE"]}(),function(){"use strict";function t(t){function e(){return n}function o(e,o,i){var n=e.defer();return i.isDeployed().then(function(){try{o.isValid(),n.resolve()}catch(e){n.resolve(t.LOGIN)}}),n.promise}function i(t,e,o,i){i.isDeployed().then(function(){try{e.restore(),o.restore()}catch(t){console.log(t)}})}var n=this;n.$get=[e],n.state={parent:t.DASHBOARD,name:t.LABORATORY,url:"/"+t.LABORATORY,template:"<otus-laboratory></otus-laboratory>",data:{redirect:o},resolve:{loadStateData:i}},o.$inject=["$q","otusjs.laboratory.core.ContextService","otusjs.application.core.ModuleService"],i.$inject=["otusjs.laboratory.core.ContextService","otusjs.participant.core.ContextService","otusjs.application.session.core.ContextService","otusjs.application.core.ModuleService"]}angular.module("otusjs.deploy").provider("otusjs.deploy.LaboratoryState",t),t.$inject=["STATE"]}(),function(){"use strict";function t(t){function e(){return o}var o=this;o.$get=[e],o.state={"abstract":!0,parent:t.DASHBOARD,name:t.PARTICIPANT,url:"/"+t.PARTICIPANT,template:'<div id="participant-state-template" flex ui-view></div>'}}angular.module("otusjs.deploy").provider("otusjs.deploy.ParticipantState",t),t.$inject=["STATE"]}(),function(){"use strict";function t(t){function e(){return r}function o(e,o){o.isDeployed().then(function(){try{e.isValid()}catch(o){return t.LOGIN}})}function i(e,o){o.isDeployed().then(function(){try{e.restore()}catch(o){return t.LOGIN}})}function n(t,e){e.isDeployed().then(function(){try{t.isValid()}catch(e){t.end()}})}var r=this;r.$get=[e],r.state={"abstract":!0,name:t.SESSION,template:'<div flex layout="column"><div flex layout="row" ui-view></div></div>',data:{redirect:o},resolve:{loadContext:i},onExit:n},o.$inject=["otusjs.application.session.core.ContextService","otusjs.application.core.ModuleService"],i.$inject=["otusjs.application.session.core.ContextService","otusjs.application.core.ModuleService"],n.$inject=["otusjs.application.session.core.ContextService","otusjs.application.core.ModuleService"]}angular.module("otusjs.deploy").provider("otusjs.deploy.SessionState",t),t.$inject=["STATE"]}(),function(){"use strict";function t(t,e){function o(e){var o=t.defer();return r(e,function(t){o.resolve(t)}),o.promise}function i(e){var o=t.defer();return c(e,function(t){o.resolve(t)}),o.promise}function n(t){return e.list(t.recruitmentNumber)}function r(t,e,o){u(a)(t,e,o)}function a(o){var i=t.defer();return e.save(o).then(function(t){o._id=t.data,i.resolve(o)}),i.promise}function c(t,e,o){u(s)(t,e,o)}function s(o){var i=t.defer();return e.update(o).then(function(t){i.resolve(o)}),i.promise}function u(t){return function e(o,i,n){n=n||0;var r=o[n];t(r).then(function(){++n,n<o.length?e(o,i,n):i&&i(o)})}}var l=this;l.insert=o,l.update=i,l.find=n}angular.module("otusjs.deploy").service("otusjs.deploy.ActivityRemoteStorageService",t),t.$inject=["$q","otusjs.deploy.ActivityRestService"]}(),function(){"use strict";function t(t,e){function o(o){var i=t.defer();return e.create(),i.promise}function i(o){var i=t.defer();return e.createLaboratory(o).then(function(t){i.resolve(t.data)}),i.promise}function n(o){var i=t.defer();return e.createLaboratoryEmpty(o).then(function(t){i.resolve(t.data)}),i.promise}function r(o){var i=t.defer();return e.getLaboratory(o).then(function(t){i.resolve(t.data)}),i.promise}var a=this;a.insert=o,a.createLaboratoryEmpty=n,a.createLaboratory=i,a.getLaboratory=r}angular.module("otusjs.deploy").service("otusjs.deploy.ParticipantLaboratoryRemoteStorageService",t),t.$inject=["$q","otusjs.deploy.ParticipantLaboratoryRestService"]}(),function(){"use strict";function t(t,e){function o(){return t.whenActivityFacadeServiceReady().then(function(t){i(t),n()})}function i(t){var o=e.getSelectedActivities()[0];t.useActivity(o),t.openSurveyActivity(e.getLoggedUser()),e.setActivityToPlay(o)}function n(){t.whenActivityPlayerServiceReady().then(function(t){
t.setup()})}var r=this;r.load=o}angular.module("otusjs.activity.business").service("otusjs.activity.business.ActivityPlayerService",t),t.$inject=["otusjs.activity.core.ModuleService","otusjs.activity.core.ContextService"]}(),function(){"use strict";angular.module("otusjs.activity.business",[])}(),function(){"use strict";function t(t,e,o,i){function n(t){var i=e.getLoggedUser();l().then(function(e){p?(o.createFromPaperActivity(t,i,e,p),p=null):o.createFromSurvey(t,i,e)})}function r(){return l().then(function(t){return o.listAll(t)})}function a(){return o.listAvailables()}function c(t){p=t}function s(t){e.selectActivities(t)}function u(){return{list:function(){return e.getSelectedActivities()},discard:function(){var t=e.getSelectedActivities().map(function(t){return t.isDiscarded=!0,t});o.discard(t),e.clearSelectedActivities()}}}function l(){return e.getSelectedParticipant()}function f(){return i.listAll()}var v=this,p=null;v.initializePaperActivityData=c,v.add=n,v.listAll=r,v.listAvailables=a,v.selectActivities=s,v.getSelectedActivities=u,v.getSelectedParticipant=l,v.listActivityCheckers=f}angular.module("otusjs.activity.business").service("otusjs.activity.business.ParticipantActivityService",t),t.$inject=["otusjs.activity.core.ModuleService","otusjs.activity.core.ContextService","otusjs.activity.repository.ActivityRepositoryService","otusjs.activity.repository.UserRepositoryService"]}(),function(){"use strict";function t(t,e){function o(){I.clear(),c()}function i(){p()}function n(){x.removeItem(E)}function r(){if(d(),!a())throw new Error("There is no active activity context.","activity/context-service.js",61)}function a(){return!!x.getItem(E)}function c(){d(),x.setItem(E,I.toJson())}function s(t){return d(),I.getData(t)}function u(t,e){d(),I.setData(t,e),c()}function l(t){d(),I.removeData(t),c()}function f(t){I=t.create(E)}function v(t){x=t}function p(){r(),I.fromJson(x.getItem(E))}function d(){if(!I)throw new Error("Internal context is not initialized.","activity-context-service.js",159);if(!x)throw new Error("Internal storage is not initialized.","activity-context-service.js",165)}function g(){return L.promise}function y(e){L=t.defer(),e&&L.resolve(e)}function S(){return D}function m(t){D=t}function j(){return s("selectedActivities")||[]}function h(){u("selectedActivities",[])}function A(t){u("selectedActivities",t),e.fireActivitySelected(t)}function b(){return s("activityToPlay")}function P(t){u("activityToPlay",t)}function $(){return!!s("activityToPlay")}var C=this,I=null,x=null,E="activity_context",L=t.defer(),D=null;C.begin=o,C.restore=i,C.end=n,C.isValid=r,C.hasContextActive=a,C.save=c,C.configureContext=f,C.configureStorage=v,C.getData=s,C.setData=u,C.removeData=l,C.getSelectedParticipant=g,C.setSelectedParticipant=y,C.getLoggedUser=S,C.setLoggedUser=m,C.getSelectedActivities=j,C.clearSelectedActivities=h,C.selectActivities=A,C.getActivityToPlay=b,C.setActivityToPlay=P,C.existsActivityToPlay=$}angular.module("otusjs.activity.core").service("otusjs.activity.core.ContextService",t),t.$inject=["$q","otusjs.activity.core.EventService"]}(),function(){"use strict";function t(){function t(t){u(f,t,f.length)}function e(t){var e=t.name;f[e]=t}function o(t){s(v,t,v.length)}function i(t){v.push(t)}function n(t){s(p,t,p.length)}function r(t){p.push(t)}function a(t){s(d,t,d.length)}function c(t){d.push(t)}function s(t,e,o){for(var i=0;i<o;i++)t[i](e)}function u(t,e,o){for(var i in t)t[i](e)}var l=this,f={},v=[],p=[],d=[];l.fireParticipantSelected=t,l.onParticipantSelected=e,l.fireActivitySelected=o,l.onActivitySelected=i,l.fireLogin=n,l.onLogin=r,l.fireLogout=a,l.onLogout=c}angular.module("otusjs.activity.core").service("otusjs.activity.core.EventService",t)}(),function(){"use strict";function t(t,e,o){function i(t){e.configureContext(t)}function n(t){e.configureStorage(t)}function r(t){y.DataSource.Activity=t,j.resolve(y.DataSource.Activity.getSurveyDataSet())}function a(t){y.Model.ActivityFacadeService=t,h.resolve(y.Model.ActivityFacadeService)}function c(t){y.Model.ActivityPlayerService=t,A.resolve(y.Model.ActivityPlayerService)}function s(t){y.DataSource.User=t}function u(t){y.Model[t.OBJECT_TYPE]=t}function l(){return y.RemoteStorage.Activity&&(S=t.defer(),S.resolve(y.RemoteStorage.Activity)),{whenReady:function(){return S.promise}}}function f(t){y.RemoteStorage.Activity=t,S.resolve(y.RemoteStorage.Activity)}function v(){return y.DataSource.Activity&&(m=t.defer()),m.promise}function p(){return y.Model.ActivityFacadeService&&(h=t.defer(),h.resolve(y.Model.ActivityFacadeService)),h.promise}function d(){return y.Model.ActivityPlayerService&&(A=t.defer(),A.resolve(y.Model.ActivityPlayerService)),A.promise}function g(){return y.DataSource.Activity&&(j=t.defer(),j.resolve(y.DataSource.Activity.getSurveyDataSet())),j.promise}var y=this,S=t.defer(),m=t.defer(),j=t.defer(),h=t.defer(),A=t.defer();y.RemoteStorage={},y.DataSource={},y.Event=o,y.Model={},y.configureContext=i,y.configureStorage=n,y.configureActivityDataSourceService=r,y.configureActivityFacadeService=a,y.configureActivityPlayerService=c,y.configureUserDataSourceService=s,y.addModel=u,y.getActivityRemoteStorage=l,y.setActivityRemoteStorage=f,y.whenActivityDataSourceServiceReady=v,y.whenActivityFacadeServiceReady=p,y.whenActivityPlayerServiceReady=d,y.whenSurveyDataSourceServiceReady=g}angular.module("otusjs.activity.core").service("otusjs.activity.core.ModuleService",t),t.$inject=["$q","otusjs.activity.core.ContextService","otusjs.activity.core.EventService"]}(),function(){"use strict";function t(t){t.execute()}angular.module("otusjs.activity.core",[]).run(t),t.$inject=["otusjs.activity.core.ServiceLoader"]}(),function(){"use strict";function t(t){function e(){t.Service={},t.DataSource={}}var o=this;o.execute=e}angular.module("otusjs.activity.core").service("otusjs.activity.core.ServiceLoader",t),t.$inject=["otusjs.activity.core.ModuleService"]}(),function(){"use strict";angular.module("otusjs.activity.repository",[])}(),function(){"use strict";function t(t){function e(t,e){a=t,c=e}function o(t){var e=a.insert(t);return c.saveDatabase(),e}function i(t){a.update(t),c.saveDatabase()}function n(){a.clear(),r.options.unique.forEach(function(t){a.constraints.unique[t].keyMap={},a.constraints.unique[t].lokiMap={}}),c.saveDatabase()}var r=this,a={},c=null;t.defer();r.collectionName="activities",r.options={unique:["_id"]},r.initialize=e,r.insert=o,r.update=i,r.clear=n}angular.module("otusjs.activity.storage").service("otusjs.activity.storage.ActivityLocalStorageService",t),t.$inject=["$q"]}(),function(){"use strict";angular.module("otusjs.activity.storage",[])}(),function(){"use strict";function t(){function t(t,e){n=t,r=e}function e(){return n}function o(){r.saveDatabase()}var i=this,n={},r=null;i.collectionName="surveys",i.initialize=t,i.getCollection=e,i.save=o}angular.module("otusjs.activity.storage").service("otusjs.activity.storage.SurveyStorageService",t)}(),function(){"use strict";function t(t){function e(){f=!0}function o(){f=!0}function i(){f=!1}function n(){r()}function r(){if(!f)throw new Error("Does not exist a valid session.","dashboard-context-service.js",27)}function a(){return v.promise}function c(e){v=t.defer(),e&&v.resolve(e)}function s(){return p.promise}function u(e){p=t.defer(),e&&p.resolve(e)}var l=this,f=!1,v=t.defer(),p=t.defer();l.begin=e,l.restore=o,l.end=i,l.isValid=n,l.getSelectedParticipant=a,l.setSelectedParticipant=c,l.getLoggedUser=s,l.setLoggedUser=u}angular.module("otusjs.otus.dashboard.core").service("otusjs.otus.dashboard.core.ContextService",t),t.$inject=["$q"]}(),function(){"use strict";function t(){function t(t){a(s,t,s.length)}function e(t){s.push(t)}function o(t){a(u,t,u.length)}function i(t){u.push(t)}function n(t){a(l,t,l.length)}function r(t){l.push(t)}function a(t,e,o){for(var i=0;i<o;i++)t[i](e)}var c=this,s=[],u=[],l=[];c.fireParticipantSelected=t,c.onParticipantSelected=e,c.fireLogin=o,c.onLogin=i,c.fireLogout=n,c.onLogout=r}angular.module("otusjs.otus.dashboard.core").service("otusjs.otus.dashboard.core.EventService",t)}(),function(){"use strict";function t(t,e){function o(){t.restore()}var i=this;i.Event=e,i.recover=o}angular.module("otusjs.otus.dashboard.core").service("otusjs.otus.dashboard.core.ModuleService",t),t.$inject=["otusjs.otus.dashboard.core.ContextService","otusjs.otus.dashboard.core.EventService"]}(),function(){"use strict";angular.module("otusjs.otus.dashboard.core",[])}(),function(){"use strict";function t(t,e){function o(){return t.getSelectedParticipant()}function i(){return t.getLoggedUser()}var n=this;n.getSelectedParticipant=o,n.getLoggedUser=i}angular.module("otusjs.otus.dashboard.service").service("otusjs.otus.dashboard.service.DashboardService",t),t.$inject=["otusjs.otus.dashboard.core.ContextService","otusjs.otus.dashboard.core.EventService"]}(),function(){"use strict";angular.module("otusjs.otus.dashboard.service",[])}(),function(){"use strict";angular.module("otusjs.laboratory.business",[])}(),function(){"use strict";function t(){function t(){return new e}var o=this;return o.create=t,o}function e(){function t(t){var e=new Date(t);return e.getDate()+"/"+(e.getMonth()+1)+"/"+e.getFullYear()}function e(e,o){var i={};return i.recruitment_number=e.recruitmentNumber,i.participant_name=e.name,i.gender=e.sex,i.birthday=t(new Date(e.birthdate.value)),i.cq_group=o.cqGroup||"Nenhum",i.tubes=o.tubes,JSON.stringify(i)}var o=this;o.toJson=e}angular.module("otusjs.laboratory.business").factory("otusjs.laboratory.business.ParticipantLaboratoryFactory",t),t.$inject=[]}(),function(){"use strict";function t(t,e,o,i){function n(){return a().then(function(t){return l.participant=t,e.createLaboratory(t).then(function(t){return l.laboratory=t,t})})}function r(){return a().then(function(t){return l.participant=t,e.createLaboratoryEmpty(t).then(function(t){return l.laboratory=t,t})})}function a(){return o.getSelectedParticipant()}function c(){var o=t.defer();return a().then(function(t){e.getLaboratory(t).then(function(e){l.participant=t,l.laboratory=e,e?o.resolve(!0):o.resolve(!1)})}),o.promise}function s(){return a().then(function(t){e.getLaboratory(t).then(function(t){l.laboratory=t})})}function u(){return i.create().toJson(l.participant,l.laboratory)}var l=this;l.participant={},l.tubes={},l.createLaboratory=n,l.createLaboratoryEmpty=r,l.getSelectedParticipant=a,l.hasLaboratory=c,l.getLaboratory=s,l.toJson=u}angular.module("otusjs.laboratory.business").service("otusjs.laboratory.business.ParticipantLaboratoryService",t),t.$inject=["$q","otusjs.laboratory.repository.ParticipantLaboratoryRepositoryService","otusjs.laboratory.core.ContextService","otusjs.laboratory.business.ParticipantLaboratoryFactory"]}(),function(){"use strict";function t(t,e){function o(){m.clear(),c()}function i(){p()}function n(){j.removeItem(h)}function r(){if(d(),!a())throw new Error("There is no a laboratory context.","laboratory/context-service.js",57)}function a(){return!!j.getItem(h)}function c(){d(),j.setItem(h,m.toJson())}function s(t){return d(),m.getData(t)}function u(t,e){d(),m.setData(t,e),c()}function l(t){d(),m.removeData(t),c()}function f(t){m=t.create(h)}function v(t){j=t}function p(){r(),m.fromJson(j.getItem(h))}function d(){if(!m)throw new Error("Internal context is not initialized.","context-service.js",111);if(!j)throw new Error("Internal storage is not initialized.","context-service.js",114)}function g(){return A.promise}function y(e){A=t.defer(),e&&A.resolve(e)}var S=this,m=null,j=null,h="laboratory_context",A=t.defer();S.begin=o,S.restore=i,S.end=n,S.isValid=r,S.hasContextActive=a,S.save=c,S.configureContext=f,S.configureStorage=v,S.getData=s,S.setData=u,S.removeData=l,S.getSelectedParticipant=g,S.setSelectedParticipant=y}angular.module("otusjs.laboratory.core").service("otusjs.laboratory.core.ContextService",t),t.$inject=["$q","otusjs.laboratory.core.EventService"]}(),function(){"use strict";function t(){function t(t){o(n,t,n.length)}function e(t){n.push(t)}function o(t,e,o){for(var i=0;i<o;i++)t[i](e)}var i=this,n=[];i.fireParticipantSelected=t,i.onParticipantSelected=e}angular.module("otusjs.laboratory.core").service("otusjs.laboratory.core.EventService",t)}(),function(){"use strict";function t(t,e,o){function i(t){e.configureContext(t)}function n(t){e.configureStorage(t)}function r(){return c.RemoteStorage.ParticipantLaboratory&&(s=t.defer(),s.resolve(c.RemoteStorage.ParticipantLaboratory)),{whenReady:function(){return s.promise}}}function a(t){c.RemoteStorage.ParticipantLaboratory=t,s.resolve(c.RemoteStorage.ParticipantLaboratory)}var c=this,s=t.defer();t.defer();c.RemoteStorage={},c.DataSource={},c.Event=o,c.configureContext=i,c.configureStorage=n,c.getParticipantLaboratoryRemoteStorage=r,c.setParticipantLaboratoryRemoteStorage=a}angular.module("otusjs.laboratory.core").service("otusjs.laboratory.core.ModuleService",t),t.$inject=["$q","otusjs.laboratory.core.ContextService","otusjs.laboratory.core.EventService"]}(),function(){"use strict";function t(){}angular.module("otusjs.laboratory.core",[]).run(t),t.$inject=[]}(),function(){"use strict";angular.module("otusjs.laboratory.repository",[])}(),function(){"use strict";angular.module("otusjs.laboratory.storage",[])}(),function(){"use strict";function t(t){function e(t,e){a=t,c=e}function o(t){var e=a.insert(t);return c.saveDatabase(),e}function i(t){a.update(t),c.saveDatabase()}function n(){a.clear(),r.options.unique.forEach(function(t){a.constraints.unique[t].keyMap={},a.constraints.unique[t].lokiMap={}}),c.saveDatabase()}var r=this,a={},c=null;t.defer();r.collectionName="laboratory_participant",r.options={unique:["_id"]},r.initialize=e,r.insert=o,r.update=i,r.clear=n}angular.module("otusjs.laboratory.storage").service("otusjs.laboratory.storage.ParticipantLaboratoryLocalStorageService",t),t.$inject=["$q"]}(),function(){"use strict";angular.module("otusjs.participant.business",[])}(),function(){"use strict";function t(){return function(t,e){return t.filter(function(t){var o=new RegExp(e,"gi");return o.test(t.name)||o.test(t.recruitmentNumber.toString())})}}angular.module("otusjs.participant.business").filter("participantQuick",t)}(),function(){"use strict";function t(t,e,o,i){function n(e){var o=i.listIdexers();l=e?t("participantQuick")(o,e):[]}function r(){return i.listIdexers()}function a(){return l}function c(){return l.length>0}function s(t){l=[],e.selectParticipant(t),o.fireParticipantSelected(t)}var u=this,l=[];u.filter=n,u.getAll=r,u.getFilteredData=a,u.hasResultFilter=c,u.selectParticipant=s}angular.module("otusjs.participant.business").service("otusjs.participant.business.ParticipantSearchService",t),t.$inject=["$filter","otusjs.participant.core.ContextService","otusjs.participant.core.EventService","otusjs.participant.repository.ParticipantRepositoryService"]}(),function(){"use strict";function t(t){function e(){a()}function o(){v(),t.fireParticipantSelected(c("selectedParticipant"))}function i(){m.removeItem(j)}function n(){if(p(),!r())throw new Error("There is no active participant context.","participant/context-service.js",56)}function r(){return!!m.getItem(j)}function a(){p(),m.setItem(j,S.toJson())}function c(t){return p(),S.getData(t)}function s(t,e){p(),S.setData(t,e),a()}function u(t){p(),S.removeData(t),a()}function l(t){S=t.create(j)}function f(t){m=t}function v(){n(),S.fromJson(m.getItem(j))}function p(){if(!S)throw new Error("Internal context is not initialized.");if(!m)throw new Error("Internal storage is not initialized.")}function d(t){s("selectedParticipant",t)}function g(){return S.getData("selectedParticipant")}var y=this,S=null,m=null,j="participant_context";y.begin=e,y.restore=o,y.end=i,y.isValid=n,y.hasContextActive=r,y.save=a,y.getData=c,y.setData=s,y.removeData=u,y.configureContext=l,y.configureStorage=f,y.selectParticipant=d,y.getSelectedParticipant=g}angular.module("otusjs.participant.core").service("otusjs.participant.core.ContextService",t),t.$inject=["otusjs.participant.core.EventService"]}(),function(){"use strict";function t(){function t(t){n(a,t,a.length)}function e(t){a.push(t)}function o(t){n(c,t,c.length)}function i(t){c.push(t)}function n(t,e,o){for(var i=0;i<o;i++)t[i](e)}var r=this,a=[],c=[];r.fireParticipantSelected=t,r.onParticipantSelected=e,r.fireLogout=o,r.onLogout=i}angular.module("otusjs.participant.core").service("otusjs.participant.core.EventService",t)}(),function(){"use strict";function t(t,e){function o(e){t.configureContext(e)}function i(e){t.configureStorage(e)}function n(t){r.DataSource.Participant=t}var r=this;r.DataSource={},r.Event=e,r.configureContext=o,r.configureStorage=i,r.configureParticipantDataSourceService=n}angular.module("otusjs.participant.core").service("otusjs.participant.core.ModuleService",t),t.$inject=["otusjs.participant.core.ContextService","otusjs.participant.core.EventService"]}(),function(){"use strict";function t(t){t.execute()}angular.module("otusjs.participant.core",[]).run(t),t.$inject=["otusjs.participant.core.ServiceLoader"]}(),function(){"use strict";function t(t){function e(){t.Service={},t.DataSource={}}var o=this;o.execute=e}angular.module("otusjs.participant.core").service("otusjs.participant.core.ServiceLoader",t),t.$inject=["otusjs.participant.core.ModuleService"]}(),function(){"use strict";angular.module("otusjs.participant.model",[])}(),function(){"use strict";function t(){function t(t){return new e(t)}function o(t){return new e(t)}var i=this;return i.OBJECT_TYPE="Participant",i.create=t,i.fromJsonObject=o,i}function e(t){t.id,t.name,t.surname,t.fieldCenter}angular.module("otusjs.participant.model").factory("otusjs.participant.model.Participant",t),t.$inject=[]}(),function(){"use strict";angular.module("otusjs.participant.repository",[])}(),function(){"use strict";function t(t){function e(){return i.listIndexers()}var o=this,i=t.DataSource.Participant;o.listIdexers=e}angular.module("otusjs.participant.repository").service("otusjs.participant.repository.ParticipantRepositoryService",t),t.$inject=["otusjs.participant.core.ModuleService"]}(),function(){"use strict";angular.module("otusjs.participant.storage",[])}(),function(){"use strict";function t(){function t(t,e){n=t,r=e}function e(){return n}function o(){r.saveDatabase()}var i=this,n={},r=null;i.collectionName="participants",i.initialize=t,i.getCollection=e,i.save=o}angular.module("otusjs.participant.storage").service("otusjs.participant.storage.ParticipantStorageService",t)}(),function(){"use strict";angular.module("otusjs.user.business",[])}(),function(){"use strict";function t(t){function e(e){return t.Proxy.LoginProxy.authenticate(e)}var o=this;o.authenticateUserData=e}angular.module("otusjs.user.business").service("otusjs.user.business.UserAuthenticationService",t),t.$inject=["otusjs.user.core.ModuleService"]}(),function(){"use strict";function t(t,e,o,i){function n(e){var o=i.listIdexers();l=e?t("userQuick")(o,e):[]}function r(){return i.listIdexers()}function a(){return l}function c(){return l.length>0}function s(t){l=[],e.selectUser(t),o.fireUserSelected(t)}var u=this,l=[];u.filter=n,u.getAll=r,u.getFilteredData=a,u.hasResultFilter=c,u.selectUser=s}angular.module("otusjs.user.business").service("otusjs.user.business.UserSearchService",t),t.$inject=["$filter","otusjs.user.core.ContextService","otusjs.user.core.EventService","otusjs.user.business.UserRepositoryService"]}(),function(){"use strict";function t(t){function e(){a()}function o(){v(),t.fireUserSelected(S.getData(h))}function i(){m.removeItem(j)}function n(){if(p(),!r())throw new Error("There is no active user context.","user/context-service.js",61)}function r(){return!!m.getItem(j)}function a(){p(),m.setItem(j,S.toJson())}function c(t){return p(),S.getData(t)}function s(t,e){p(),S.setData(t,e),a()}function u(t){p(),S.removeData(t),a()}function l(t){S=t.create(j)}function f(t){m=t}function v(){n(),S.fromJson(m.getItem(j))}function p(){if(!S)throw new Error("Internal context is not initialized.");if(!m)throw new Error("Internal storage is not initialized.")}function d(t){s("selectedUser",t)}function g(){return S.getData("selectedUser")}var y=this,S=null,m=null,j="user_context",h="selectedUser";y.begin=e,y.restore=o,y.end=i,y.isValid=n,y.hasContextActive=r,y.save=a,y.getData=c,y.setData=s,y.removeData=u,y.configureContext=l,y.configureStorage=f,y.selectUser=d,y.getSelectedUser=g}angular.module("otusjs.user.core").service("otusjs.user.core.ContextService",t),t.$inject=["otusjs.user.core.EventService"]}(),function(){"use strict";function t(){function t(t,e,o){for(var i=0;i<o;i++)t[i](e)}function e(e){t(v,e,v.length)}function o(t){v.push(t)}function i(e){t(f,e,f.length)}function n(t){f.push(t)}function r(e){t(p,e,p.length)}function a(t){p.push(t)}function c(e){t(d,e,d.length)}function s(t){d.push(t)}function u(e){t(f,e,f.length)}var l=this,f=[],v=[],p=[],d=[];l.fireUserIndexersLoaded=e,l.onUserIndexersLoaded=o,l.fireUsersResquet=i,l.onUserAuthentication=n,l.fireUserDataSourceProvided=r,l.onUserDataSourceProvided=a,l.fireLoginProxyProvided=c,l.onLoginProxyProvided=s,l.fireUserAuthentication=u,l.onUserAuthentication=n}angular.module("otusjs.user.core").service("otusjs.user.core.EventService",t)}(),function(){"use strict";function t(t,e){function o(e){t.configureContext(e)}function i(e){t.configureStorage(e)}function n(t){a.DataSource.User=t}function r(t){a.Proxy.LoginProxy=t,a.Proxy.LoginProxy.initialize()}var a=this;a.DataSource={},a.Proxy={},a.Service={},a.configureContext=o,a.configureStorage=i,a.configureUserDataSource=n,a.configureLoginProxy=r}angular.module("otusjs.user.core").service("otusjs.user.core.ModuleService",t),t.$inject=["otusjs.user.core.ContextService","otusjs.user.core.EventService"]}(),function(){"use strict";function t(t){t.execute()}angular.module("otusjs.user.core",[]).run(t),t.$inject=["otusjs.user.core.ServiceLoader"]}(),function(){"use strict";function t(t,e){function o(){t.Service={},t.Service.UserAuthenticationService={},t.Service.UserAuthenticationService.authenticateUserData=e.authenticateUserData}var i=this;i.execute=o}angular.module("otusjs.user.core").service("otusjs.user.core.ServiceLoader",t),t.$inject=["otusjs.user.core.ModuleService","otusjs.user.business.UserAuthenticationService"]}(),function(){"use strict";angular.module("otusjs.user.model",[])}(),function(){"use strict";function t(){function t(t){return new e(t)}function o(t){return new e(t)}var i=this;return i.OBJECT_TYPE="User",i.create=t,i.fromJsonObject=o,i}function e(t){t.id,t.uuid,t.name,t.surname,t.email,t.phone,t.token}angular.module("otusjs.user.model").factory("otusjs.user.model.User",t),t.$inject=[]}(),function(){"use strict";angular.module("otusjs.user.repository",[])}(),function(){"use strict";function t(t,e){function o(){return console.log(t.DataSource.User),[]}var i=this;i.listIdexers=o}angular.module("otusjs.user.business").service("otusjs.user.business.UserRepositoryService",t),t.$inject=["otusjs.user.core.ModuleService","otusjs.user.core.EventService"]}(),function(){"use strict";angular.module("otusjs.user.storage",[])}(),function(){"use strict";function t(){function t(t,e){n=t,r=e}function e(){return n}function o(){r.saveDatabase()}var i=this,n={},r=null;i.collectionName="users",i.initialize=t,i.getCollection=e,i.save=o}angular.module("otusjs.user.storage").service("otusjs.user.storage.UserStorageService",t)}(),function(){"use strict";function t(){function t(){s=!1}function e(){s=!0}function o(){s=!0}function i(){a()}function n(t){}function r(t){}function a(){if(s)throw new Error("Already exists an initialized session.","access-context-service.js",34)}var c=this,s=!1;c.isValid=i,c.begin=t,c.ignore=e,c.end=o,c.configureContext=n,c.configureStorage=r}angular.module("otusjs.user.access.core").service("otusjs.user.access.core.ContextService",t)}(),function(){"use strict";function t(){function t(t){n(a,t,a.length)}function e(t){a.push(t)}function o(t){n(c,t,c.length)}function i(t){c.push(t)}function n(t,e,o){for(var i=0;i<o;i++)t[i](e)}var r=this,a=[],c=[];r.fireLogin=t,r.onLogin=e,r.fireLogout=o,r.onLogout=i}angular.module("otusjs.user.access.core").service("otusjs.user.access.core.EventService",t)}(),function(){"use strict";function t(t,e){function o(e){t.configureContext(e)}function i(e){t.configureStorage(e)}function n(){t.ignore()}function r(t){e.onLogin(t)}function a(t){e.onLogout(t)}var c=this;c.configureContext=o,c.configureStorage=i,c.ignore=n,c.onLogin=r,c.onLogout=a}angular.module("otusjs.user.access.core").service("otusjs.user.access.core.ModuleService",t),t.$inject=["otusjs.user.access.core.ContextService","otusjs.user.access.core.EventService"]}(),function(){"use strict";function t(t){t.Service={},t.DataSource={}}angular.module("otusjs.user.access.core",[]).run(t),t.$inject=["otusjs.user.access.core.ModuleService"]}(),function(){"use strict";function t(t,e){function o(o){return e.Service.Authentication.authenticateUserData(o).then(function(e){e.hasErrors||t.fireLogin(e.data)})}var i=this;i.authenticate=o}angular.module("otusjs.user.access.service").service("otusjs.user.access.service.LoginService",t),t.$inject=["otusjs.user.access.core.EventService","otusjs.user.access.core.ModuleService"]}(),function(){"use strict";function t(t){function o(){i()}function i(){t.show({controller:e,templateUrl:"app/ux-component/user-logout/logout-dialog.html",clickOutsideToClose:!0})}var n=this;n.logout=o}function e(t,e,o,i){t.hide=function(){e.hide()},t.cancel=function(){e.cancel()},t.answer=function(){i.logout().then(function(){e.hide(),o.activateLogin()})}}function o(t,e){function o(){return t.invalidate().then(function(){e.fireLogout()})}var i=this;i.logout=o}angular.module("otusjs.user.access.service").service("otusjs.user.access.service.LogoutService",t),t.$inject=["$mdDialog"],e.$inject=["$scope","$mdDialog","otusjs.application.state.ApplicationStateService","otusjs.user.access.service.LogoutServiceService"],angular.module("otusjs.user.access.service").service("otusjs.user.access.service.LogoutServiceService",o),o.$inject=["otusjs.deploy.AuthenticationRestService","otusjs.user.access.core.EventService"]}(),function(){"use strict";angular.module("otusjs.user.access.service",[])}(),function(){"use strict";function t(t,e){function o(o){var i=e.getUserResource(),n=t.defer();return i.create(o,function(t){t.hasErrors?n.reject(t):n.resolve(t)}),n.promise}var i=this;i.executeSignup=o}angular.module("otusjs.user.access.service").service("otusjs.user.access.service.SignupService",t),t.$inject=["$q","OtusRestResourceService"]}(),function(){"use strict";function t(t){function e(){t.activateLogin()}var o=this;o.tryAgain=e}angular.module("otusjs.application.http").controller("otusjs.application.http.ResponseErrorOfflineController",t),t.$inject=["otusjs.application.state.ApplicationStateService"]}(),function(){"use strict";function t(t,e){function o(){s=e.getActivityResource()}function i(t){if(!s)throw new Error("REST resource is not initialized.");return s.update({id:t._id,rn:t.participantData.recruitmentNumber},t).$promise}function n(t){if(!s)throw new Error("REST resource is not initialized.");return s.create({rn:t.participantData.recruitmentNumber},t).$promise}function r(e){if(!s)throw new Error("REST resource is not initialized.");var o=t.defer();return s.listAll({rn:e}).$promise.then(function(t){t.data&&t.data.length?o.resolve(t.data):o.resolve([])}),o.promise}function a(t){if(!s)throw new Error("REST resource is not initialized.");return s.remove(t).$promise}var c=this,s=null;c.initialize=o,c.update=i,c.list=r,c.save=n,c.remove=a}angular.module("otusjs.deploy").service("otusjs.deploy.ActivityRestService",t),t.$inject=["$q","OtusRestResourceService"]}(),function(){"use strict";function t(t){function e(){n=t.getProjectConfigurationResource()}function o(){if(!n)throw new Error("REST resource is not initialized.");return n.getSurveys().$promise}var i=this,n=null;i.initialize=e,i.getSurveys=o}angular.module("otusjs.deploy").service("otusjs.deploy.ProjectConfigurationRestService",t),t.$inject=["OtusRestResourceService"]}(),function(){"use strict";function t(t){function e(){a=t.getOtusInstallerResource()}function o(t){if(!a)throw new Error("REST resource is not initialized.");a.ready(t)}function i(t){if(!a)throw new Error("REST resource is not initialized.");a.config(t)}function n(t){if(!a)throw new Error("REST resource is not initialized.");return a.validateEmail(t).$promise}var r=this,a=null;r.initialize=e,r.ready=o,r.config=i,r.validateEmail=n}angular.module("otusjs.deploy").service("otusjs.deploy.InstallerRestService",t),t.$inject=["OtusRestResourceService"]}(),function(){"use strict";function t(t){function e(){c=t.getLaboratoryParticipantResource()}function o(){c.create()}function i(t){if(!c)throw new Error("REST resource is no initialized.");return c.create({rn:t}).$promise}function n(t){if(!c)throw new Error("REST resource is no initialized.");return c.createEmpty({rn:t}).$promise}function r(t){if(!c)throw new Error("REST resource is no initialized.");return c.getLaboratory({rn:t}).$promise}var a=this,c=null;a.initialize=e,a.create=o,a.createLaboratory=i,a.createLaboratoryEmpty=n,a.getLaboratory=r}angular.module("otusjs.deploy").service("otusjs.deploy.ParticipantLaboratoryRestService",t),t.$inject=["OtusRestResourceService"]}(),function(){"use strict";function t(t){function e(){n=t.getParticipantResource()}function o(){if(!n)throw new Error("REST resource is not initialized.");return n.list().$promise}var i=this,n=null;i.initialize=e,i.listIdexers=o}angular.module("otusjs.deploy").service("otusjs.deploy.ParticipantRestService",t),t.$inject=["OtusRestResourceService"]}(),function(){"use strict";function t(t){function e(){i=t.getSurveyResource()}var o=this,i=null;o.initialize=e}angular.module("otusjs.deploy").service("otusjs.deploy.SurveyRestService",t),t.$inject=["OtusRestResourceService"]}(),function(){"use strict";function t(t){function e(){a=t.getOtusAuthenticatorResource()}function o(t){if(!a)throw new Error("REST resource is not initialized.");return a.authenticate(t).$promise}function i(t){if(!a)throw new Error("REST resource is not initialized.");return a.authenticate(t).$promise}function n(){if(!a)throw new Error("REST resource is not initialized.");return a.invalidate().$promise}var r=this,a=null;r.initialize=e,r.authenticate=o,r.authenticateProject=i,r.invalidate=n}angular.module("otusjs.deploy").service("otusjs.deploy.AuthenticationRestService",t),t.$inject=["OtusRestResourceService"]}(),function(){"use strict";function t(t){function e(){u=t.getUserResource()}function o(t){if(!u)throw new Error("REST resource is not initialized.");return u.create(t).$promise}function i(t){if(!u)throw new Error("REST resource is not initialized.");return u.logged(t).$promise}function n(){if(!u)throw new Error("REST resource is not initialized.");return u.list().$promise}function r(){if(!u)throw new Error("REST resource is not initialized.");return u.list().$promise}function a(t){if(!u)throw new Error("REST resource is not initialized.");return u.enable(t).$promise}function c(t){if(!u)throw new Error("REST resource is not initialized.");return u.disable(t).$promise}var s=this,u=null;s.initialize=e,s.create=o,s.logged=i,s.list=n,s.listIdexers=r,s.enable=a,s.disable=c,s.listIdexers=r}angular.module("otusjs.deploy").service("otusjs.deploy.UserRestService",t),t.$inject=["OtusRestResourceService"]}(),function(){"use strict";function t(t,e,o){function i(t){l=t}function n(){l=null}function r(e){var i=t.defer();return u.whenReady().then(function(t){return t.insert(e).then(function(t){var e=o.insert(t);i.resolve(e)})}),i.promise}function a(e){var i=t.defer();return u.whenReady().then(function(t){t.update(e).then(function(t){o.update(t),i.resolve()})}),i.promise}function c(){var e=t.defer();return u.whenReady().then(function(t){return t.find({recruitmentNumber:l.recruitmentNumber}).then(function(t){o.clear();var i=o.insert(t);e.resolve(i)})}),e.promise}var s=this,u=e.getActivityRemoteStorage(),l=null;s.useParticipant=i,s.resetParticipantInUse=n,
s.insert=r,s.listAll=c,s.update=a}angular.module("otusjs.activity.repository").service("otusjs.activity.repository.ActivityCollectionService",t),t.$inject=["$q","otusjs.activity.core.ModuleService","otusjs.activity.storage.ActivityLocalStorageService"]}(),function(){"use strict";function t(t,e,o,i,n){function r(t){if(!t)throw new Error("No participant selected to list activities.","activity-repository-service.js",63);return i.useParticipant(t),h?h.then(function(){return v()}):v()}function a(){return n.listAll().then(y)}function c(t,e,o){return f(t,e,o)}function s(t,e,o,i){return f(t,e,o,i)}function u(t){return p([m(t)])}function l(t){return p(t.map(m))}function f(t,o,n,r){var a=g();e.whenActivityFacadeServiceReady().then(function(e){var c=d(t,o,n,r,e);return i.insert(c).then(a.finish)})}function v(){return i.listAll().then(y)}function p(t){if(t&&t.length){var e=g();return i.update(t).then(e.finish)}throw new Error("No activity to update.","activity-repository-service.js",50)}function d(t,e,o,i,n){return t.map(function(t){var r=n.createActivity(t,e,o,i);return JSON.parse(r.toJson())})}function g(){var e=t.defer();return h=e.promise,{finish:function(){e.resolve()}}}function y(t){return Array.isArray(t)?t.map(function(t){return S(t)}):[S(t)]}function S(t){var o=e.Model[t.objectType].fromJsonObject(t);return o.$loki=t.$loki,o.meta=t.meta,o}function m(t){var e=JSON.parse(t.toJson());return e.$loki=t.$loki,e.meta=t.meta,e}var j=this,h=null;j.createFromSurvey=c,j.createFromPaperActivity=s,j.listAll=r,j.listAvailables=a,j.save=u,j.discard=l}angular.module("otusjs.activity.repository").service("otusjs.activity.repository.ActivityRepositoryService",t),t.$inject=["$q","otusjs.activity.core.ModuleService","otusjs.activity.core.ContextService","otusjs.activity.repository.ActivityCollectionService","otusjs.activity.repository.SurveyCollectionService"]}(),function(){"use strict";function t(t){function e(){return o(function(t){return t.getData().find()})}function o(e){return t.whenSurveyDataSourceServiceReady().then(e)}var i=this;i.listAll=e}angular.module("otusjs.activity.repository").service("otusjs.activity.repository.SurveyCollectionService",t),t.$inject=["otusjs.activity.core.ModuleService"]}(),function(){"use strict";function t(t,e,o,i){function n(){return e.DataSource.User.listIndexers()}var r=this;r.listAll=n}angular.module("otusjs.activity.repository").service("otusjs.activity.repository.UserRepositoryService",t),t.$inject=["$q","otusjs.activity.core.ModuleService","otusjs.activity.core.ContextService","otusjs.activity.core.EventService"]}(),function(){"use strict";function t(t,e,o){function i(t){p=t}function n(){p=null}function r(e){var i=t.defer();return v.whenReady().then(function(t){return t.insert(e).then(function(t){var e=o.insert(t);i.resolve(e)})}),i.promise}function a(e){var i=t.defer();return v.whenReady().then(function(t){t.update(e).then(function(t){o.update(t),i.resolve()})}),i.promise}function c(){var e=t.defer();return v.whenReady().then(function(t){return t.find({recruitmentNumber:p.recruitmentNumber}).then(function(t){o.clear();var i=o.insert(t);e.resolve(i)})}),e.promise}function s(){var e=t.defer();return v.whenReady().then(function(t){return t.createLaboratory(p.recruitmentNumber).then(function(t){o.clear();var i=o.insert(t);e.resolve(i)})}),e.promise}function u(){var e=t.defer();return v.whenReady().then(function(t){return t.createLaboratoryEmpty(p.recruitmentNumber).then(function(t){o.clear();var i=o.insert(t);e.resolve(i)})}),e.promise}function l(){var e=t.defer();return v.whenReady().then(function(t){return t.getLaboratory(p.recruitmentNumber).then(function(t){e.resolve(t)})}),e.promise}var f=this,v=e.getParticipantLaboratoryRemoteStorage(),p=null;f.useParticipant=i,f.resetParticipantInUse=n,f.insert=r,f.listAll=c,f.createLaboratory=s,f.createLaboratoryEmpty=u,f.update=a,f.getLaboratory=l}angular.module("otusjs.laboratory.repository").service("otusjs.laboratory.repository.ParticipantLaboratoryCollectionService",t),t.$inject=["$q","otusjs.laboratory.core.ModuleService","otusjs.laboratory.storage.ParticipantLaboratoryLocalStorageService"]}(),function(){"use strict";function t(t,e){function o(t){return e.useParticipant(t),e.createLaboratory().then(function(t){return t})}function i(t){return e.useParticipant(t),e.createLaboratoryEmpty().then(function(t){return t})}function n(t){return e.useParticipant(t),e.getLaboratory()}var r=this;r.createLaboratory=o,r.createLaboratoryEmpty=i,r.getLaboratory=n}angular.module("otusjs.laboratory.repository").service("otusjs.laboratory.repository.ParticipantLaboratoryRepositoryService",t),t.$inject=["otusjs.laboratory.core.ModuleService","otusjs.laboratory.repository.ParticipantLaboratoryCollectionService"]}();