!function(){"use strict";angular.module("otusjs.otus",["otusjs.activity","otusjs.participant","otusjs.user","otusjs.user.access","otusjs.otus.installer","otusjs.otus.dashboard","otusjs.otus.uxComponent","otusjs.application","otusjs.deploy"])}(),function(){"use strict";angular.module("otusjs.application",["otusjs.application.dependency","otusjs.application.environment","otusjs.application.storage","otusjs.application.session","otusjs.application.context","otusjs.application.core","otusjs.application.state","otusjs.application.http","otusjs.application.locale","otusjs.application.theme"]).run(function(){console.info("Application module ready.")})}(),function(){"use strict";function t(t,n,r,c){e(r),i(n).then(function(){c.run(),o(t)})}function e(t){t.initializeResources()}function i(t){var e="otus";return t.initializeSessionStorage(),t.dbExists(e)?t.loadLocalStorage(e):t.createLocalStorage(e)}function o(t){var e=angular.module("otusjs.deploy"),i=t.get("otusjs.application.core.ModuleService");i.notifyModuleLoad(e.name),i.finalizeDeploy(),console.info("Deploy module ready.")}angular.module("otusjs.deploy",["otus.client","otus.domain.client","otusjs","otusjs.player.core","otusjs.player.component"]).value("OtusLocalStorage",["otusjs.activity.storage.ActivityStorageService","otusjs.activity.storage.SurveyStorageService","otusjs.participant.storage.ParticipantStorageService","otusjs.user.storage.UserStorageService"]).run(t),t.$inject=["$injector","otusjs.deploy.StorageLoaderService","otusjs.deploy.OtusApiService","otusjs.deploy.BootstrapService"]}(),angular.module("passwordControl",[]).directive("stPassword",function(){return{require:"ngModel",restrict:"A",link:function(t,e,i,o){var n=/(?=.*\d)(?=.*[a-z])(?=.*[A-Z])/;t.$watch(function(){return o.$modelValue},function(t){n.test(t)&&t.length>=6&&t.length<=32?o.$setValidity("passwordPattern",!0):o.$setValidity("passwordPattern",!1)})}}}).directive("stPasswordMatch",function(){return{require:"ngModel",restrict:"A",scope:{stPasswordMatch:"="},link:function(t,e,i,o){function n(t,e){t!==e?o.$setValidity("passwordMatch",!1):o.$setValidity("passwordMatch",!0)}t.$watch(function(){return t.stPasswordMatch},function(t){n(t,o.$modelValue)}),t.$watch(function(){return o.$modelValue},function(e){n(t.stPasswordMatch,e)})}}}),function(){"use strict";angular.module("otusjs.otus.uxComponent",[])}(),function(){"use strict";function t(){function t(t){return new e(t)}var i=this;return i.create=t,i}function e(t){function e(){return l}function i(t){return v[t]}function o(t,e){v[t]=e}function n(t){delete v[t]}function r(){v={}}function c(){return JSON.stringify(v)}function s(t){v=JSON.parse(t)||{}}function a(){return _context}var u=this,l=t,v={};u.getName=e,u.getData=i,u.setData=o,u.removeData=n,u.clear=r,u.toJson=c,u.fromJson=s,u.toObject=a}angular.module("otusjs.application.context").factory("otusjs.application.context.ContextFactory",t)}(),function(){"use strict";angular.module("otusjs.application.context",[]).run(function(t){var e=angular.module("otusjs.application.context"),i=t.get("otusjs.application.core.ModuleService");i.notifyModuleLoad(e.name),console.info("Context module ready.")})}(),function(){"use strict";function t(t){function e(){r()}function i(){f(),v()}function o(){h.removeItem(A)}function n(){f()}function r(){f(),h.setItem(A,j.toJson())}function c(t){return f(),j.getData(t)}function s(t,e){f(),j.setData(t,e),r()}function a(t){f(),j.removeData(t),r()}function u(t){j=t.create(A)}function l(t){h=t}function v(){f(),j.fromJson(h.getItem(A))}function f(){if(!j)throw new Error("Internal context is not initialized.","application-context-service.js",159);if(!h)throw new Error("Internal storage is not initialized.","application-context-service.js",165)}function p(){return P.promise}function d(e){P=t.defer(),e&&P.resolve(e)}function g(){return c("selectedActivities")}function S(){s("selectedActivities",[])}function y(t){s("selectedActivities",t)}var m=this,j=null,h=null,A="application_context",P=null;m.begin=e,m.restore=i,m.end=o,m.isValid=n,m.save=r,m.configureContext=u,m.configureStorage=l,m.getData=c,m.setData=s,m.removeData=a,m.getSelectedParticipant=p,m.setSelectedParticipant=d,m.selectActivities=y,m.getSelectedActivities=g,m.clearSelectedActivities=S}angular.module("otusjs.application.core").service("otusjs.application.core.ContextService",t),t.$inject=["$q"]}(),function(){"use strict";function t(t,e,i){function o(t){l.push(t)}function n(t){e.configureContext(t)}function r(t){e.configureStorage(t)}function c(){return v&&(f.resolve(),f=t.defer()),f.promise}function s(){v=!0,f.resolve()}function a(){e.begin()}var u=this,l=[],v=!1,f=t.defer();u.notifyModuleLoad=o,u.configureContext=n,u.configureStorage=r,u.isDeployed=c,u.finalizeDeploy=s,u.begin=a}angular.module("otusjs.application.core").service("otusjs.application.core.ModuleService",t),t.$inject=["$q","otusjs.application.core.ContextService"]}(),function(){"use strict";angular.module("otusjs.application.core",[]).run(function(t){var e=angular.module("otusjs.application.core"),i=t.get("otusjs.application.core.ModuleService");i.notifyModuleLoad(e.name),console.info("Core module ready.")})}(),function(){"use strict";angular.module("otusjs.application.dependency",["ngMaterial","ngMessages","ngAnimate","ui.router","ui.mask","passwordControl","angular-bind-html-compile"]).run(function(t){var e=angular.module("otusjs.application.dependency"),i=t.get("otusjs.application.core.ModuleService");i.notifyModuleLoad(e.name),console.info("Dependency module ready.")})}(),function(t){"use strict";t.__env=t.__env||{},t.__env.apiUrl="http://otus-api.localhost:8080"}(this),function(){"use strict";function t(t,e,i){var o=t.__env;e.setUrl(o.apiUrl)}angular.module("otusjs.application.environment").run(t),t.$inject=["$window","OtusRestResourceService"]}(),function(){"use strict";angular.module("otusjs.application.environment",[]).run(function(t){var e=angular.module("otusjs.application.environment"),i=t.get("otusjs.application.core.ModuleService");i.notifyModuleLoad(e.name),console.info("Environment module ready.")})}(),function(){"use strict";angular.module("otusjs.application.http",[]).run(function(t){var e=angular.module("otusjs.application.http"),i=t.get("otusjs.application.core.ModuleService");i.notifyModuleLoad(e.name),console.info("Http module ready.")})}(),function(){"use strict";function t(t){t.formatDate=function(t){return moment(t).format("DD/MM/YYYY")},t.parseDate=function(t){var e=moment(t,"DD/MM/YYYY",!0);return e.isValid()?e.toDate():new Date(NaN)}}angular.module("otusjs.application.locale").config(t),t.$inject=["$mdDateLocaleProvider"]}(),function(){"use strict";angular.module("otusjs.application.locale",[]).run(function(){console.info("Locale module ready.")})}(),function(){"use strict";function t(t,e,i){e.onLogin(i.begin),e.onLogout(i.end);var o=angular.module("otusjs.application.session"),n=t.get("otusjs.application.core.ModuleService");n.notifyModuleLoad(o.name),console.info("Session module ready.")}angular.module("otusjs.application.session",["otusjs.application.session.core"]).run(t),t.$inject=["$injector","otusjs.application.session.core.EventService","otusjs.application.session.core.ContextService"]}(),function(){"use strict";function t(t,e,i){t.$on("$stateChangeStart",function(t,o,n){o.data&&o.data.redirect&&e.invoke(o.data.redirect).then(function(e){t.preventDefault(),e&&i.go(e)})}),t.$on("$stateChangeError",function(t,e,o,n,r,c){t.preventDefault(),console.error(c.message),c.redirectTo?i.go(c.redirectTo):i.go("error",{status:c.status})});var o=angular.module("otusjs.application.state"),n=e.get("otusjs.application.core.ModuleService");n.notifyModuleLoad(o.name),console.info("State module ready.")}angular.module("otusjs.application.state",[]).run(t),t.$inject=["$rootScope","$injector","$state"]}(),function(){"use strict";angular.module("otusjs.application.storage",["lokijs"]).run(function(t){var e=angular.module("otusjs.application.storage"),i=t.get("otusjs.application.core.ModuleService");i.notifyModuleLoad(e.name),console.info("Storage module ready.")})}(),function(){"use strict";angular.module("otusjs.application.theme",[]).run(function(t){var e=angular.module("otusjs.application.theme"),i=t.get("otusjs.application.core.ModuleService");i.notifyModuleLoad(e.name),console.info("Theme module ready.")})}(),function(){"use strict";function t(t,e){t.theme("default").primaryPalette("teal",{"default":"700","hue-1":"500","hue-2":"600","hue-3":"800"}).accentPalette("light-blue",{"default":"A700","hue-2":"A100","hue-3":"A400"}).warnPalette("red",{"default":"A200","hue-2":"A100","hue-3":"A400"}).backgroundPalette("grey"),e.defaultIconSet("app/static-resource/image/icons/mdi.svg",24)}angular.module("otusjs.application.theme").config(t),t.$inject=["$mdThemingProvider","$mdIconProvider"]}(),function(){"use strict";function t(t,e,i,o){function n(){var e=t.defer();return r(i),c(o.session),e.resolve(),e.promise}function r(t){e.configureContext(t)}function c(t){e.configureStorage(t)}var s=this;s.bootstrap=n,s.configureContext=r,s.configureStorage=c}angular.module("otusjs.deploy").service("otusjs.deploy.AccessModuleBootstrap",t),t.$inject=["$q","otusjs.user.access.core.ModuleService","otusjs.application.context.ContextFactory","otusjs.application.storage.StorageService"]}(),function(){"use strict";function t(t,e,i,o,n,r,c,s,a){function u(){l(e),v(i.session),p(n),f(o),d(r),g(a),S(c),S(s)}function l(e){t.configureContext(e)}function v(e){t.configureStorage(e)}function f(e){t.configureActivityDataSourceService(e)}function p(e){t.configureUserDataSourceService(e)}function d(e){t.configureActivityFacadeService(e)}function g(e){t.configureActivityPlayerService(e)}function S(e){e.getModels().forEach(t.addModel)}var y=this;y.bootstrap=u,y.configureContext=l,y.configureStorage=v,y.configureActivityDataSourceService=f}angular.module("otusjs.deploy").service("otusjs.deploy.ActivityModuleBootstrap",t),t.$inject=["otusjs.activity.core.ModuleService","otusjs.application.context.ContextFactory","otusjs.application.storage.StorageService","otusjs.deploy.ActivityDataSourceService","otusjs.deploy.UserDataSourceService","otusjs.deploy.model.ActivityFacadeService","otusjs.deploy.model.ActivityModelPoolService","otusjs.deploy.model.SurveyModelPoolService","otusjs.deploy.PlayerService"]}(),function(){"use strict";function t(t,e,i,o){function n(){var e=t.defer();return r(i),c(o.session),e.resolve(),e.promise}function r(t){e.configureContext(t)}function c(t){e.configureStorage(t)}function s(t){e.begin()}var a=this;a.bootstrap=n,a.configureContext=r,a.configureStorage=c,a.beginApplicationContext=s}angular.module("otusjs.deploy").service("otusjs.deploy.ApplicationModuleBootstrap",t),t.$inject=["$q","otusjs.application.core.ModuleService","otusjs.application.context.ContextFactory","otusjs.application.storage.StorageService"]}(),function(){"use strict";function t(t,e,i,o,n,r,c,s,a,u,l,v,f,p){function d(){o.bootstrap(),e.bootstrap(),i.bootstrap(),n.bootstrap(),r.bootstrap(),c.bootstrap(),f.hasContextActive()&&(s.ignore(),l.recover()),s.Service.Authentication=p.Service.UserAuthenticationService,a.DataSource.User=p.DataSource.User,s.onLogin(f.Event.fireLogin),s.onLogin(l.Event.fireLogin),s.onLogin(a.Event.fireLogin),s.onLogin(t.initializeDataSources),s.onLogout(l.Event.fireLogout),s.onLogout(v.Event.fireLogout),s.onLogout(a.Event.fireLogout),s.onLogout(f.Event.fireLogout),f.Event.onLogin(t.initializeDataSources),f.Event.onLogin(l.Event.fireLogin),f.Event.onLogin(a.Event.fireLogin),v.Event.onParticipantSelected(a.Event.fireParticipantSelected),v.Event.onParticipantSelected(l.Event.fireParticipantSelected),o.beginApplicationContext()}var g=this;g.run=d}angular.module("otusjs.deploy").service("otusjs.deploy.BootstrapService",t),t.$inject=["otusjs.deploy.DataSourceLoaderService","otusjs.deploy.AccessModuleBootstrap","otusjs.deploy.ActivityModuleBootstrap","otusjs.deploy.ApplicationModuleBootstrap","otusjs.deploy.ParticipantModuleBootstrap","otusjs.deploy.SessionModuleBootstrap","otusjs.deploy.UserModuleBootstrap","otusjs.user.access.core.ModuleService","otusjs.activity.core.ModuleService","otusjs.application.core.ModuleService","otusjs.otus.dashboard.core.ModuleService","otusjs.participant.core.ModuleService","otusjs.application.session.core.ModuleService","otusjs.user.core.ModuleService"]}(),function(){"use strict";function t(t,e,i,o,n){function r(){var e=t.defer();return c(i),s(o.session),a(n),e.promise}function c(t){e.configureContext(t)}function s(t){e.configureStorage(t)}function a(t){return e.configureParticipantDataSourceService(t)}var u=this;u.bootstrap=r,u.configureContext=c,u.configureStorage=s,u.configureParticipantDataSource=a}angular.module("otusjs.deploy").service("otusjs.deploy.ParticipantModuleBootstrap",t),t.$inject=["$q","otusjs.participant.core.ModuleService","otusjs.application.context.ContextFactory","otusjs.application.storage.StorageService","otusjs.deploy.ParticipantDataSourceService"]}(),function(){"use strict";function t(t,e,i,o){function n(){var e=t.defer();return r(i),c(o.session),e.resolve(),e.promise}function r(t){e.configureContext(t)}function c(t){e.configureStorage(t)}var s=this;s.bootstrap=n,s.configureContext=r,s.configureStorage=c}angular.module("otusjs.deploy").service("otusjs.deploy.SessionModuleBootstrap",t),t.$inject=["$q","otusjs.application.session.core.ModuleService","otusjs.application.context.ContextFactory","otusjs.application.storage.StorageService"]}(),function(){"use strict";function t(t,e,i,o,n,r){function c(){var e=t.defer();return s(i),a(o.session),l(r),u(n),e.promise}function s(t){e.configureContext(t)}function a(t){e.configureStorage(t)}function u(t){return e.configureUserDataSource(t)}function l(t){e.configureLoginProxy(t)}var v=this;v.bootstrap=c,v.configureContext=s,v.configureStorage=a,v.configureUserDataSource=u,v.configureLoginProxy=l}angular.module("otusjs.deploy").service("otusjs.deploy.UserModuleBootstrap",t),t.$inject=["$q","otusjs.user.core.ModuleService","otusjs.application.context.ContextFactory","otusjs.application.storage.StorageService","otusjs.deploy.UserDataSourceService","otusjs.deploy.AuthenticationRestService"]}(),function(){"use strict";function t(t,e,i,o,n,r){function c(){return p=t.defer(),u(),l(),p.promise}function s(){return{getData:function(){return n.getCollection()},save:function(){n.save(),v()}}}function a(){return{getData:function(){return r.getCollection()},save:function(){r.save()}}}function u(){e.initialize(),i.initialize(),o.initialize()}function l(){e.getSurveys().then(function(t){t.data&&t.data.length?(r.getCollection().clear(),r.getCollection().insert(t.data),r.save()):console.log("Não foi possível atualizar o storage local."),d=!0,d&&g&&p.resolve()}),i.list().then(function(t){t.data&&t.data.length?(n.getCollection().clear(),n.getCollection().insert(t.data),n.save(),console.log("Storage local de atividades atualizado com dados do servidor.")):console.log("Não foi possível atualizar o storage local."),g=!0,d&&g&&p.resolve()})}function v(){var t=n.getCollection().find();i.update(t).then(function(t){console.log("Dados de atividade sincronizados.")})["catch"](function(t){console.log("Falha ao sincronizar dados de atividade.")})}var f=this,p=null,d=!1,g=!1;f.up=c,f.getActivityDataSet=s,f.getSurveyDataSet=a}angular.module("otusjs.deploy").service("otusjs.deploy.ActivityDataSourceService",t),t.$inject=["$q","otusjs.deploy.ProjectConfigurationRestService","otusjs.deploy.ActivityRestService","otusjs.deploy.SurveyRestService","otusjs.activity.storage.ActivityStorageService","otusjs.activity.storage.SurveyStorageService"]}(),function(){"use strict";function t(e,i,o,n){function r(){return i.up().then(s),o.up().then(s),n.up().then(s),u.promise}function c(){l===v&&u.resolve()}function s(){++l,c()}var a=this,u=e.defer(),l=0,v=t.$inject.length-1;a.initializeDataSources=r}angular.module("otusjs.deploy").service("otusjs.deploy.DataSourceLoaderService",t),t.$inject=["$q","otusjs.deploy.ActivityDataSourceService","otusjs.deploy.ParticipantDataSourceService","otusjs.deploy.UserDataSourceService"]}(),function(){"use strict";function t(t,e,i){function o(){return a=t.defer(),r(),c(),a.promise}function n(){return i.getCollection().find()}function r(){e.initialize()}function c(){e.listIdexers().then(function(t){i.getCollection().clear(),i.getCollection().insert(t),i.save(),a.resolve()})}var s=this,a=null;s.up=o,s.listIndexers=n}angular.module("otusjs.deploy").service("otusjs.deploy.ParticipantDataSourceService",t),t.$inject=["$q","otusjs.deploy.ParticipantRestService","otusjs.participant.storage.ParticipantStorageService"]}(),function(){"use strict";function t(t,e,i,o,n){function r(){return f=t.defer(),a(),u(),f.promise}function c(){return{getData:function(){return o.getCollection()},save:function(){o.save(),l()}}}function s(){return{getData:function(){return n.getCollection()},save:function(){n.save()}}}function a(){e.initialize(),i.initialize()}function u(){i.list().then(function(t){t.data&&t.data.length?(n.getCollection().clear(),n.getCollection().insert(t.data),n.save()):console.log("Não foi possível atualizar o storage local."),p=!0,p&&d&&f.resolve()}),e.list().then(function(t){t.data&&t.data.length?(o.getCollection().clear(),o.getCollection().insert(t.data),o.save(),console.log("Storage local de atividades atualizado com dados do servidor.")):console.log("Não foi possível atualizar o storage local."),d=!0,p&&d&&f.resolve()})}function l(){var t=o.getCollection().find();e.update(t).then(function(t){console.log("Dados de atividade sincronizados.")})["catch"](function(t){console.log("Falha ao sincronizar dados de atividade.")})}var v=this,f=null,p=!1,d=!1;v.up=r,v.getActivityDataSet=c,v.getSurveyDataSet=s}angular.module("otusjs.deploy").service("otusjs.deploy.ActivityDataSourceService",t),t.$inject=["$q","otusjs.deploy.ActivityRestService","otusjs.deploy.SurveyRestService","otusjs.activity.storage.ActivityStorageService","otusjs.activity.storage.SurveyStorageService"]}(),function(){"use strict";function t(t,e,i){function o(){return u=t.defer(),c(),s(),u.promise}function n(){return i.getCollection().find()}function r(){}function c(){e.initialize()}function s(){e.listIdexers().then(function(t){i.getCollection().clear(),i.getCollection().insert(t.data),i.save(),u.resolve()})}var a=this,u=null;a.up=o,a.getData=r,a.listIndexers=n}angular.module("otusjs.deploy").service("otusjs.deploy.UserDataSourceService",t),t.$inject=["$q","otusjs.deploy.UserRestService","otusjs.user.storage.UserStorageService"]}(),function(){"use strict";function t(t){function e(t,e){}function i(e,i){t.activateParticipantActivities()}function o(t,e){}function n(t,e){return e}var r=this;r.beforeEffect=e,r.effect=i,r.afterEffect=o,r.getEffectResult=n}angular.module("otusjs.deploy").service("otusjs.deploy.ExitPlayerStepService",t),t.$inject=["otusjs.application.state.ApplicationStateService"]}(),function(){"use strict";function t(t,e,i,o,n){function r(r){r.onEject.forEach(e.onEject),r.onSave.forEach(e.onSave),e.onStop(o),e.onEject(i),e.onSave(n),t.setup()}var c=this;c.setup=r}angular.module("otusjs.deploy").service("otusjs.deploy.PlayerService",t),t.$inject=["otusjs.player.core.player.PlayerService","otusjs.player.core.player.PlayerConfigurationService","otusjs.deploy.ExitPlayerStepService","otusjs.deploy.StopPlayerStepService","otusjs.deploy.SavePlayerStepService"]}(),function(){"use strict";function t(t){function e(t,e){}function i(e,i){t.activateParticipantActivities()}function o(t,e){}function n(t,e){return e}var r=this;r.beforeEffect=e,r.effect=i,r.afterEffect=o,r.getEffectResult=n}angular.module("otusjs.deploy").service("otusjs.deploy.SavePlayerStepService",t),t.$inject=["otusjs.application.state.ApplicationStateService"]}(),function(){"use strict";function t(t){function e(t,e){}function i(e,i){t.activateParticipantActivities()}function o(t,e){}function n(t,e){return e}var r=this;r.beforeEffect=e,r.effect=i,r.afterEffect=o,r.getEffectResult=n}angular.module("otusjs.deploy").service("otusjs.deploy.StopPlayerStepService",t),t.$inject=["otusjs.application.state.ApplicationStateService"]}(),function(){"use strict";function t(t,e,i,o,n,r,c,s,a,u,l,v,f,p,d){e.state(i.state),e.state(o.state),e.state(n.state),e.state(r.state),e.state(c.state),e.state(s.state),e.state(l.state),e.state(f.state),e.state(p.state),e.state(a.state),e.state(u.state),e.state(v.state),e.state(d.state),t.otherwise(l.state.url)}angular.module("otusjs.deploy").constant("STATE",{ACCESS:"access",ACTIVITY_ADDER:"activity-adder",ACTIVITY_PLAYER:"activity-player",PAPER_ACTIVITY_ADDER:"paper-activity-adder",PAPER_ACTIVITY_INITIALIZER:"paper-activity-initializer",APPLICATION:"application",DASHBOARD:"dashboard",INSTALLER:"installer",LOGIN:"login",PARTICIPANT:"participant",PARTICIPANT_ACTIVITY:"activity",PARTICIPANT_REPORT:"report",SESSION:"session",SIGNUP:"signup",SIGNUP_RESULT:"signup-result"}).config(t),t.$inject=["$urlRouterProvider","$stateProvider","otusjs.deploy.AccessStateProvider","otusjs.deploy.ActivityStateProvider","otusjs.deploy.ActivityAdderStateProvider","otusjs.deploy.ActivityPlayerStateProvider","otusjs.deploy.PaperActivityAdderStateProvider","otusjs.deploy.PaperActivityInitializerStateProvider","otusjs.deploy.DashboardStateProvider","otusjs.deploy.InstallerStateProvider","otusjs.deploy.LoginStateProvider","otusjs.deploy.ParticipantStateProvider","otusjs.deploy.SignupStateProvider","otusjs.deploy.SignupResultStateProvider","otusjs.deploy.SessionStateProvider"]}(),function(){"use strict";function t(t,e,i,o,n){function r(){i.initialize()}function c(e){var i=t.defer();return o.newDb(e,u(n)).then(function(){i.resolve()}),i.promise}function s(e){var i=t.defer();return o.loadDb(e,u(n)).then(function(){i.resolve()}),i.promise}function a(t){return o.dbExists(t)}function u(t){return t.map(function(t){return e.get(t)})}var l=this;l.initializeSessionStorage=r,l.createLocalStorage=c,l.loadLocalStorage=s,l.dbExists=a}angular.module("otusjs.deploy").service("otusjs.deploy.StorageLoaderService",t),t.$inject=["$q","$injector","otusjs.application.storage.SessionStorageService","otusjs.application.storage.LocalStorageService","OtusLocalStorage"]}(),function(){"use strict";function t(t,e){e.onLogin(t.setLoggedUser),e.onLogout(t.end),e.onParticipantSelected(t.setSelectedParticipant),e.onParticipantSelected(t.begin)}angular.module("otusjs.activity",["otusjs.activity.core","otusjs.activity.business","otusjs.activity.repository","otusjs.activity.storage"]).run(t),t.$inject=["otusjs.activity.core.ContextService","otusjs.activity.core.EventService"]}(),function(){"use strict";function t(t,e){t.onLogin(e.begin),t.onLogin(e.setLoggedUser),t.onLogout(e.end),t.onParticipantSelected(e.setSelectedParticipant)}angular.module("otusjs.otus.dashboard",["otusjs.otus.dashboard.core","otusjs.otus.dashboard.service"]).run(t),t.$inject=["otusjs.otus.dashboard.core.EventService","otusjs.otus.dashboard.core.ContextService"]}(),function(){"use strict";angular.module("otusjs.otus.installer",[])}(),function(){"use strict";function t(t,e){e.onLogout(t.end)}angular.module("otusjs.participant",["otusjs.participant.core","otusjs.participant.business","otusjs.participant.repository","otusjs.participant.storage"]).run(t),t.$inject=["otusjs.participant.core.ContextService","otusjs.participant.core.EventService"]}(),function(){"use strict";angular.module("otusjs.user",["otusjs.user.core","otusjs.user.business","otusjs.user.repository","otusjs.user.storage"])}(),function(){"use strict";function t(t,e){t.onLogin(e.end),t.onLogout(e.begin)}angular.module("otusjs.user.access",["otusjs.user.access.core","otusjs.user.access.service"]).run(t),t.$inject=["otusjs.user.access.core.EventService","otusjs.user.access.core.ContextService"]}(),function(){"use strict";function t(t,e){function i(){t.add(r),r=[],e.activateParticipantActivities()}function o(t){var e=r.indexOf(t);e!==-1?r.splice(e,1):r.push(t)}var n=this,r=[];n.addActivities=i,n.catchActivity=o}angular.module("otusjs.otus.uxComponent").component("otusActivityAdder",{controller:t,templateUrl:"app/ux-component/activity-adder/activity-adder-template.html"}),t.$inject=["otusjs.activity.business.ParticipantActivityService","otusjs.application.state.ApplicationStateService"]}(),function(){"use strict";function t(t){function e(){r.isListEmpty=!0,i()}function i(){t.listAvailables().then(function(t){r.activities=t,t.length&&(r.isListEmpty=!1)})}function o(t){return"FORM_INTERVIEW"===t.surveyFormType||"INTERVIEW"===t.surveyFormType?"Entrevista":"PROFILE"===t.surveyFormType?"Perfil":""}function n(t){r.onActivitySelection({activity:t})}var r=this;r.activities=[],r.isListEmpty=!0,r.getType=o,r.selectActivity=n,r.$onInit=e}angular.module("otusjs.otus.uxComponent").component("otusActivityAdderList",{controller:t,templateUrl:"app/ux-component/activity-adder-list/activity-adder-list-template.html",bindings:{onActivitySelection:"&"}}),t.$inject=["otusjs.activity.business.ParticipantActivityService"]}(),function(){"use strict";function t(t){function e(){o.onAddActivities()}function i(){t.activateParticipantActivities()}var o=this;o.addActivities=e,o.returnToParticipantActivities=i}angular.module("otusjs.otus.uxComponent").component("otusActivityAdderToolbar",{controller:t,templateUrl:"app/ux-component/activity-adder-toolbar/activity-adder-toolbar-template.html",bindings:{activityType:"<",onAddActivities:"&"}}),t.$inject=["otusjs.application.state.ApplicationStateService"]}(),function(){"use strict";function t(t,e,i){function o(){r.otusActivityManager.activityInfoComponent=r}function n(){var o=e.getSelectedActivities()[0];r.activity={},r.activity.details=o.surveyForm.surveyTemplate.identity,r.activity.history=o.statusHistory.getHistory().map(i.create),r.activity.history.reverse(),t("right").toggle()}var r=this;r.show=n,r.$onInit=o}angular.module("otusjs.otus.uxComponent").component("otusActivityInformation",{controller:t,templateUrl:"app/ux-component/activity-information/activity-information-template.html",require:{otusActivityManager:"^otusActivityManager"}}),t.$inject=["$mdSidenav","otusjs.activity.core.ContextService","otusjs.otus.uxComponent.ActivityStatusItemFactory"]}(),function(){"use strict";function t(){function t(t){return new e(t)}var i=this;return i.create=t,i}function e(t){function e(t){return"CREATED"===t.name?"Criado":"OPENED"===t.name?"Aberto":"FINALIZED"===t.name?"Finalizado":"SAVED"===t.name?"Salvo":"INITIALIZED_OFFLINE"===t.name?"Realizado em Papel":"INITIALIZED_ONLINE"===t.name?"Iniciado Online":void 0}function i(t){try{var e=new Date(t.date);return e.getDate()+"/"+(e.getMonth()+1)+"/"+e.getFullYear()}catch(i){return null}}var o=this;o.name=e(t),o.date=i(t),o.user=t.user,o.user.name=t.user.name+" "+t.user.surname}angular.module("otusjs.otus.uxComponent").factory("otusjs.otus.uxComponent.ActivityStatusItemFactory",t)}(),function(){"use strict";function t(){function t(){o.listComponent.update()}function e(){o.activityInfoComponent.show()}function i(){o.listComponent={},o.activityInfoComponent={}}var o=this;o.handleDeleteAction=t,o.handleViewInfoAction=e,o.$onInit=i}angular.module("otusjs.otus.uxComponent").component("otusActivityManager",{controller:t,templateUrl:"app/ux-component/activity-manager/activity-manager-template.html"})}(),function(){"use strict";function t(t){function e(){t.activateActivityAdder()}function i(){t.activatePaperActivityInitializer()}var o=this;o.goToActivityAdder=e,o.goToPaperActivityInitializer=i}angular.module("otusjs.otus.uxComponent").component("otusActivityManagerCommander",{controller:t,templateUrl:"app/ux-component/activity-manager-commander/activity-manager-commander-template.html"}),t.$inject=["otusjs.application.state.ApplicationStateService"]}(),function(){"use strict";function t(){function t(t){return new e(t)}var i=this;return i.create=t,i}function e(t){function e(){try{var e=new Date(t.getRealizationDate());return e.getDate()+"/"+(e.getMonth()+1)+"/"+e.getFullYear()}catch(i){return null}}function i(){var e=t.statusHistory.getLastStatus();return"INITIALIZED_OFFLINE"===e.name?"Finalizado em papel":"SAVED"===e.name?"Salvo":"FINALIZED"===e.name?"Finalizado":""}function o(){return"PAPER"===t.mode?{name:"Em papel",icon:"file-document"}:"ONLINE"===t.mode?{name:"Online",icon:"signal"}:{name:"",icon:""}}var n=this;n.name=t.surveyForm.surveyTemplate.identity.name,n.acronym=t.surveyForm.surveyTemplate.identity.acronym,n.mode=o(),n.realizationDate=e(),n.status=i(),n.activity=t}angular.module("otusjs.otus.uxComponent").factory("otusjs.otus.uxComponent.ActivityItemFactory",t)}(),function(){"use strict";function t(t,e,i){function o(e){var i=a.indexOf(e.activity);i>-1?(a.splice(i,1),e.isSelected=!1):(a.push(e.activity),e.isSelected=!0),t.selectActivities(a)}function n(){a=[],c()}function r(){s.isListEmpty=!0,s.otusActivityManager.listComponent=s,c(),e.onParticipantSelected(c)}function c(){t.listAll().then(function(t){s.activities=t.map(i.create),t.length&&(s.isListEmpty=!1)})}var s=this,a=[];s.activities=[],s.isListEmpty=!0,s.selectActivity=o,s.update=n,s.$onInit=r}angular.module("otusjs.otus.uxComponent").component("otusActivityList",{controller:t,templateUrl:"app/ux-component/activity-manager-list/activity-manager-list-template.html",require:{otusActivityManager:"^otusActivityManager"}}),t.$inject=["otusjs.activity.business.ParticipantActivityService","otusjs.activity.core.EventService","otusjs.otus.uxComponent.ActivityItemFactory"]}(),function(){"use strict";function t(t,e,i,o){function n(){e.load().then(function(){o.activateActivityPlayer()})}function r(){t.getSelectedActivities().remove(),l.onDelete()}function c(){l.onViewInfo()}function s(){a(),i.onParticipantSelected(a),i.onActivitySelected(u)}function a(e){e?l.selectedParticipant=e:t.getSelectedParticipant().then(function(t){l.selectedParticipant=t})}function u(t){t.length<=0?(l.showVisualizationButton=!1,l.showFillingButton=!1,l.showDeleteButton=!1,l.showInfoButton=!1):1===t.length?(l.showVisualizationButton=!0,l.showFillingButton=!0,l.showDeleteButton=!0,l.showInfoButton=!0):(l.showVisualizationButton=!1,l.showFillingButton=!1,l.showDeleteButton=!0,l.showInfoButton=!1)}var l=this;l.fillSelectedActivity=n,l.deleteSelectedActivity=r,l.visualizeSelectedActivityInfo=c,l.$onInit=s}angular.module("otusjs.otus.uxComponent").component("otusActivityManagerToolbar",{controller:t,templateUrl:"app/ux-component/activity-manager-toolbar/activity-manager-toolbar-template.html",require:{otusActivityManager:"^otusActivityManager"},bindings:{onDelete:"&",onViewInfo:"&"}}),t.$inject=["otusjs.activity.business.ParticipantActivityService","otusjs.activity.business.ActivityPlayerService","otusjs.activity.core.EventService","otusjs.application.state.ApplicationStateService"]}(),function(){"use strict";function t(t){function e(){}var i=this;i.x=e}angular.module("otusjs.otus.uxComponent").component("otusActivityPlayer",{controller:t,templateUrl:"app/ux-component/activity-player/activity-player-template.html"}),t.$inject=["otusjs.activity.core.EventService"]}(),function(){"use strict";function t(t){function e(e){o.selectedParticipant=e,t.activateParticipantActivities()}function i(){o.selectedParticipant=null}var o=this;o.selectParticipant=e,o.$onInit=i}angular.module("otusjs.otus.uxComponent").component("otusDashboard",{controller:t,templateUrl:"app/ux-component/dashboard/dashboard-template.html"}),t.$inject=["otusjs.application.state.ApplicationStateService"]}(),function(){"use strict";function t(){}angular.module("otusjs.otus.uxComponent").component("otusDashboardDisplay",{controller:t,templateUrl:"app/ux-component/dashboard-display/dashboard-display-template.html"})}(),function(){"use strict";function t(t,e,i,o,n){function r(){e.activateParticipantActivities()}function c(){e.activateParticipantReports()}function s(){u.isEmpty=!0,a(),o.onParticipantSelected(a)}function a(t){t?(u.selectedParticipant=t,u.isEmpty=!1):n.getSelectedParticipant().then(function(t){
u.selectedParticipant=t,u.isEmpty=!1})}var u=this;u.loadParticipantActivities=r,u.loadParticipantReports=c,u.$onInit=s}angular.module("otusjs.otus.uxComponent").component("otusParticipantBox",{controller:t,templateUrl:"app/ux-component/dashboard-participant-box/dashboard-participant-box-template.html"}),t.$inject=["$element","otusjs.application.state.ApplicationStateService","otusjs.participant.core.ContextService","otusjs.otus.dashboard.core.EventService","otusjs.otus.dashboard.service.DashboardService"]}(),function(){"use strict";function t(t,e,i){function o(){u.toggle()}function n(){e.logout()}function r(){i.activateParticipantActivities()}function c(){i.activateParticipantReports()}function s(){t.when(l).then(function(t){u=t})}var a=this,u=null,l="left";a.close=o,a.logout=n,a.loadParticipantActivities=r,a.loadParticipantReports=c,a.$onInit=s}angular.module("otusjs.otus.uxComponent").component("otusDashboardSidenav",{controller:t,templateUrl:"app/ux-component/dashboard-sidenav/dashboard-sidenav-template.html",bindings:{participant:"<"}}),t.$inject=["$mdComponentRegistry","otusjs.user.access.service.LogoutService","otusjs.application.state.ApplicationStateService"]}(),function(){"use strict";function t(t){function e(){n&&n.toggle()}function i(){t.when(r).then(function(t){n=t})}var o=this,n=null,r="left";o.launchSidenav=e,o.$onInit=i}angular.module("otusjs.otus.uxComponent").component("otusDashboardSidenavLauncher",{controller:t,templateUrl:"app/ux-component/dashboard-sidenav-launcher/dashboard-sidenav-launcher-template.html"}),t.$inject=["$mdComponentRegistry"]}(),function(){"use strict";function t(t,e){function i(t){r.onParticipantSelect({participant:t})}function o(){n(),e.onLogin(n)}function n(e){e?r.loggedUser=e:t.getLoggedUser().then(function(t){r.loggedUser=t})}var r=this;r.selectParticipant=i,r.$onInit=o}angular.module("otusjs.otus.uxComponent").component("otusDashboardToolbar",{controller:t,templateUrl:"app/ux-component/dashboard-toolbar/dashboard-toolbar-template.html",bindings:{onParticipantSelect:"&"}}),t.$inject=["otusjs.otus.dashboard.core.ContextService","otusjs.otus.dashboard.core.EventService"]}(),function(){"use strict";function t(t,e,i,o,n,r,c){function s(){j=e.getOtusInstallerResource()}function a(t){o.isLoading=!0,delete t.userPasswordConfirm,j.config(t,function(t){t.data?y():l(t),o.isLoading=!1})}function u(t){i.setHostname(t);var e=i.getInstallerResource();e.ready(function(t){t.data||p()})}function l(t){switch(t.STATUS){case"CONFLICT":v();break;case"PRECONDITION_FAILED":f();break;default:d()}}function v(){o.initialConfigForm.email.$setValidity("email",!1),o.initialConfigForm.$setValidity("email",!1)}function f(){o.initialConfigForm.emailSenderEmail.$setValidity("emailService",!1),o.initialConfigForm.$setValidity("emailService",!1)}function p(){o.initialConfigForm.urlProject.$setValidity("domainAccess",!1),o.initialConfigForm.$setValidity("domainAccess",!1)}function d(){m(h)}function g(){o.initialConfigForm.emailSenderEmail.$setValidity("emailService",!0),o.initialConfigForm.$setValidity("emailService",!0)}function S(){o.initialConfigForm.urlProject.$setValidity("domainAccess",!0),o.initialConfigForm.$setValidity("domainAccess",!0)}function y(){var t=c.alert().title("Informação").content(A).ok("ok");c.show(t)["finally"](function(){})}function m(t){n.show(n.simple().textContent(t))}var j,h="Erro ao adicionar novas configurações. Contate a equipe de desenvolvimento",A="Suas configurações foram realizadas com sucesso! Você vai ser redirecionado para a tela de login.",P=this;P.register=a,P.validateDomain=u,P.resetValidationEmail=g,P.resetValidationDomain=S,s()}angular.module("otusjs.otus.uxComponent").controller("otusjs.otus.uxComponent.InitialConfigController",t),t.$inject=["otusjs.application.state.ApplicationStateService","OtusRestResourceService","RestResourceService","$scope","$mdToast","$q","$mdDialog"]}(),function(){"use strict";function t(t,e){function i(){t.add(r),r=[],e.activateParticipantActivities()}function o(t){var e=r.indexOf(t);e!==-1?r.splice(e,1):r.push(t)}var n=this,r=[];n.addActivities=i,n.catchActivity=o}angular.module("otusjs.otus.uxComponent").component("otusPaperActivityAdder",{controller:t,templateUrl:"app/ux-component/paper-activity-adder/paper-activity-adder-template.html"}),t.$inject=["otusjs.activity.business.ParticipantActivityService","otusjs.application.state.ApplicationStateService"]}(),function(){"use strict";function t(t){function e(){i()}function i(){n.activities=t.listAvailables(),console.log(n.activities)}function o(t){n.onActivitySelection({activity:t})}var n=this;n.activities=[],n.selectActivity=o,n.$onInit=e}angular.module("otusjs.otus.uxComponent").component("otusPaperActivityAdderList",{controller:t,templateUrl:"app/ux-component/paper-activity-adder-list/paper-activity-adder-list-template.html",bindings:{onActivitySelection:"&"}}),t.$inject=["otusjs.activity.business.ParticipantActivityService"]}(),function(){"use strict";function t(){function t(t){return new e(t)}var i=this;return i.create=t,i}function e(t){var e=this;e.text=t.name+" "+t.surname,e.title=t.name+" "+t.surname,e.metastat={},e.metastat.code=t.$loki,e.metastat.email=t.email,e.checker=t}angular.module("otusjs.otus.uxComponent").factory("otusjs.otus.uxComponent.CheckerItemFactory",t)}(),function(){"use strict";function t(t,e,i,o,n){function r(i){var o=i?v.filter(u(i)):v,n=t.defer();return e(function(){n.resolve(o)},1e3*Math.random(),!1),n.promise}function c(){o.activateParticipantActivities()}function s(){l.paperActivityData.checker=l.selectedItem.checker,i.initializePaperActivityData(l.paperActivityData),o.activateActivityAdder()}function a(){l.paperActivityData={},l.paperActivityData.realizationDate=new Date}function u(t){var e=angular.lowercase(t);return function(t){return t.text.toLowerCase().indexOf(e)>-1}}var l=this,v=i.listActivityCheckers().map(n.create);l.querySearch=r,l.returnToParticipantActivities=c,l.goToActivityAdder=s,l.$onInit=a}angular.module("otusjs.otus.uxComponent").component("otusPaperActivityInitializer",{controller:t,templateUrl:"app/ux-component/paper-activity-initializer/paper-activity-initializer-template.html"}),t.$inject=["$q","$timeout","otusjs.activity.business.ParticipantActivityService","otusjs.application.state.ApplicationStateService","otusjs.otus.uxComponent.CheckerItemFactory"]}(),function(){"use strict";function t(t){function e(e){t.selectParticipant(e),n.participants=[],n.showResultList=t.hasResultFilter(),n.onSelect({participant:e})}function i(e){n.participants=e,n.showResultList=t.hasResultFilter()}function o(){n.participants=[],n.showResultList=!1,n.otusParticipantSearchTool.resultComponent=n}var n=this;n.selectParticipant=e,n.setResultData=i,n.$onInit=o}angular.module("otusjs.otus.uxComponent").component("otusParticipantSearchResult",{controller:t,templateUrl:"app/ux-component/participant-search-result/participant-search-result-template.html",require:{otusParticipantSearchTool:"^otusParticipantSearchTool"},bindings:{onSelect:"&"}}),t.$inject=["otusjs.participant.business.ParticipantSearchService"]}(),function(){"use strict";function t(t){function e(){t.filter(n.query),n.resultComponent.setResultData(t.getFilteredData())}function i(){n.resultComponent={}}function o(t){n.query="",n.onSelect({participant:t})}var n=this;n.filter=e,n.$onInit=i,n.selectParticipant=o}angular.module("otusjs.otus.uxComponent").component("otusParticipantSearchTool",{controller:t,templateUrl:"app/ux-component/participant-search-tool/participant-search-tool-template.html",bindings:{onSelect:"&"}}),t.$inject=["otusjs.participant.business.ParticipantSearchService"]}(),function(){"use strict";function t(t,e,i){function o(e){t.authenticate(e).then(r,c)}function n(){e.activateSignup()}function r(){e.activateDashboard()}function c(){i.show(u)}var s=this,a="Login Inválido! Verifique os dados informados.",u=i.simple().textContent(a);s.authenticate=o,s.goToSignupPage=n}angular.module("otusjs.otus.uxComponent").controller("otusjs.otus.uxComponent.LoginController",t),t.$inject=["otusjs.user.access.service.LoginService","otusjs.application.state.ApplicationStateService","$mdToast"]}(),function(){"use strict";function t(t,e,i,o){function n(i){f.isWaiting=!0,e.executeSignup(i).then(function(e){e.data?t.activateSignupResult():r(e),f.isWaiting=!1})}function r(t){switch(t.STATUS){case"CONFLICT":c();break;default:s()}}function c(){i.signupForm.email.$setValidity("emailInUse",!1),f.isWaiting=!1}function s(){o.show(o.simple().textContent(v))}function a(){i.signupForm.email.$setValidity("emailInUse",!0),i.signupForm.$setValidity("emailInUse",!0)}function u(){t.activateLogin()}function l(){t.activateLogin()}var v="Houve um erro ao realizar o cadastro. Informe a equipe de desenvolvimento",f=this;f.signup=n,f.back=u,f.agree=l,f.resetEmailValidation=a}angular.module("otusjs.otus.uxComponent").controller("otusjs.otus.uxComponent.SignupController",t),t.$inject=["otusjs.application.state.ApplicationStateService","otusjs.user.access.service.SignupService","$scope","$mdToast"]}(),function(){"use strict";function t(t){}angular.module("otusjs.application.http").config(t),t.$inject=["$httpProvider"]}(),function(){"use strict";function t(){function t(t){return t}var e=this;return e.responseError=t,e}angular.module("otusjs.application.http").factory("otusjs.application.http.ResponseInterceptor",t),t.$inject=[]}(),function(){"use strict";function t(t,e){function i(e){t.sessionStorage.setItem("outk",e.token),u(h,e)}function o(){r(),p(),e.fireLogin(a(h))}function n(){m.removeItem(j),t.sessionStorage.removeItem("outk")}function r(){if(d(),!c())throw new Error("There is no active session context.","session/context-service.js",58)}function c(){return!!m.getItem(j)}function s(){d(),m.setItem(j,y.toJson())}function a(t){return d(),y.getData(t)}function u(t,e){d(),y.setData(t,e),s()}function l(t){d(),y.removeData(t),s()}function v(t){y=t.create(j)}function f(t){m=t}function p(){r(),c()&&y.fromJson(m.getItem(j))}function d(){if(!y)throw new Error("Internal context is not initialized.","session-context-service.js",152);if(!m)throw new Error("Internal storage is not initialized.","application-context-service.js",158)}function g(){return null}var S=this,y=null,m=null,j="session_context",h="loggedUser";S.begin=i,S.restore=o,S.end=n,S.isValid=r,S.hasContextActive=c,S.save=s,S.configureContext=v,S.configureStorage=f,S.getData=a,S.setData=u,S.removeData=l,S.getToken=g}angular.module("otusjs.application.session.core").service("otusjs.application.session.core.ContextService",t),t.$inject=["$window","otusjs.application.session.core.EventService"]}(),function(){"use strict";function t(){function t(t){n(c,t,c.length)}function e(t){c.push(t)}function i(t){n(s,t,s.length)}function o(t){s.push(t)}function n(t,e,i){for(var o=0;o<i;o++)t[o](e)}var r=this,c=[],s=[];r.fireLogin=t,r.onLogin=e,r.fireLogout=i,r.onLogout=o}angular.module("otusjs.application.session.core").service("otusjs.application.session.core.EventService",t)}(),function(){"use strict";function t(t,e){function i(e){t.configureContext(e)}function o(e){t.configureStorage(e)}function n(){return t.hasContextActive()}var r=this;r.Event=e,r.configureContext=i,r.configureStorage=o,r.hasContextActive=n}angular.module("otusjs.application.session.core").service("otusjs.application.session.core.ModuleService",t),t.$inject=["otusjs.application.session.core.ContextService","otusjs.application.session.core.EventService"]}(),function(){"use strict";angular.module("otusjs.application.session.core",[])}(),function(){"use strict";angular.module("otusjs.application.state").constant("STATE",{ACCESS:"access",ACTIVITY_ADDER:"activity-adder",ACTIVITY_PLAYER:"activity-player",PAPER_ACTIVITY_ADDER:"paper-activity-adder",PAPER_ACTIVITY_INITIALIZER:"paper-activity-initializer",APPLICATION:"application",DASHBOARD:"dashboard",INSTALLER:"installer",LOGIN:"login",PARTICIPANT:"participant",PARTICIPANT_ACTIVITY:"activity",PARTICIPANT_REPORT:"report",SESSION:"session",SIGNUP:"signup",SIGNUP_RESULT:"signup-result"})}(),function(){"use strict";function t(t,e,i){e.$on("$stateChangeStart",function(e,o,n){if(o.data&&o.data.redirect){var r=t.invoke(o.data.redirect);r&&(e.preventDefault(),i.go(r))}}),e.$on("$stateChangeError",function(t,e,o,n,r,c){t.preventDefault(),c.redirectTo?i.go(c.redirectTo):i.go("error",{status:c.status})})}angular.module("otusjs.application.state").service("otusjs.application.state.RouteResolverService",t),t.$inject=["$injector","$rootScope","$state"]}(),function(){"use strict";function t(t,e){function i(){e.go(t.ACTIVITY_ADDER)}function o(){e.go(t.ACTIVITY_PLAYER)}function n(){e.go(t.PAPER_ACTIVITY_ADDER)}function r(){e.go(t.PAPER_ACTIVITY_INITIALIZER)}function c(){e.go(t.INSTALLER)}function s(){e.go(t.LOGIN)}function a(){e.go(t.DASHBOARD)}function u(){e.go(t.PARTICIPANT_ACTIVITY)}function l(){e.go(t.PARTICIPANT_REPORT)}function v(){e.go(t.SIGNUP)}function f(){e.go(t.SIGNUP_RESULT)}var p=this;p.activateActivityAdder=i,p.activateActivityPlayer=o,p.activatePaperActivityAdder=n,p.activatePaperActivityInitializer=r,p.activateInstaller=c,p.activateLogin=s,p.activateDashboard=a,p.activateParticipantActivities=u,p.activateParticipantReports=l,p.activateSignup=v,p.activateSignupResult=f}angular.module("otusjs.application.state").service("otusjs.application.state.ApplicationStateService",t),t.$inject=["STATE","$state"]}(),function(){"use strict";function t(t){function e(){f=t.createInstance({name:"otus",driver:"asyncStorage",storeName:"session_data"})._localforage,i("dbname","otus")}function i(t,e){return f.setItem(t,e)}function o(t){return f.getItem(t)}function n(t){return f.removeItem(t)}function r(t){return f.pull(t)}function c(){return f.clear()}function s(t){return f.key(t)}function a(){return f.keys()}function u(){return f.length()}function l(t){return f.iterate(t)}var v=this,f=null;v.initialize=e,v.setItem=i,v.getItem=o,v.removeItem=n,v.pull=r,v.clear=c,v.key=s,v.keys=a,v.length=u,v.iterate=l}angular.module("otusjs.application.storage").service("otusjs.application.storage.IndexedDbService",t),t.$inject=["$localForage"]}(),function(){"use strict";function t(t,e,i){function o(t){return l[t].lokiDb}function n(e,i){return l[e]={},l[e].loading=t.defer(),l[e].storages=i,l[e].lokiDb=new loki(e,{autoload:!0,autoloadCallback:function(){s(e)}}),l[e].loading.promise}function r(e,i){return l[e]={},l[e].loading=t.defer(),l[e].storages=i,l[e].lokiDb=new loki(e,{autoload:!0,autoloadCallback:function(){a(e)}}),l[e].loading.promise}function c(t){return!!e.localStorage.getItem(t)}function s(t){l[t].storages.forEach(function(e){e.initialize(o(t).addCollection(e.collectionName),o(t))}),o(t).saveDatabase(),l[t].loading.resolve()}function a(t){l[t].storages.forEach(function(e){e.initialize(o(t).getCollection(e.collectionName),o(t))}),l[t].loading.resolve()}var u=this,l={};u.getDb=o,u.newDb=n,u.loadDb=r,u.dbExists=c}angular.module("otusjs.application.storage").service("otusjs.application.storage.LocalStorageService",t),t.$inject=["$q","$window","Lokiwork"]}(),function(){"use strict";function t(t,e){function i(){return d=t.defer(),f=e.sessionStorage,p=!0,d.resolve(),d.promise}function o(){return p}function n(t,e){return f.setItem(t,e)}function r(t){return f.getItem(t)}function c(t){return f.removeItem(t)}function s(){return f.clear()}function a(t){return f.key(t)}function u(){return f.keys()}function l(){return f.length()}var v=this,f=null,p=!1,d=null;v.initialize=i,v.isReady=o,v.setItem=n,v.getItem=r,v.removeItem=c,v.clear=s,v.key=a,v.keys=u,v.length=l}angular.module("otusjs.application.storage").service("otusjs.application.storage.SessionStorageService",t),t.$inject=["$q","$window"]}(),function(){"use strict";function t(t,e,i){function o(){return f=t.defer(),e.initialize().then(s),i.initialize().then(a),f.promise}function n(){return f=t.defer(),i.initialize().then(a),f.promise}function r(){return f=t.defer(),e.initialize().then(s),f.promise}function c(){return v}function s(){v=e.isReady()&&i.isReady(),u()}function a(){v=e.isReady()&&i.isReady(),u()}function u(){c()&&f.resolve("Application start data loaded.")}var l=this,v=!1,f=null;l.local=e,l.session=i,l.initialize=o,l.initializeSession=n,l.initializeLocal=r,l.isReady=c}angular.module("otusjs.application.storage").service("otusjs.application.storage.StorageService",t),t.$inject=["$q","otusjs.application.storage.LocalStorageService","otusjs.application.storage.SessionStorageService"]}(),function(){"use strict";function t(t){function e(){return t.surveyActivity}function i(e){t.surveyActivity=e,u.surveyActivity=e}function o(i,o,n,r){return r?t.createPaperActivity(i,o,n,r):t.createActivity(i,o,n,n),e()}function n(e){l=e,t.openActivitySurvey(l)}function r(){t.initializeActivitySurvey()}function c(e,i,o,n){return t.createQuestionFill(e,i,o,n)}function s(e){t.fillQuestion(e)}function a(e){return t.getFillingByQuestionID(e)}var u=this,l=null;u.getActivity=e,u.useActivity=i,u.createActivity=o,u.createQuestionFill=c,u.fillQuestion=s,u.openSurveyActivity=n,u.initializeActivitySurvey=r,u.getFillingByQuestionID=a}angular.module("otusjs.deploy").service("otusjs.deploy.model.ActivityFacadeService",t),t.$inject=["otusjs.model.activity.ActivityFacadeService"]}(),function(){"use strict";function t(t){function e(){return c}function i(){c=c.concat([o("ActivityParticipantDataFactory"),o("ActivityStatusFactory"),o("ActivityFactory"),o("ActivityUserFactory"),o("AnswerFillFactory"),o("InterviewFactory"),o("InterviewerFactory")])}function o(e){return t.get(r+e)}var n=this,r="otusjs.model.activity.",c=[];n.getModels=e,i()}angular.module("otusjs.deploy").service("otusjs.deploy.model.ActivityModelPoolService",t),t.$inject=["$injector"]}(),function(){"use strict";function t(t){function e(){return c}function i(){c=c.concat([o("SurveyFactory"),o("SurveyFormFactory"),o("SurveyIdentityFactory"),o("SurveyMetaInfoFactory")])}function o(e){return t.get(r+e)}var n=this,r="",c=[];n.getModels=e,i()}angular.module("otusjs.deploy").service("otusjs.deploy.model.SurveyModelPoolService",t),t.$inject=["$injector"]}(),function(){"use strict";function t(t,e){function i(){t.initialize(),e.initialize()}var o=this;o.initializeResources=i}angular.module("otusjs.deploy").service("otusjs.deploy.OtusApiService",t),t.$inject=["otusjs.deploy.AuthenticationRestService","otusjs.deploy.InstallerRestService"]}(),function(){"use strict";function t(t){function e(){return n}function i(e,i,o){var n=e.defer();return o.isDeployed().then(function(){try{i.isValid(),n.resolve()}catch(e){n.resolve(t.DASHBOARD)}}),n.promise}function o(e){e.ready(function(e){return e.data?t.LOGIN:t.INSTALLER})}var n=this;n.$get=[e],n.state={"abstract":!0,name:t.ACCESS,template:'<div flex layout="column"><div ui-view flex layout="row"></div></div>',data:{redirect:i},resolve:{applicationReady:o}},i.$inject=["$q","otusjs.user.access.core.ContextService","otusjs.application.core.ModuleService"],o.$inject=["otusjs.deploy.InstallerRestService"]}angular.module("otusjs.deploy").provider("otusjs.deploy.AccessState",t),t.$inject=["STATE"]}(),function(){"use strict";function t(t){function e(){return i}var i=this;i.$get=[e],i.state={parent:t.ACCESS,name:t.LOGIN,url:"/"+t.LOGIN,templateUrl:"app/ux-component/user-login/login.html",controller:"otusjs.otus.uxComponent.LoginController as $ctrl"}}angular.module("otusjs.deploy").provider("otusjs.deploy.LoginState",t),t.$inject=["STATE"]}(),function(){"use strict";function t(t){function e(){return i}var i=this;i.$get=[e],i.state={parent:t.ACCESS,name:t.SIGNUP_RESULT,url:"/"+t.SIGNUP_RESULT,templateUrl:"app/ux-component/user-signup/signup-result.html",controller:"otusjs.otus.uxComponent.SignupController as $ctrl"}}angular.module("otusjs.deploy").provider("otusjs.deploy.SignupResultState",t),t.$inject=["STATE"]}(),function(){"use strict";function t(t){function e(){return i}var i=this;i.$get=[e],i.state={parent:t.ACCESS,name:t.SIGNUP,url:"/"+t.SIGNUP,templateUrl:"app/ux-component/user-signup/signup.html",controller:"otusjs.otus.uxComponent.SignupController as $ctrl"}}angular.module("otusjs.deploy").provider("otusjs.deploy.SignupState",t),t.$inject=["STATE"]}(),function(){"use strict";function t(t){function e(){return o}function i(t,e){e.isDeployed().then(function(){try{t.restore()}catch(e){t.begin()}})}var o=this;o.$get=[e],o.state={parent:t.DASHBOARD,name:t.ACTIVITY_ADDER,url:"/"+t.ACTIVITY_ADDER,template:'<otus-activity-adder layout="column" flex></otus-activity-adder>',onEnter:i},i.$inject=["otusjs.activity.core.ContextService","otusjs.application.core.ModuleService"]}angular.module("otusjs.deploy").provider("otusjs.deploy.ActivityAdderState",t),t.$inject=["STATE"]}(),function(){"use strict";function t(t){function e(){return n}function i(e,i,o,n){var r=e.defer();return o.isDeployed().then(function(){try{i.isValid(),i.restore(),r.resolve()}catch(e){r.resolve(t.DASHBOARD)}}),r.promise}function o(t,e,i){i.isDeployed().then(function(){try{t.restore(),e.restore()}catch(i){console.log(i)}})}var n=this;n.$get=[e],n.state={name:t.ACTIVITY_PLAYER,url:"/"+t.ACTIVITY_PLAYER,template:'<otus-activity-player layout="row" flex></otus-activity-player>',data:{redirect:i},resolve:{loadPlayerContext:o}},i.$inject=["$q","otusjs.activity.core.ContextService","otusjs.application.core.ModuleService","otusjs.deploy.model.ActivityFacadeService"],o.$inject=["otusjs.activity.core.ContextService","otusjs.application.session.core.ContextService","otusjs.application.core.ModuleService"]}angular.module("otusjs.deploy").provider("otusjs.deploy.ActivityPlayerState",t),t.$inject=["STATE"]}(),function(){"use strict";function t(t){function e(){return r}function i(e,i,o){var n=e.defer();return o.isDeployed().then(function(){try{i.isValid(),n.resolve()}catch(e){n.resolve(t.LOGIN)}}),n.promise}function o(t,e,i,o){o.isDeployed().then(function(){try{e.restore(),i.restore()}catch(t){console.log(t)}})}function n(t,e){e.isDeployed().then(function(){try{t.restore()}catch(e){t.begin()}})}var r=this;r.$get=[e],r.state={parent:t.DASHBOARD,name:t.PARTICIPANT_ACTIVITY,url:"/"+t.PARTICIPANT_ACTIVITY,template:'<otus-activity-manager layout="column" flex></otus-activity-manager>',data:{redirect:i},resolve:{loadParticipantContext:o}},i.$inject=["$q","otusjs.activity.core.ContextService","otusjs.application.core.ModuleService"],o.$inject=["otusjs.activity.core.ContextService","otusjs.participant.core.ContextService","otusjs.application.session.core.ContextService","otusjs.application.core.ModuleService"],n.$inject=["otusjs.activity.core.ContextService","otusjs.application.core.ModuleService"]}angular.module("otusjs.deploy").provider("otusjs.deploy.ActivityState",t),t.$inject=["STATE"]}(),function(){"use strict";function t(t){function e(){return o}function i(t,e){e.isDeployed().then(function(){try{t.restore()}catch(e){t.begin()}})}var o=this;o.$get=[e],o.state={parent:t.DASHBOARD,name:t.PAPER_ACTIVITY_ADDER,url:"/"+t.PAPER_ACTIVITY_ADDER,template:'<otus-paper-activity-adder layout="column" flex></otus-paper-activity-adder>',onEnter:i},i.$inject=["otusjs.activity.core.ContextService","otusjs.application.core.ModuleService"]}angular.module("otusjs.deploy").provider("otusjs.deploy.PaperActivityAdderState",t),t.$inject=["STATE"]}(),function(){"use strict";function t(t){function e(){return o}function i(t,e){e.isDeployed().then(function(){try{t.restore()}catch(e){t.begin()}})}var o=this;o.$get=[e],o.state={parent:t.DASHBOARD,name:t.PAPER_ACTIVITY_INITIALIZER,url:"/"+t.PAPER_ACTIVITY_INITIALIZER,template:'<otus-paper-activity-initializer layout="column" layout-align="center center" flex></otus-paper-activity-initializer>',onEnter:i},i.$inject=["otusjs.activity.core.ContextService","otusjs.application.core.ModuleService"]}angular.module("otusjs.deploy").provider("otusjs.deploy.PaperActivityInitializerState",t),t.$inject=["STATE"]}(),function(){"use strict";function t(t){function e(){return n}function i(e,i,o){var n=e.defer();return o.isDeployed().then(function(){try{i.isValid(),n.resolve()}catch(e){n.resolve(t.LOGIN)}}),n.promise}function o(t,e,i){i.isDeployed().then(function(){try{t.restore(),e.restore()}catch(i){console.log(i)}})}var n=this;n.$get=[e],n.state={parent:t.SESSION,name:t.DASHBOARD,url:"/"+t.DASHBOARD,template:'<otus-dashboard layout="column" flex></otus-dashboard>',data:{redirect:i},resolve:{loadParticipantContext:o}},i.$inject=["$q","otusjs.otus.dashboard.core.ContextService","otusjs.application.core.ModuleService"],o.$inject=["otusjs.participant.core.ContextService","otusjs.application.session.core.ContextService","otusjs.application.core.ModuleService"]}angular.module("otusjs.deploy").provider("otusjs.deploy.DashboardState",t),t.$inject=["STATE"]}(),function(){"use strict";function t(t){function e(){return i}var i=this;i.$get=[e],i.state={"abstract":!0,parent:t.DASHBOARD,name:t.PARTICIPANT,url:"/"+t.PARTICIPANT,template:'<div id="participant-state-template" flex ui-view></div>'}}angular.module("otusjs.deploy").provider("otusjs.deploy.ParticipantState",t),t.$inject=["STATE"]}(),function(){"use strict";function t(t){function e(){return o}function i(e,i){var o=e.defer();return i.ready(function(e){e.data?o.resolve(t.LOGIN):o.resolve()}),o.promise}var o=this;o.$get=[e],o.state={name:t.INSTALLER,url:"/"+t.INSTALLER,templateUrl:"app/ux-component/installer/initial-config.html",controller:"otusjs.otus.uxComponent.InitialConfigController as controller",data:{redirect:i}},i.$inject=["$q","otusjs.deploy.InstallerRestService"]}angular.module("otusjs.deploy").provider("otusjs.deploy.InstallerState",t),t.$inject=["STATE"]}(),function(){"use strict";function t(t){function e(){return r}function i(e,i){i.isDeployed().then(function(){try{e.isValid()}catch(i){return t.LOGIN}})}function o(e,i){i.isDeployed().then(function(){try{e.restore()}catch(i){return t.LOGIN}})}function n(t,e){e.isDeployed().then(function(){try{t.isValid()}catch(e){t.end()}})}var r=this;r.$get=[e],r.state={"abstract":!0,name:t.SESSION,template:'<div flex layout="column"><div flex layout="row" ui-view></div></div>',data:{redirect:i},resolve:{loadContext:o},onExit:n},i.$inject=["otusjs.application.session.core.ContextService","otusjs.application.core.ModuleService"],o.$inject=["otusjs.application.session.core.ContextService","otusjs.application.core.ModuleService"],n.$inject=["otusjs.application.session.core.ContextService","otusjs.application.core.ModuleService"]}angular.module("otusjs.deploy").provider("otusjs.deploy.SessionState",t),t.$inject=["STATE"]}(),function(){"use strict";function t(t,e,i){function o(){return t.whenActivityFacadeServiceReady().then(function(t){n(t),r()})}function n(t){var i=e.getSelectedActivities()[0];t.useActivity(i),t.openSurveyActivity(e.getLoggedUser()),e.setActivityToPlay(i)}function r(){t.whenActivityPlayerServiceReady().then(function(t){t.setup({onEject:[i],onSave:[i]})})}var c=this;c.load=o}angular.module("otusjs.activity.business").service("otusjs.activity.business.ActivityPlayerService",t),t.$inject=["otusjs.activity.core.ModuleService","otusjs.activity.core.ContextService","otusjs.activity.LocalStorageStepService"]}(),function(){"use strict";function t(t,e){function i(t,e){}function o(i,o){t.whenActivityFacadeServiceReady().then(function(t){e.save(t.getActivity())})}function n(t,e){console.info("Activity filling saved!")}function r(t,e){return e}var c=this;c.beforeEffect=i,c.effect=o,c.afterEffect=n,c.getEffectResult=r}angular.module("otusjs.activity").service("otusjs.activity.LocalStorageStepService",t),t.$inject=["otusjs.activity.core.ModuleService","otusjs.activity.repository.ActivityRepositoryService"]}(),function(){"use strict";angular.module("otusjs.activity.business",[])}(),function(){"use strict";function t(t,e,i,o){function n(t){var o=e.getLoggedUser();l().then(function(e){p?(i.createFromPaperActivity(t,o,e,p),p=null):i.createFromSurvey(t,o,e)})}function r(){return l().then(function(t){return i.listAll(t)})}function c(){return i.listAvailables()}function s(t){p=t}function a(t){e.selectActivities(t)}function u(){return{list:function(){return e.getSelectedActivities()},remove:function(){i.remove(e.getSelectedActivities()),e.clearSelectedActivities()}}}function l(){return e.getSelectedParticipant()}function v(){return o.listAll()}var f=this,p=null;f.initializePaperActivityData=s,f.add=n,f.listAll=r,f.listAvailables=c,f.selectActivities=a,f.getSelectedActivities=u,f.getSelectedParticipant=l,f.listActivityCheckers=v}angular.module("otusjs.activity.business").service("otusjs.activity.business.ParticipantActivityService",t),t.$inject=["otusjs.activity.core.ModuleService","otusjs.activity.core.ContextService","otusjs.activity.repository.ActivityRepositoryService","otusjs.activity.repository.UserRepositoryService"]}(),function(){"use strict";function t(t,e){function i(){x.clear(),s()}function o(){p()}function n(){D.removeItem(E)}function r(){if(d(),!c())throw new Error("There is no active activity context.","activity/context-service.js",61)}function c(){return!!D.getItem(E)}function s(){d(),D.setItem(E,x.toJson())}function a(t){return d(),x.getData(t)}function u(t,e){d(),x.setData(t,e),s()}function l(t){d(),x.removeData(t),s()}function v(t){x=t.create(E)}function f(t){D=t}function p(){r(),x.fromJson(D.getItem(E))}function d(){if(!x)throw new Error("Internal context is not initialized.","activity-context-service.js",159);if(!D)throw new Error("Internal storage is not initialized.","activity-context-service.js",165)}function g(){return R.promise}function S(e){R=t.defer(),e&&R.resolve(e)}function y(){return T}function m(t){T=t}function j(){return a("selectedActivities")||[]}function h(){u("selectedActivities",[])}function A(t){u("selectedActivities",t),e.fireActivitySelected(t)}function P(){return a("activityToPlay")}function I(t){u("activityToPlay",t)}function C(){return!!a("activityToPlay")}var $=this,x=null,D=null,E="activity_context",R=t.defer(),T=null;$.begin=i,$.restore=o,$.end=n,$.isValid=r,$.hasContextActive=c,$.save=s,$.configureContext=v,$.configureStorage=f,$.getData=a,$.setData=u,$.removeData=l,$.getSelectedParticipant=g,$.setSelectedParticipant=S,$.getLoggedUser=y,$.setLoggedUser=m,$.getSelectedActivities=j,$.clearSelectedActivities=h,$.selectActivities=A,$.getActivityToPlay=P,$.setActivityToPlay=I,$.existsActivityToPlay=C}angular.module("otusjs.activity.core").service("otusjs.activity.core.ContextService",t),t.$inject=["$q","otusjs.activity.core.EventService"]}(),function(){"use strict";function t(){function t(t){a(l,t,l.length)}function e(t){l.push(t)}function i(t){a(v,t,v.length)}function o(t){v.push(t)}function n(t){a(f,t,f.length)}function r(t){f.push(t)}function c(t){a(p,t,p.length)}function s(t){p.push(t)}function a(t,e,i){for(var o=0;o<i;o++)t[o](e)}var u=this,l=[],v=[],f=[],p=[];u.fireParticipantSelected=t,u.onParticipantSelected=e,u.fireActivitySelected=i,u.onActivitySelected=o,u.fireLogin=n,u.onLogin=r,u.fireLogout=c,u.onLogout=s}angular.module("otusjs.activity.core").service("otusjs.activity.core.EventService",t)}(),function(){"use strict";function t(t,e,i){function o(t){e.configureContext(t)}function n(t){e.configureStorage(t)}function r(t){d.DataSource.Activity=t,g.resolve(d.DataSource.Activity.getActivityDataSet()),S.resolve(d.DataSource.Activity.getSurveyDataSet())}function c(t){d.Model.ActivityFacadeService=t,y.resolve(d.Model.ActivityFacadeService)}function s(t){d.Model.ActivityPlayerService=t,m.resolve(d.Model.ActivityPlayerService)}function a(t){d.DataSource.User=t}function u(t){d.Model[t.OBJECT_TYPE]=t}function l(){return d.DataSource.Activity&&(g=t.defer(),g.resolve(d.DataSource.Activity.getActivityDataSet())),g.promise}function v(){return d.Model.ActivityFacadeService&&(y=t.defer(),y.resolve(d.Model.ActivityFacadeService)),y.promise}function f(){return d.Model.ActivityPlayerService&&(m=t.defer(),m.resolve(d.Model.ActivityPlayerService)),m.promise}function p(){return d.DataSource.Activity&&(S=t.defer(),S.resolve(d.DataSource.Activity.getSurveyDataSet())),S.promise}var d=this,g=t.defer(),S=t.defer(),y=t.defer(),m=t.defer();
d.DataSource={},d.Event=i,d.Model={},d.configureContext=o,d.configureStorage=n,d.configureActivityDataSourceService=r,d.configureActivityFacadeService=c,d.configureActivityPlayerService=s,d.configureUserDataSourceService=a,d.addModel=u,d.whenActivityDataSourceServiceReady=l,d.whenActivityFacadeServiceReady=v,d.whenActivityPlayerServiceReady=f,d.whenSurveyDataSourceServiceReady=p}angular.module("otusjs.activity.core").service("otusjs.activity.core.ModuleService",t),t.$inject=["$q","otusjs.activity.core.ContextService","otusjs.activity.core.EventService"]}(),function(){"use strict";function t(t){t.execute()}angular.module("otusjs.activity.core",[]).run(t),t.$inject=["otusjs.activity.core.ServiceLoader"]}(),function(){"use strict";function t(t){function e(){t.Service={},t.DataSource={}}var i=this;i.execute=e}angular.module("otusjs.activity.core").service("otusjs.activity.core.ServiceLoader",t),t.$inject=["otusjs.activity.core.ModuleService"]}(),function(){"use strict";angular.module("otusjs.activity.repository",[])}(),function(){"use strict";function t(){function t(t,e){n=t,r=e}function e(){return n}function i(){r.saveDatabase()}var o=this,n={},r=null;o.collectionName="activities",o.initialize=t,o.getCollection=e,o.save=i}angular.module("otusjs.activity.storage").service("otusjs.activity.storage.ActivityStorageService",t)}(),function(){"use strict";angular.module("otusjs.activity.storage",[])}(),function(){"use strict";function t(){function t(t,e){n=t,r=e}function e(){return n}function i(){r.saveDatabase()}var o=this,n={},r=null;o.collectionName="surveys",o.initialize=t,o.getCollection=e,o.save=i}angular.module("otusjs.activity.storage").service("otusjs.activity.storage.SurveyStorageService",t)}(),function(){"use strict";function t(t){function e(){v=!0}function i(){v=!0}function o(){v=!1}function n(){r()}function r(){if(!v)throw new Error("Does not exist a valid session.","dashboard-context-service.js",27)}function c(){return f.promise}function s(e){f=t.defer(),e&&f.resolve(e)}function a(){return p.promise}function u(e){p=t.defer(),e&&p.resolve(e)}var l=this,v=!1,f=t.defer(),p=t.defer();l.begin=e,l.restore=i,l.end=o,l.isValid=n,l.getSelectedParticipant=c,l.setSelectedParticipant=s,l.getLoggedUser=a,l.setLoggedUser=u}angular.module("otusjs.otus.dashboard.core").service("otusjs.otus.dashboard.core.ContextService",t),t.$inject=["$q"]}(),function(){"use strict";function t(){function t(t){c(a,t,a.length)}function e(t){a.push(t)}function i(t){c(u,t,u.length)}function o(t){u.push(t)}function n(t){c(l,t,l.length)}function r(t){l.push(t)}function c(t,e,i){for(var o=0;o<i;o++)t[o](e)}var s=this,a=[],u=[],l=[];s.fireParticipantSelected=t,s.onParticipantSelected=e,s.fireLogin=i,s.onLogin=o,s.fireLogout=n,s.onLogout=r}angular.module("otusjs.otus.dashboard.core").service("otusjs.otus.dashboard.core.EventService",t)}(),function(){"use strict";function t(t,e){function i(){t.restore()}var o=this;o.Event=e,o.recover=i}angular.module("otusjs.otus.dashboard.core").service("otusjs.otus.dashboard.core.ModuleService",t),t.$inject=["otusjs.otus.dashboard.core.ContextService","otusjs.otus.dashboard.core.EventService"]}(),function(){"use strict";angular.module("otusjs.otus.dashboard.core",[])}(),function(){"use strict";function t(t,e){function i(){return t.getSelectedParticipant()}function o(){return t.getLoggedUser()}var n=this;n.getSelectedParticipant=i,n.getLoggedUser=o}angular.module("otusjs.otus.dashboard.service").service("otusjs.otus.dashboard.service.DashboardService",t),t.$inject=["otusjs.otus.dashboard.core.ContextService","otusjs.otus.dashboard.core.EventService"]}(),function(){"use strict";angular.module("otusjs.otus.dashboard.service",[])}(),function(){"use strict";angular.module("otusjs.participant.business",[])}(),function(){"use strict";function t(){return function(t,e){return t.filter(function(t){var i=new RegExp(e,"gi");return i.test(t.name)||i.test(t.recruitmentNumber.toString())})}}angular.module("otusjs.participant.business").filter("participantQuick",t)}(),function(){"use strict";function t(t,e,i,o){function n(e){var i=o.listIdexers();l=e?t("participantQuick")(i,e):[]}function r(){return o.listIdexers()}function c(){return l}function s(){return l.length>0}function a(t){l=[],e.selectParticipant(t),i.fireParticipantSelected(t)}var u=this,l=[];u.filter=n,u.getAll=r,u.getFilteredData=c,u.hasResultFilter=s,u.selectParticipant=a}angular.module("otusjs.participant.business").service("otusjs.participant.business.ParticipantSearchService",t),t.$inject=["$filter","otusjs.participant.core.ContextService","otusjs.participant.core.EventService","otusjs.participant.repository.ParticipantRepositoryService"]}(),function(){"use strict";function t(t){function e(){c()}function i(){f(),t.fireParticipantSelected(s("selectedParticipant"))}function o(){m.removeItem(j)}function n(){if(p(),!r())throw new Error("There is no active participant context.","participant/context-service.js",56)}function r(){return!!m.getItem(j)}function c(){p(),m.setItem(j,y.toJson())}function s(t){return p(),y.getData(t)}function a(t,e){p(),y.setData(t,e),c()}function u(t){p(),y.removeData(t),c()}function l(t){y=t.create(j)}function v(t){m=t}function f(){n(),y.fromJson(m.getItem(j))}function p(){if(!y)throw new Error("Internal context is not initialized.");if(!m)throw new Error("Internal storage is not initialized.")}function d(t){a("selectedParticipant",t)}function g(){return y.getData("selectedParticipant")}var S=this,y=null,m=null,j="participant_context";S.begin=e,S.restore=i,S.end=o,S.isValid=n,S.hasContextActive=r,S.save=c,S.getData=s,S.setData=a,S.removeData=u,S.configureContext=l,S.configureStorage=v,S.selectParticipant=d,S.getSelectedParticipant=g}angular.module("otusjs.participant.core").service("otusjs.participant.core.ContextService",t),t.$inject=["otusjs.participant.core.EventService"]}(),function(){"use strict";function t(){function t(t){n(c,t,c.length)}function e(t){c.push(t)}function i(t){n(s,t,s.length)}function o(t){s.push(t)}function n(t,e,i){for(var o=0;o<i;o++)t[o](e)}var r=this,c=[],s=[];r.fireParticipantSelected=t,r.onParticipantSelected=e,r.fireLogout=i,r.onLogout=o}angular.module("otusjs.participant.core").service("otusjs.participant.core.EventService",t)}(),function(){"use strict";function t(t,e){function i(e){t.configureContext(e)}function o(e){t.configureStorage(e)}function n(t){r.DataSource.Participant=t}var r=this;r.DataSource={},r.Event=e,r.configureContext=i,r.configureStorage=o,r.configureParticipantDataSourceService=n}angular.module("otusjs.participant.core").service("otusjs.participant.core.ModuleService",t),t.$inject=["otusjs.participant.core.ContextService","otusjs.participant.core.EventService"]}(),function(){"use strict";function t(t){t.execute()}angular.module("otusjs.participant.core",[]).run(t),t.$inject=["otusjs.participant.core.ServiceLoader"]}(),function(){"use strict";function t(t){function e(){t.Service={},t.DataSource={}}var i=this;i.execute=e}angular.module("otusjs.participant.core").service("otusjs.participant.core.ServiceLoader",t),t.$inject=["otusjs.participant.core.ModuleService"]}(),function(){"use strict";angular.module("otusjs.participant.model",[])}(),function(){"use strict";function t(){function t(t){return new e(t)}function i(t){return new e(t)}var o=this;return o.OBJECT_TYPE="Participant",o.create=t,o.fromJsonObject=i,o}function e(t){t.id,t.name,t.surname,t.fieldCenter}angular.module("otusjs.participant.model").factory("otusjs.participant.model.Participant",t),t.$inject=[]}(),function(){"use strict";angular.module("otusjs.participant.repository",[])}(),function(){"use strict";function t(t){function e(){return o.listIndexers()}var i=this,o=t.DataSource.Participant;i.listIdexers=e}angular.module("otusjs.participant.repository").service("otusjs.participant.repository.ParticipantRepositoryService",t),t.$inject=["otusjs.participant.core.ModuleService"]}(),function(){"use strict";angular.module("otusjs.participant.storage",[])}(),function(){"use strict";function t(){function t(t,e){n=t,r=e}function e(){return n}function i(){r.saveDatabase()}var o=this,n={},r=null;o.collectionName="participants",o.initialize=t,o.getCollection=e,o.save=i}angular.module("otusjs.participant.storage").service("otusjs.participant.storage.ParticipantStorageService",t)}(),function(){"use strict";angular.module("otusjs.user.business",[])}(),function(){"use strict";function t(t){function e(e){return t.Proxy.LoginProxy.authenticate(e)}var i=this;i.authenticateUserData=e}angular.module("otusjs.user.business").service("otusjs.user.business.UserAuthenticationService",t),t.$inject=["otusjs.user.core.ModuleService"]}(),function(){"use strict";function t(t,e,i,o){function n(e){var i=o.listIdexers();l=e?t("userQuick")(i,e):[]}function r(){return o.listIdexers()}function c(){return l}function s(){return l.length>0}function a(t){l=[],e.selectUser(t),i.fireUserSelected(t)}var u=this,l=[];u.filter=n,u.getAll=r,u.getFilteredData=c,u.hasResultFilter=s,u.selectUser=a}angular.module("otusjs.user.business").service("otusjs.user.business.UserSearchService",t),t.$inject=["$filter","otusjs.user.core.ContextService","otusjs.user.core.EventService","otusjs.user.business.UserRepositoryService"]}(),function(){"use strict";function t(t){function e(){c()}function i(){f(),t.fireUserSelected(y.getData(h))}function o(){m.removeItem(j)}function n(){if(p(),!r())throw new Error("There is no active user context.","user/context-service.js",61)}function r(){return!!m.getItem(j)}function c(){p(),m.setItem(j,y.toJson())}function s(t){return p(),y.getData(t)}function a(t,e){p(),y.setData(t,e),c()}function u(t){p(),y.removeData(t),c()}function l(t){y=t.create(j)}function v(t){m=t}function f(){n(),y.fromJson(m.getItem(j))}function p(){if(!y)throw new Error("Internal context is not initialized.");if(!m)throw new Error("Internal storage is not initialized.")}function d(t){a("selectedUser",t)}function g(){return y.getData("selectedUser")}var S=this,y=null,m=null,j="user_context",h="selectedUser";S.begin=e,S.restore=i,S.end=o,S.isValid=n,S.hasContextActive=r,S.save=c,S.getData=s,S.setData=a,S.removeData=u,S.configureContext=l,S.configureStorage=v,S.selectUser=d,S.getSelectedUser=g}angular.module("otusjs.user.core").service("otusjs.user.core.ContextService",t),t.$inject=["otusjs.user.core.EventService"]}(),function(){"use strict";function t(){function t(t,e,i){for(var o=0;o<i;o++)t[o](e)}function e(e){t(f,e,f.length)}function i(t){f.push(t)}function o(e){t(v,e,v.length)}function n(t){v.push(t)}function r(e){t(p,e,p.length)}function c(t){p.push(t)}function s(e){t(d,e,d.length)}function a(t){d.push(t)}function u(e){t(v,e,v.length)}function n(t){v.push(t)}var l=this,v=[],f=[],p=[],d=[],v=[];l.fireUserIndexersLoaded=e,l.onUserIndexersLoaded=i,l.fireUsersResquet=o,l.onUserAuthentication=n,l.fireUserDataSourceProvided=r,l.onUserDataSourceProvided=c,l.fireLoginProxyProvided=s,l.onLoginProxyProvided=a,l.fireUserAuthentication=u,l.onUserAuthentication=n}angular.module("otusjs.user.core").service("otusjs.user.core.EventService",t)}(),function(){"use strict";function t(t,e){function i(e){t.configureContext(e)}function o(e){t.configureStorage(e)}function n(t){c.DataSource.User=t}function r(t){c.Proxy.LoginProxy=t,c.Proxy.LoginProxy.initialize()}var c=this;c.DataSource={},c.Proxy={},c.Service={},c.configureContext=i,c.configureStorage=o,c.configureUserDataSource=n,c.configureLoginProxy=r}angular.module("otusjs.user.core").service("otusjs.user.core.ModuleService",t),t.$inject=["otusjs.user.core.ContextService","otusjs.user.core.EventService"]}(),function(){"use strict";function t(t){t.execute()}angular.module("otusjs.user.core",[]).run(t),t.$inject=["otusjs.user.core.ServiceLoader"]}(),function(){"use strict";function t(t,e){function i(){t.Service={},t.Service.UserAuthenticationService={},t.Service.UserAuthenticationService.authenticateUserData=e.authenticateUserData}var o=this;o.execute=i}angular.module("otusjs.user.core").service("otusjs.user.core.ServiceLoader",t),t.$inject=["otusjs.user.core.ModuleService","otusjs.user.business.UserAuthenticationService"]}(),function(){"use strict";angular.module("otusjs.user.model",[])}(),function(){"use strict";function t(){function t(t){return new e(t)}function i(t){return new e(t)}var o=this;return o.OBJECT_TYPE="User",o.create=t,o.fromJsonObject=i,o}function e(t){t.id,t.uuid,t.name,t.surname,t.email,t.phone,t.token}angular.module("otusjs.user.model").factory("otusjs.user.model.User",t),t.$inject=[]}(),function(){"use strict";angular.module("otusjs.user.repository",[])}(),function(){"use strict";function t(t,e){function i(){return console.log(t.DataSource.User),[]}var o=this;o.listIdexers=i}angular.module("otusjs.user.business").service("otusjs.user.business.UserRepositoryService",t),t.$inject=["otusjs.user.core.ModuleService","otusjs.user.core.EventService"]}(),function(){"use strict";angular.module("otusjs.user.storage",[])}(),function(){"use strict";function t(){function t(t,e){n=t,r=e}function e(){return n}function i(){r.saveDatabase()}var o=this,n={},r=null;o.collectionName="users",o.initialize=t,o.getCollection=e,o.save=i}angular.module("otusjs.user.storage").service("otusjs.user.storage.UserStorageService",t)}(),function(){"use strict";function t(){function t(){a=!1}function e(){a=!0}function i(){a=!0}function o(){c()}function n(t){}function r(t){}function c(){if(a)throw new Error("Already exists an initialized session.","access-context-service.js",34)}var s=this,a=!1;s.isValid=o,s.begin=t,s.ignore=e,s.end=i,s.configureContext=n,s.configureStorage=r}angular.module("otusjs.user.access.core").service("otusjs.user.access.core.ContextService",t)}(),function(){"use strict";function t(){function t(t){n(c,t,c.length)}function e(t){c.push(t)}function i(t){n(s,t,s.length)}function o(t){s.push(t)}function n(t,e,i){for(var o=0;o<i;o++)t[o](e)}var r=this,c=[],s=[];r.fireLogin=t,r.onLogin=e,r.fireLogout=i,r.onLogout=o}angular.module("otusjs.user.access.core").service("otusjs.user.access.core.EventService",t)}(),function(){"use strict";function t(t,e){function i(e){t.configureContext(e)}function o(e){t.configureStorage(e)}function n(){t.ignore()}function r(t){e.onLogin(t)}function c(t){e.onLogout(t)}var s=this;s.configureContext=i,s.configureStorage=o,s.ignore=n,s.onLogin=r,s.onLogout=c}angular.module("otusjs.user.access.core").service("otusjs.user.access.core.ModuleService",t),t.$inject=["otusjs.user.access.core.ContextService","otusjs.user.access.core.EventService"]}(),function(){"use strict";function t(t){t.Service={},t.DataSource={}}angular.module("otusjs.user.access.core",[]).run(t),t.$inject=["otusjs.user.access.core.ModuleService"]}(),function(){"use strict";function t(t,e){function i(i){return e.Service.Authentication.authenticateUserData(i).then(function(e){e.hasErrors||t.fireLogin(e.data)})}var o=this;o.authenticate=i}angular.module("otusjs.user.access.service").service("otusjs.user.access.service.LoginService",t),t.$inject=["otusjs.user.access.core.EventService","otusjs.user.access.core.ModuleService"]}(),function(){"use strict";function t(t){function i(){o()}function o(){t.show({controller:e,templateUrl:"app/ux-component/user-logout/logout-dialog.html",clickOutsideToClose:!0})}var n=this;n.logout=i}function e(t,e,i,o){t.hide=function(){e.hide()},t.cancel=function(){e.cancel()},t.answer=function(){o.logout().then(function(){e.hide(),i.activateLogin()})}}function i(t,e){function i(){return t.invalidate().then(function(){e.fireLogout()})}var o=this;o.logout=i}angular.module("otusjs.user.access.service").service("otusjs.user.access.service.LogoutService",t),t.$inject=["$mdDialog"],e.$inject=["$scope","$mdDialog","otusjs.application.state.ApplicationStateService","otusjs.user.access.service.LogoutServiceService"],angular.module("otusjs.user.access.service").service("otusjs.user.access.service.LogoutServiceService",i),i.$inject=["otusjs.deploy.AuthenticationRestService","otusjs.user.access.core.EventService"]}(),function(){"use strict";angular.module("otusjs.user.access.service",[])}(),function(){"use strict";function t(t,e){function i(i){var o=e.getUserResource(),n=t.defer();return o.create(i,function(t){t.hasErrors?n.reject(t):n.resolve(t)}),n.promise}var o=this;o.executeSignup=i}angular.module("otusjs.user.access.service").service("otusjs.user.access.service.SignupService",t),t.$inject=["$q","OtusRestResourceService"]}(),function(){"use strict";function t(t){function e(){t.activateLogin()}var i=this;i.tryAgain=e}angular.module("otusjs.application.http").controller("otusjs.application.http.ResponseErrorOfflineController",t),t.$inject=["otusjs.application.state.ApplicationStateService"]}(),function(){"use strict";function t(t,e){function i(){s=t.getActivityResource()}function o(t){if(!s)throw new Error("REST resource is not initialized.");return s.update(t).$promise}function n(){return e.get("app/deploy/data-source/file/activities.json")}function r(t){if(!s)throw new Error("REST resource is not initialized.");return s.remove(t).$promise}var c=this,s=null;c.initialize=i,c.update=o,c.list=n,c.remove=r}angular.module("otusjs.deploy").service("otusjs.deploy.ActivityRestService",t),t.$inject=["OtusRestResourceService","$http"]}(),function(){"use strict";function t(t){function e(){n=t.getProjectConfigurationResource()}function i(){if(!n)throw new Error("REST resource is not initialized.");return n.getSurveys().$promise}var o=this,n=null;o.initialize=e,o.getSurveys=i}angular.module("otusjs.deploy").service("otusjs.deploy.ProjectConfigurationRestService",t),t.$inject=["OtusRestResourceService"]}(),function(){"use strict";function t(t){function e(){c=t.getOtusInstallerResource()}function i(t){if(!c)throw new Error("REST resource is not initialized.");c.ready(t)}function o(t){if(!c)throw new Error("REST resource is not initialized.");c.config(t)}function n(t){if(!c)throw new Error("REST resource is not initialized.");return c.validateEmail(t).$promise}var r=this,c=null;r.initialize=e,r.ready=i,r.config=o,r.validateEmail=n}angular.module("otusjs.deploy").service("otusjs.deploy.InstallerRestService",t),t.$inject=["OtusRestResourceService"]}(),function(){"use strict";function t(t){function e(){n=t.getParticipantResource()}function i(){if(!n)throw new Error("REST resource is not initialized.");return n.list().$promise}var o=this,n=null;o.initialize=e,o.listIdexers=i}angular.module("otusjs.deploy").service("otusjs.deploy.ParticipantRestService",t),t.$inject=["OtusRestResourceService"]}(),function(){"use strict";function t(t){function e(){o=t.getSurveyResource()}var i=this,o=null;i.initialize=e}angular.module("otusjs.deploy").service("otusjs.deploy.SurveyRestService",t),t.$inject=["OtusRestResourceService"]}(),function(){"use strict";function t(t){function e(){c=t.getOtusAuthenticatorResource()}function i(t){if(!c)throw new Error("REST resource is not initialized.");return c.authenticate(t).$promise}function o(t){if(!c)throw new Error("REST resource is not initialized.");return c.authenticate(t).$promise}function n(){if(!c)throw new Error("REST resource is not initialized.");return c.invalidate().$promise}var r=this,c=null;r.initialize=e,r.authenticate=i,r.authenticateProject=o,r.invalidate=n}angular.module("otusjs.deploy").service("otusjs.deploy.AuthenticationRestService",t),t.$inject=["OtusRestResourceService"]}(),function(){"use strict";function t(t){function e(){u=t.getUserResource()}function i(t){if(!u)throw new Error("REST resource is not initialized.");return u.create(t).$promise}function o(t){if(!u)throw new Error("REST resource is not initialized.");return u.logged(t).$promise}function n(){if(!u)throw new Error("REST resource is not initialized.");return u.list().$promise}function r(){if(!u)throw new Error("REST resource is not initialized.");return u.list().$promise}function c(t){if(!u)throw new Error("REST resource is not initialized.");return u.enable(t).$promise}function s(t){if(!u)throw new Error("REST resource is not initialized.");return u.disable(t).$promise}var a=this,u=null;a.initialize=e,a.create=i,a.logged=o,a.list=n,a.listIdexers=r,a.enable=c,a.disable=s,a.listIdexers=r}angular.module("otusjs.deploy").service("otusjs.deploy.UserRestService",t),t.$inject=["OtusRestResourceService"]}(),function(){"use strict";function t(t){function e(t){t.length>0&&a(function(e){console.log(t),e.getData().insert(t)})}function i(){return a(function(t){return v?t.getData().where(u):t.getData().find()})}function o(t){a(function(e){t.forEach(function(t){e.getData().remove(t)})})}function n(t){a(function(e){e.getData().update(t)})}function r(){a(function(t){t.save()})}function c(t){v=t}function s(){v=null}function a(e){return t.whenActivityDataSourceServiceReady().then(e)}function u(t){return t.participantData.recruitmentNumber===v.recruitmentNumber}var l=this,v=null;l.insert=e,l.listAll=i,l.remove=o,l.update=n,l.save=r,l.useParticipant=c,l.resetParticipantInUse=s}angular.module("otusjs.activity.repository").service("otusjs.activity.repository.ActivityCollectionService",t),t.$inject=["otusjs.activity.core.ModuleService"]}(),function(){"use strict";function t(t,e,i,o){function n(t,e,i){c(t,e,i)}function r(t,e,i,o){c(t,e,i,o)}function c(e,o,n,r){t.whenActivityFacadeServiceReady().then(function(t){var c=e.map(function(e){var i=t.createActivity(e,o,n,r);return JSON.parse(i.toJson())});i.insert(c),i.save()})}function s(t){return i.useParticipant(t),i.listAll().then(v)}function a(){return o.listAll().then(v)}function u(t){var e=JSON.parse(t.toJson());e.$loki=t.$loki,e.meta=t.meta,i.update(e),i.save()}function l(t){i.remove(t),i.save()}function v(t){return Array.isArray(t)?t.map(function(t){return f(t)}):f(data)}function f(e){var i=null;return i=e.hasOwnProperty("surveyFormType")?t.Model.SurveyForm.fromJsonObject(e):t.Model[e.objectType].fromJsonObject(e),i.$loki=e.$loki,i.meta=e.meta,i}var p=this;p.createFromSurvey=n,p.createFromPaperActivity=r,p.listAll=s,p.listAvailables=a,p.save=u,p.remove=l}angular.module("otusjs.activity.repository").service("otusjs.activity.repository.ActivityRepositoryService",t),t.$inject=["otusjs.activity.core.ModuleService","otusjs.activity.core.ContextService","otusjs.activity.repository.ActivityCollectionService","otusjs.activity.repository.SurveyCollectionService"]}(),function(){"use strict";function t(t){function e(){return i(function(t){return t.getData().find()})}function i(e){return t.whenSurveyDataSourceServiceReady().then(e)}var o=this;o.listAll=e}angular.module("otusjs.activity.repository").service("otusjs.activity.repository.SurveyCollectionService",t),t.$inject=["otusjs.activity.core.ModuleService"]}(),function(){"use strict";function t(t,e,i,o){function n(){return e.DataSource.User.listIndexers()}var r=this;r.listAll=n}angular.module("otusjs.activity.repository").service("otusjs.activity.repository.UserRepositoryService",t),t.$inject=["$q","otusjs.activity.core.ModuleService","otusjs.activity.core.ContextService","otusjs.activity.core.EventService"]}();