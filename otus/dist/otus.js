!function(){angular.module("otus",["dependencies","otus.installer"])}(),function(){angular.module("dependencies",["ngMaterial","ngMessages","ngAnimate","ui.router","lokijs","indexedDB"])}(),function(){function e(e){e.formatDate=function(e){return moment(e).format("DD/MM/YYYY")},e.parseDate=function(e){var t=moment(e,"DD/MM/YYYY",!0);return t.isValid()?t.toDate():new Date(NaN)}}angular.module("otus").config(["$mdDateLocaleProvider",e])}(),function(){function e(e,t,n){e.state("installer",{url:"/installer",views:{"system-wrap":{templateUrl:"app/installer/initial/initial-config.html",controller:"InitialConfigController",controllerAs:"controller"}}}).state("login",{url:"/login",views:{"system-wrap":{templateUrl:"app/authenticator/login.html"}}}).state("home",{url:"/home",views:{"system-wrap":{templateUrl:"app/home/main-home-content-template.html"}}}),t.otherwise("/login"),n.html5Mode(!0)}angular.module("otus").config(["$stateProvider","$urlRouterProvider","$locationProvider",e]).constant("APP_STATE",{HOME:"home",INSTALLER:"installer",LOGIN:"login"})}(),function(){function e(e,t){e.theme("layoutTheme").primaryPalette("cyan",{"default":"900","hue-1":"400"}).accentPalette("blue-grey",{"default":"900","hue-1":"50"}).warnPalette("red"),t.defaultIconSet("app/assets/img/icons/mdi.svg",24)}angular.module("otus").config(["$mdThemingProvider","$mdIconProvider",e])}(),function(){"use strict";angular.module("otus.installer",[])}(),function(){"use strict";function e(e){function t(e){}var n=this;n.register=t}angular.module("otus.installer").controller("InitialConfigController",e)}(),function(){"use strict";var e=[].slice;angular.module("indexedDB",[]).provider("$indexedDB",function(){var t,n,r,o,i,u,s,a,c,l,p,f,h,d,y,g;d=window.indexedDB||window.mozIndexedDB||window.webkitIndexedDB||window.msIndexedDB,t=window.IDBKeyRange||window.mozIDBKeyRange||window.webkitIDBKeyRange||window.msIDBKeyRange,a={readonly:"readonly",readwrite:"readwrite"},y={pending:"pending"},u={next:"next",nextunique:"nextunique",prev:"prev",prevunique:"prevunique"},r={ascending:u.next,descending:u.prev},c="",p=1,s=null,g={},l=null,n=[],f={useIndex:void 0,keyRange:null,direction:u.next},i=function(e,t,n,r,o){var i;for(i in g)!g.hasOwnProperty(i)||e>=i||(o.log("$indexedDB: Running upgrade : "+i+" from "+e),g[i](t,n,r))},h=function(e){return e.target.readyState===y.pending?"Error: Operation pending":e.target.webkitErrorMessage||e.target.error.message||e.target.errorCode},o=function(e,t){return void 0!==t?e.then(function(){return t}):e},this.connection=function(e){return c=e,this},this.upgradeDatabase=function(e,t){return g[e]=t,p=Math.max.apply(null,Object.keys(g)),this},this.$get=["$q","$rootScope","$log",function(y,g,m){var v,w,b,$,x,D,j,k,B,I,A,R;return A=function(e){return function(t){return g.$apply(function(){return e.reject(h(t))})}},j=function(){var e,t;return t=y.defer(),e=d.open(c,parseInt(p)||1),e.onsuccess=function(){s=e.result,g.$apply(function(){t.resolve(s)})},e.onblocked=e.onerror=A(t),e.onupgradeneeded=function(e){var t;s=e.target.result,t=e.target.transaction,m.log("$indexedDB: Upgrading database '"+s.name+"' from version "+e.oldVersion+" to version "+e.newVersion+" ..."),i(e.oldVersion,e,s,t,m)},t.promise},B=function(){return l||(l=j())},D=function(){return B().then(function(){return s.close(),s=null,l=null})},R=function(e){var t,n,r,o;for(t=!0,r=0,o=e.length;o>r;r++)n=e[r],t&=s.objectStoreNames.contains(n);return t},I=function(e,t){return null==t&&(t=a.readonly),B().then(function(){return R(e)?new $(e,t):y.reject("Object stores "+e+" do not exist.")})},k=function(e){return e.beginKey&&e.endKey?t.bound(e.beginKey,e.endKey):void 0},x=function(e){return n.push(e.promise),e.promise["finally"](function(){var t;return t=n.indexOf(e.promise),t>-1?n.splice(t,1):void 0})},$=function(){function e(e,t){null==t&&(t=a.readonly),this.transaction=s.transaction(e,t),this.defer=y.defer(),this.promise=this.defer.promise,this.setupCallbacks()}return e.prototype.setupCallbacks=function(){return this.transaction.oncomplete=function(e){return function(){return g.$apply(function(){return e.defer.resolve("Transaction Completed")})}}(this),this.transaction.onabort=function(e){return function(t){return g.$apply(function(){return e.defer.reject("Transaction Aborted",t)})}}(this),this.transaction.onerror=function(e){return function(t){return g.$apply(function(){return e.defer.reject("Transaction Error",t)})}}(this),x(this)},e.prototype.objectStore=function(e){return this.transaction.objectStore(e)},e.prototype.abort=function(){return this.transaction.abort()},e}(),v=function(){function t(){this.q=y.defer(),this.promise=this.q.promise}return t.prototype.reject=function(){var t;return t=1<=arguments.length?e.call(arguments,0):[],g.$apply(function(e){return function(){var n;return(n=e.q).reject.apply(n,t)}}(this))},t.prototype.rejectWith=function(e){return e.onerror=e.onblocked=function(e){return function(t){return e.reject(h(t))}}(this)},t.prototype.resolve=function(){var t;return t=1<=arguments.length?e.call(arguments,0):[],g.$apply(function(e){return function(){var n;return(n=e.q).resolve.apply(n,t)}}(this))},t.prototype.notify=function(){var t;return t=1<=arguments.length?e.call(arguments,0):[],g.$apply(function(e){return function(){var n;return(n=e.q).notify.apply(n,t)}}(this))},t.prototype.dbErrorFunction=function(){return function(e){return function(t){return g.$apply(function(){return e.q.reject(h(t))})}}(this)},t.prototype.resolveWith=function(e){return this.rejectWith(e),e.onsuccess=function(e){return function(t){return e.resolve(t.target.result)}}(this)},t}(),w=function(){function e(e,t){this.storeName=e,this.store=t.objectStore(e),this.transaction=t}return e.prototype.defer=function(){return new v},e.prototype._mapCursor=function(e,t,n){var r;return null==n&&(n=this.store.openCursor()),r=[],e.rejectWith(n),n.onsuccess=function(n){var o;return(o=n.target.result)?(r.push(t(o)),e.notify(t(o)),o["continue"]()):e.resolve(r)}},e.prototype._arrayOperation=function(e,t){var n,r,o,i,u,s;for(n=this.defer(),angular.isArray(e)||(e=[e]),u=0,s=e.length;s>u;u++)r=e[u],o=t(r),i=[],n.rejectWith(o),o.onsuccess=function(t){return i.push(t.target.result),n.notify(t.target.result),i.length>=e.length?n.resolve(i):void 0};return 0===e.length?y.when([]):n.promise},e.prototype.getAllKeys=function(){var e,t;return e=this.defer(),this.store.getAllKeys?(t=this.store.getAllKeys(),e.resolveWith(t)):this._mapCursor(e,function(e){return e.key}),e.promise},e.prototype.clear=function(){var e,t;return e=this.defer(),t=this.store.clear(),e.resolveWith(t),e.promise},e.prototype["delete"]=function(e){var t;return t=this.defer(),t.resolveWith(this.store["delete"](e)),t.promise},e.prototype.upsert=function(e){return this._arrayOperation(e,function(e){return function(t){return e.store.put(t)}}(this))},e.prototype.insert=function(e){return this._arrayOperation(e,function(e){return function(t){return e.store.add(t)}}(this))},e.prototype.getAll=function(){var e;return e=this.defer(),this.store.getAll?e.resolveWith(this.store.getAll()):this._mapCursor(e,function(e){return e.value}),e.promise},e.prototype.eachWhere=function(e){var t,n,r,o,i;return t=this.defer(),r=e.indexName,o=e.keyRange,n=e.direction,i=r?this.store.index(r).openCursor(o,n):this.store.openCursor(o,n),this._mapCursor(t,function(e){return e.value},i),t.promise},e.prototype.findWhere=function(e){return this.eachWhere(e)},e.prototype.each=function(e){return null==e&&(e={}),this.eachBy(void 0,e)},e.prototype.eachBy=function(e,t){var n;return null==e&&(e=void 0),null==t&&(t={}),n=new b,n.indexName=e,n.keyRange=k(t),n.direction=t.direction||f.direction,this.eachWhere(n)},e.prototype.count=function(){var e;return e=this.defer(),e.resolveWith(this.store.count()),e.promise},e.prototype.find=function(e){var t,n;return t=this.defer(),n=this.store.get(e),t.rejectWith(n),n.onsuccess=function(n){return function(r){return r.target.result?t.resolve(r.target.result):t.reject(""+n.storeName+":"+e+" not found.")}}(this),t.promise},e.prototype.findBy=function(e,t){var n;return n=this.defer(),n.resolveWith(this.store.index(e).get(t)),n.promise},e.prototype.query=function(){return new b},e}(),b=function(){function e(){this.indexName=void 0,this.keyRange=void 0,this.direction=u.next}return e.prototype.$lt=function(e){return this.keyRange=t.upperBound(e,!0),this},e.prototype.$gt=function(e){return this.keyRange=t.lowerBound(e,!0),this},e.prototype.$lte=function(e){return this.keyRange=t.upperBound(e),this},e.prototype.$gte=function(e){return this.keyRange=t.lowerBound(e),this},e.prototype.$eq=function(e){return this.keyRange=t.only(e),this},e.prototype.$between=function(e,n,r,o){return null==r&&(r=!1),null==o&&(o=!1),this.keyRange=t.bound(e,n,r,o),this},e.prototype.$desc=function(e){return this.direction=e?u.prevunique:u.prev,this},e.prototype.$asc=function(e){return this.direction=e?u.nextunique:u.next,this},e.prototype.$index=function(e){return this.indexName=e,this},e}(),{openStore:function(e,t,n){return null==n&&(n=a.readwrite),I([e],n).then(function(n){var r;return r=t(new w(e,n)),o(n.promise,r)})},openStores:function(e,t,n){return null==n&&(n=a.readwrite),I(e,n).then(function(n){var r,i,u;return r=function(){var t,r,o;for(o=[],t=0,r=e.length;r>t;t++)u=e[t],o.push(new w(u,n));return o}(),i=t.apply(null,r),o(n.promise,i)})},openAllStores:function(e,t){return null==t&&(t=a.readwrite),B().then(function(n){return function(){var n,r,i,u,a;return u=Array.prototype.slice.apply(s.objectStoreNames),a=new $(u,t),n=function(){var e,t,n;for(n=[],e=0,t=u.length;t>e;e++)i=u[e],n.push(new w(i,a));return n}(),r=e.apply(null,n),o(a.promise,r)}}(this))},closeDatabase:function(){return D()},deleteDatabase:function(){return D().then(function(){var e;return e=new v,e.resolveWith(d.deleteDatabase(c)),e.promise})["finally"](function(){return m.log("$indexedDB: "+c+" database deleted.")})},queryDirection:r,flush:function(){return n.length>0?y.all(n):y.when([])},databaseInfo:function(){return B().then(function(){var e,t;return t=null,e=Array.prototype.slice.apply(s.objectStoreNames),I(e,a.readonly).then(function(t){var n,r,o;return o=function(){var o,i,u;for(u=[],o=0,i=e.length;i>o;o++)r=e[o],n=t.objectStore(r),u.push({name:r,keyPath:n.keyPath,autoIncrement:n.autoIncrement,indices:Array.prototype.slice.apply(n.indexNames)});return u}(),t.promise.then(function(){return{name:s.name,version:s.version,objectStores:o}})})})}}}]})}.call(this);