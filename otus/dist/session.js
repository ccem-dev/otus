!function(){"use strict";angular.module("otusjs.otus.session",["otusjs.otus.session.core"])}(),function(){"use strict";angular.module("otusjs.otus.session.core").constant("CONTEXT_DATA",{USER_SESSION:"userSession",APPLICATION_CONTEXT:"applicationContext",PARTICIPANT_CONTEXT:"participantContext",ACTIVITY_CONTEXT:"activityContext",SESSION_CONTEXT:"sessionContext",STUDY_CONTEXT:"studyContext"})}(),function(){"use strict";function t(t){function e(e){I=e.token,a(N.getScope().$new()),C(t.USER_SESSION,e)}function n(){I=E.getItem("outk"),a(N.getScope().$new()),O.context=JSON.parse(E.getItem(t.SESSION_CONTEXT))}function o(){I=null,O=null,E.removeItem("outk"),E.removeItem(t.SESSION_CONTEXT),x.studyContextService.end(),x.participantContextService.end(),x.activityContextService.end()}function s(){return!!c()}function i(t){E=t}function u(t){N=t,N.sessionContextService=x}function c(){return I=I||E.getItem("outk")}function r(){return O}function a(e){O=e,O.name=t.SESSION_CONTEXT,O.context={}}function S(t,e){O&&O.$broadcast(t,e)}function l(t){var e=O.$on(t,function(t,n){S("$siblings.".concat(t.name),n),t.stopPropagation(),e()})}function T(t,e){O.$on(t,e)}function f(t){return O&&O.context?O.context[t]:null}function C(t,e){O&&O.context&&(O.context[t]=e,v())}function d(t){O&&(delete O.context[t],v())}function v(){E.setItem("outk",I),E.setItem("sessionContext",JSON.stringify(O.context))}var x=this,E=null,N=null,O=null,I=null;x.CONTEXT_DATA=t,x.begin=e,x.restore=n,x.end=o,x.isValid=s,x.configureStorage=i,x.setParent=u,x.getScope=r,x.setScope=a,x.broadcast=S,x.handleChildEvent=l,x.onEvent=T,x.getData=f,x.setData=C,x.removeData=d,x.save=v,x.getToken=c}angular.module("otusjs.otus.session.core").service("otusjs.application.session.core.ContextService",t),t.$inject=["CONTEXT_DATA"]}(),function(){"use strict";angular.module("otusjs.otus.session.core",[])}(),function(){"use strict";function t(t){function e(){return i}function n(t){t.isValid()&&t.restore()}function o(e){if(!e.isValid())return t.LOGIN}function s(t){t.isValid()||t.end()}var i=this;i.$get=[e],i.state={"abstract":!0,name:t.SESSION,template:'<div flex layout="column"><div flex layout="row" ui-view></div></div>',data:{redirect:o},resolve:{loadContext:n},onExit:s},n.$inject=["otusjs.application.session.core.ContextService"],o.$inject=["otusjs.application.session.core.ContextService"],s.$inject=["otusjs.application.session.core.ContextService"]}angular.module("otusjs.otus.application.state").provider("otusjs.otus.application.state.SessionState",t),t.$inject=["STATE"]}();