!function(){"use strict";angular.module("otusjs.otus",["otusjs.activity","otusjs.participant","otusjs.user","otusjs.user.access","otusjs.otus.installer","otusjs.otus.laboratory","otusjs.otus.dashboard","otusjs.otus.uxComponent","otusjs.application","otusjs.deploy"])}(),function(){"use strict";angular.module("otusjs.application",["otusjs.application.dependency","otusjs.application.environment","otusjs.application.storage","otusjs.application.session","otusjs.application.context","otusjs.application.core","otusjs.application.state","otusjs.application.http","otusjs.application.locale","otusjs.application.theme"]).run(function(){console.info("Application module ready.")})}(),function(){"use strict";function t(t,o,n,r){n.initializeOpenResources(),e(o).then(function(){r.run(),i(t)})}function e(t){var e="otus";return t.initializeSessionStorage(),t.dbExists(e).then(function(i){return i?t.loadIndexedStorage(e):t.createIndexedStorage(e)})}function i(t){var e=angular.module("otusjs.deploy"),i=t.get("otusjs.application.core.ModuleService");i.notifyModuleLoad(e.name),i.finalizeDeploy(),console.info("Deploy module ready.")}angular.module("otusjs.deploy",["otus.client","otus.domain.client","otusjs","otusjs.player.core","otusjs.player.component","otusjs.labelMaker.setupView","otusjs.labelMaker.dataBuilder","otusjs.labelMaker.labelBuilder","otusjs.labelMaker.labelPage"]).value("OtusLocalStorage",["otusjs.activity.storage.ActivityLocalStorageService","otusjs.laboratory.storage.ParticipantLaboratoryLocalStorageService","otusjs.activity.storage.SurveyStorageService","otusjs.participant.storage.ParticipantStorageService","otusjs.user.storage.UserStorageService"]).run(t),t.$inject=["$injector","otusjs.deploy.StorageLoaderService","otusjs.deploy.OtusApiService","otusjs.deploy.BootstrapService"]}(),angular.module("passwordControl",[]).directive("stPassword",function(){return{require:"ngModel",restrict:"A",link:function(t,e,i,o){var n=/(?=.*\d)(?=.*[a-z])(?=.*[A-Z])/;t.$watch(function(){return o.$modelValue},function(t){n.test(t)&&t.length>=6&&t.length<=32?o.$setValidity("passwordPattern",!0):o.$setValidity("passwordPattern",!1)})}}}).directive("stPasswordMatch",function(){return{require:"ngModel",restrict:"A",scope:{stPasswordMatch:"="},link:function(t,e,i,o){function n(t,e){t!==e?o.$setValidity("passwordMatch",!1):o.$setValidity("passwordMatch",!0)}t.$watch(function(){return t.stPasswordMatch},function(t){n(t,o.$modelValue)}),t.$watch(function(){return o.$modelValue},function(e){n(t.stPasswordMatch,e)})}}}),function(){"use strict";angular.module("otusjs.otus.uxComponent",[])}(),function(){"use strict";function t(){function t(t){return new e(t)}var i=this;return i.create=t,i}function e(t){function e(){return l}function i(t){return f[t]}function o(t,e){f[t]=e}function n(t){delete f[t]}function r(){f={}}function s(){return JSON.stringify(f)}function c(t){f=JSON.parse(t)||{}}function a(){return _context}var u=this,l=t,f={};u.getName=e,u.getData=i,u.setData=o,u.removeData=n,u.clear=r,u.toJson=s,u.fromJson=c,u.toObject=a}angular.module("otusjs.application.context").factory("otusjs.application.context.ContextFactory",t)}(),function(){"use strict";angular.module("otusjs.application.context",[]).run(function(t){var e=angular.module("otusjs.application.context");t.get("otusjs.application.core.ModuleService").notifyModuleLoad(e.name),console.info("Context module ready.")})}(),function(){"use strict";function t(t){function e(){r()}function i(){v(),f()}function o(){h.removeItem(A)}function n(){v()}function r(){v(),h.setItem(A,m.toJson())}function s(t){return v(),m.getData(t)}function c(t,e){v(),m.setData(t,e),r()}function a(t){v(),m.removeData(t),r()}function u(t){m=t.create(A)}function l(t){h=t}function f(){v(),m.fromJson(h.getItem(A))}function v(){if(!m)throw new Error("Internal context is not initialized.","application-context-service.js",159);if(!h)throw new Error("Internal storage is not initialized.","application-context-service.js",165)}function d(){return b.promise}function p(e){b=t.defer(),e&&b.resolve(e)}function g(){return s("selectedActivities")}function y(){c("selectedActivities",[])}function S(t){c("selectedActivities",t)}var j=this,m=null,h=null,A="application_context",b=null;j.begin=e,j.restore=i,j.end=o,j.isValid=n,j.save=r,j.configureContext=u,j.configureStorage=l,j.getData=s,j.setData=c,j.removeData=a,j.getSelectedParticipant=d,j.setSelectedParticipant=p,j.selectActivities=S,j.getSelectedActivities=g,j.clearSelectedActivities=y}angular.module("otusjs.application.core").service("otusjs.application.core.ContextService",t),t.$inject=["$q"]}(),function(){"use strict";function t(t,e,i){function o(t){l.push(t)}function n(t){e.configureContext(t)}function r(t){e.configureStorage(t)}function s(){return f?v.resolve():v=t.defer(),v.promise}function c(){f=!0,v.resolve()}function a(){e.begin()}var u=this,l=[],f=!1,v=t.defer();u.notifyModuleLoad=o,u.configureContext=n,u.configureStorage=r,u.isDeployed=s,u.finalizeDeploy=c,u.begin=a}angular.module("otusjs.application.core").service("otusjs.application.core.ModuleService",t),t.$inject=["$q","otusjs.application.core.ContextService"]}(),function(){"use strict";angular.module("otusjs.application.core",[]).run(function(t){var e=angular.module("otusjs.application.core");t.get("otusjs.application.core.ModuleService").notifyModuleLoad(e.name),console.info("Core module ready.")})}(),function(){"use strict";angular.module("otusjs.application.dependency",["ngMaterial","ngMessages","ngAnimate","ui.router","ui.mask","passwordControl","angular-bind-html-compile"]).run(function(t){var e=angular.module("otusjs.application.dependency");t.get("otusjs.application.core.ModuleService").notifyModuleLoad(e.name),console.info("Dependency module ready.")})}(),function(t){"use strict";t.__env=t.__env||{},t.__env.apiUrl="http://api-otus.localhost:8080"}(this),function(){"use strict";function t(t,e,i){var o=t.__env;e.setUrl(o.apiUrl)}angular.module("otusjs.application.environment").run(t),t.$inject=["$window","OtusRestResourceService"]}(),function(){"use strict";angular.module("otusjs.application.environment",[]).run(function(t){var e=angular.module("otusjs.application.environment");t.get("otusjs.application.core.ModuleService").notifyModuleLoad(e.name),console.info("Environment module ready.")})}(),function(){"use strict";angular.module("otusjs.application.http",[]).run(function(t){var e=angular.module("otusjs.application.http");t.get("otusjs.application.core.ModuleService").notifyModuleLoad(e.name),console.info("Http module ready.")})}(),function(){"use strict";function t(t){t.formatDate=function(t){return"[object Date]"!==Object.prototype.toString.call(t)?null:t.getDate()+"/"+(t.getMonth()+1)+"/"+t.getFullYear()},t.parseDate=function(t){var e=new Date(t);if("[object Date]"!==Object.prototype.toString.call(e))return e;var i=t.split("/");return 3===i.length?e=new Date(i[2],i[1]-1,i[0]):void 0}}angular.module("otusjs.application.locale").config(t),t.$inject=["$mdDateLocaleProvider"]}(),function(){"use strict";angular.module("otusjs.application.locale",[]).run(function(){console.info("Locale module ready.")})}(),function(){"use strict";function t(t,e,i){e.onLogin(i.begin),e.onLogout(i.end);var o=angular.module("otusjs.application.session");t.get("otusjs.application.core.ModuleService").notifyModuleLoad(o.name),console.info("Session module ready.")}angular.module("otusjs.application.session",["otusjs.application.session.core"]).run(t),t.$inject=["$injector","otusjs.application.session.core.EventService","otusjs.application.session.core.ContextService"]}(),function(){"use strict";function t(t,e,i){t.$on("$stateChangeStart",function(t,o,n){o.data&&o.data.redirect&&e.invoke(o.data.redirect).then(function(e){t.preventDefault(),e&&i.go(e)})}),t.$on("$stateChangeError",function(t,e,o,n,r,s){t.preventDefault(),console.error(s.message),s.redirectTo?i.go(s.redirectTo):i.go("error",{status:s.status})});var o=angular.module("otusjs.application.state");e.get("otusjs.application.core.ModuleService").notifyModuleLoad(o.name),console.info("State module ready.")}angular.module("otusjs.application.state",[]).run(t),t.$inject=["$rootScope","$injector","$state"]}(),function(){"use strict";angular.module("otusjs.application.storage",["lokijs"]).run(function(t){var e=angular.module("otusjs.application.storage");t.get("otusjs.application.core.ModuleService").notifyModuleLoad(e.name),console.info("Storage module ready.")})}(),function(){"use strict";angular.module("otusjs.application.theme",[]).run(function(t){var e=angular.module("otusjs.application.theme");t.get("otusjs.application.core.ModuleService").notifyModuleLoad(e.name),console.info("Theme module ready.")})}(),function(){"use strict";function t(t,e){t.theme("default").primaryPalette("teal",{default:"700","hue-1":"500","hue-2":"600","hue-3":"800"}).accentPalette("light-blue",{default:"A700","hue-2":"A100","hue-3":"A400"}).warnPalette("red",{default:"A200","hue-2":"A100","hue-3":"A400"}).backgroundPalette("grey"),e.defaultIconSet("app/static-resource/image/icons/mdi.svg",24)}angular.module("otusjs.application.theme").config(t),t.$inject=["$mdThemingProvider","$mdIconProvider"]}(),function(){"use strict";function t(t,e,i){i.onLogin(e.setLoggedUser),i.onLogout(e.end),i.onParticipantSelected(e.setSelectedParticipant),i.onParticipantSelected(e.begin)}angular.module("otusjs.activity",["otusjs.activity.core","otusjs.activity.business","otusjs.activity.repository","otusjs.activity.storage"]).run(t),t.$inject=["otusjs.activity.core.ModuleService","otusjs.activity.core.ContextService","otusjs.activity.core.EventService"]}(),function(){"use strict";function t(t,e){t.onLogin(e.begin),t.onLogin(e.setLoggedUser),t.onLogout(e.end),t.onParticipantSelected(e.setSelectedParticipant)}angular.module("otusjs.otus.dashboard",["otusjs.otus.dashboard.core","otusjs.otus.dashboard.service"]).run(t),t.$inject=["otusjs.otus.dashboard.core.EventService","otusjs.otus.dashboard.core.ContextService"]}(),function(){"use strict";angular.module("otusjs.otus.installer",[])}(),function(){"use strict";function t(t,e,i){i.onParticipantSelected(e.setSelectedParticipant),i.onParticipantSelected(e.begin)}angular.module("otusjs.otus.laboratory",["otusjs.laboratory.core","otusjs.laboratory.business","otusjs.laboratory.repository","otusjs.laboratory.storage"]).run(t),t.$inject=["otusjs.laboratory.core.ModuleService","otusjs.laboratory.core.ContextService","otusjs.laboratory.core.EventService"]}(),function(){"use strict";function t(t,e){e.onLogout(t.end)}angular.module("otusjs.participant",["otusjs.participant.core","otusjs.participant.business","otusjs.participant.repository","otusjs.participant.storage"]).run(t),t.$inject=["otusjs.participant.core.ContextService","otusjs.participant.core.EventService"]}(),function(){"use strict";angular.module("otusjs.user",["otusjs.user.core","otusjs.user.business","otusjs.user.repository","otusjs.user.storage"])}(),function(){"use strict";function t(t,e){t.onLogin(e.end),t.onLogout(e.begin)}angular.module("otusjs.user.access",["otusjs.user.access.core","otusjs.user.access.service"]).run(t),t.$inject=["otusjs.user.access.core.EventService","otusjs.user.access.core.ContextService"]}(),function(){"use strict";function t(t,e,i,o){function n(){var e=t.defer();return r(i),s(o.session),e.resolve(),e.promise}function r(t){e.configureContext(t)}function s(t){e.configureStorage(t)}var c=this;c.bootstrap=n,c.configureContext=r,c.configureStorage=s}angular.module("otusjs.deploy").service("otusjs.deploy.AccessModuleBootstrap",t),t.$inject=["$q","otusjs.user.access.core.ModuleService","otusjs.application.context.ContextFactory","otusjs.application.storage.StorageService"]}(),function(){"use strict";function t(t,e,i,o,n,r,s,c,a,u){function l(){f(e),v(i.session),p(r),t.setActivityRemoteStorage(n),d(o),g(s),y(u),S(c),S(a)}function f(e){t.configureContext(e)}function v(e){t.configureStorage(e)}function d(e){t.configureActivityDataSourceService(e)}function p(e){t.configureUserDataSourceService(e)}function g(e){t.configureActivityFacadeService(e)}function y(e){t.configureActivityPlayerService(e)}function S(e){e.getModels().forEach(t.addModel)}var j=this;j.bootstrap=l,j.configureContext=f,j.configureStorage=v,j.configureActivityDataSourceService=d}angular.module("otusjs.deploy").service("otusjs.deploy.ActivityModuleBootstrap",t),t.$inject=["otusjs.activity.core.ModuleService","otusjs.application.context.ContextFactory","otusjs.application.storage.StorageService","otusjs.deploy.ActivityDataSourceService","otusjs.deploy.ActivityRemoteStorageService","otusjs.deploy.UserDataSourceService","otusjs.deploy.model.ActivityFacadeService","otusjs.deploy.model.ActivityModelPoolService","otusjs.deploy.model.SurveyModelPoolService","otusjs.deploy.PlayerService"]}(),function(){"use strict";function t(t,e,i,o){function n(){var e=t.defer();return r(i),s(o.session),e.resolve(),e.promise}function r(t){e.configureContext(t)}function s(t){e.configureStorage(t)}function c(t){e.begin()}var a=this;a.bootstrap=n,a.configureContext=r,a.configureStorage=s,a.beginApplicationContext=c}angular.module("otusjs.deploy").service("otusjs.deploy.ApplicationModuleBootstrap",t),t.$inject=["$q","otusjs.application.core.ModuleService","otusjs.application.context.ContextFactory","otusjs.application.storage.StorageService"]}(),function(){"use strict";function t(t,e,i,o,n,r,s,c,a,u,l,f,v,d,p,g,y,S){function j(){n.bootstrap(),i.bootstrap(),o.bootstrap(),r.bootstrap(),s.bootstrap(),c.bootstrap(),a.bootstrap(),g.hasContextActive()&&(u.ignore(),d.recover()),u.Service.Authentication=y.Service.UserAuthenticationService,l.DataSource.User=y.DataSource.User,u.onLogin(g.Event.fireLogin),u.onLogin(d.Event.fireLogin),u.onLogin(l.Event.fireLogin),u.onLogout(g.Event.fireLogout),u.onLogout(d.Event.fireLogout),u.onLogout(p.Event.fireLogout),u.onLogout(l.Event.fireLogout),u.onLogout(g.Event.fireLogout),u.onLogin(t.initializeRestrictResources),u.onLogin(e.initializeDataSources),u.onLogout(S.deleteDatabase),g.Event.onLogin(d.Event.fireLogin),g.Event.onLogin(l.Event.fireLogin),g.Event.onLogin(t.initializeRestrictResources),g.Event.onLogin(e.initializeDataSources),g.Event.onLogout(S.deleteDatabase),p.Event.onParticipantSelected(l.Event.fireParticipantSelected),p.Event.onParticipantSelected(d.Event.fireParticipantSelected),p.Event.onParticipantSelected(f.Event.fireParticipantSelected),n.beginApplicationContext()}this.run=j}angular.module("otusjs.deploy").service("otusjs.deploy.BootstrapService",t),t.$inject=["otusjs.deploy.OtusApiService","otusjs.deploy.DataSourceLoaderService","otusjs.deploy.AccessModuleBootstrap","otusjs.deploy.ActivityModuleBootstrap","otusjs.deploy.ApplicationModuleBootstrap","otusjs.deploy.ParticipantModuleBootstrap","otusjs.deploy.SessionModuleBootstrap","otusjs.deploy.UserModuleBootstrap","otusjs.deploy.LaboratoryModuleBootstrap","otusjs.user.access.core.ModuleService","otusjs.activity.core.ModuleService","otusjs.laboratory.core.ModuleService","otusjs.application.core.ModuleService","otusjs.otus.dashboard.core.ModuleService","otusjs.participant.core.ModuleService","otusjs.application.session.core.ModuleService","otusjs.user.core.ModuleService","otusjs.deploy.StorageLoaderService"]}(),function(){"use strict";function t(t,e,i,o){function n(){r(e),s(i.session),t.setParticipantLaboratoryRemoteStorage(o)}function r(e){t.configureContext(e)}function s(e){t.configureStorage(e)}var c=this;c.bootstrap=n,c.configureContext=r,c.configureStorage=s}angular.module("otusjs.deploy").service("otusjs.deploy.LaboratoryModuleBootstrap",t),t.$inject=["otusjs.laboratory.core.ModuleService","otusjs.application.context.ContextFactory","otusjs.application.storage.StorageService","otusjs.deploy.ParticipantLaboratoryRemoteStorageService"]}(),function(){"use strict";function t(t,e,i,o,n){function r(){var e=t.defer();return s(i),c(o.session),a(n),e.promise}function s(t){e.configureContext(t)}function c(t){e.configureStorage(t)}function a(t){return e.configureParticipantDataSourceService(t)}var u=this;u.bootstrap=r,u.configureContext=s,u.configureStorage=c,u.configureParticipantDataSource=a}angular.module("otusjs.deploy").service("otusjs.deploy.ParticipantModuleBootstrap",t),t.$inject=["$q","otusjs.participant.core.ModuleService","otusjs.application.context.ContextFactory","otusjs.application.storage.StorageService","otusjs.deploy.ParticipantDataSourceService"]}(),function(){"use strict";function t(t,e,i,o){function n(){var e=t.defer();return r(i),s(o.session),e.resolve(),e.promise}function r(t){e.configureContext(t)}function s(t){e.configureStorage(t)}var c=this;c.bootstrap=n,c.configureContext=r,c.configureStorage=s}angular.module("otusjs.deploy").service("otusjs.deploy.SessionModuleBootstrap",t),t.$inject=["$q","otusjs.application.session.core.ModuleService","otusjs.application.context.ContextFactory","otusjs.application.storage.StorageService"]}(),function(){"use strict";function t(t,e,i,o,n,r){function s(){var e=t.defer();return c(i),a(o.session),l(r),u(n),e.promise}function c(t){e.configureContext(t)}function a(t){e.configureStorage(t)}function u(t){return e.configureUserDataSource(t)}function l(t){e.configureLoginProxy(t)}var f=this;f.bootstrap=s,f.configureContext=c,f.configureStorage=a,f.configureUserDataSource=u,f.configureLoginProxy=l}angular.module("otusjs.deploy").service("otusjs.deploy.UserModuleBootstrap",t),t.$inject=["$q","otusjs.user.core.ModuleService","otusjs.application.context.ContextFactory","otusjs.application.storage.StorageService","otusjs.deploy.UserDataSourceService","otusjs.deploy.AuthenticationRestService"]}(),function(){"use strict";function t(t,e,i,o,n,r){function s(){return f=t.defer(),u(),f.promise}function c(){return{getData:function(){return r.getCollection()},save:function(){r.save()}}}function a(t){return i.list(t.recruitmentNumber).then(function(t){t.data&&t.data.length?n.loadData(t.data):console.log("Não foi possível atualizar o storage local."),d=!0,v&&d&&f.resolve()})}function u(){e.getSurveys().then(function(t){t.data&&t.data.length?(r.getCollection().clear(),r.getCollection().insert(t.data),r.save()):console.log("Não foi possível atualizar o storage local."),(v=!0)&&d&&f.resolve()})}var l=this,f=null,v=!1,d=!1;l.up=s,l.getSurveyDataSet=c,l.loadDataByParticipant=a}angular.module("otusjs.deploy").service("otusjs.deploy.ActivityDataSourceService",t),t.$inject=["$q","otusjs.deploy.ProjectConfigurationRestService","otusjs.deploy.ActivityRestService","otusjs.deploy.SurveyRestService","otusjs.activity.storage.ActivityLocalStorageService","otusjs.activity.storage.SurveyStorageService"]}(),function(){"use strict";function t(e,i,o,n,r,s){function c(){return i.up().then(u),o.up().then(u),n.up().then(u),r.up().then(u),s.up().then(u),f.promise}function a(){v===d&&f.resolve()}function u(){++v,a()}var l=this,f=e.defer(),v=0,d=t.$inject.length-1;l.initializeDataSources=c}angular.module("otusjs.deploy").service("otusjs.deploy.DataSourceLoaderService",t),t.$inject=["$q","otusjs.deploy.ActivityDataSourceService","otusjs.deploy.ParticipantDataSourceService","otusjs.deploy.UserDataSourceService","otusjs.deploy.SurveyItemDatasourceService","otusjs.deploy.FileUploadDatasourceService"]}(),function(){"use strict";function t(t,e,i){function o(){var e=t.defer();return i.initialize(),e.resolve(!0),e.promise}function n(){var o=t.defer();return e.setUploadInterface(i).then(function(){o.resolve(!0)},function(){o.reject(!0)}),o.promise}var r=this;r.up=o,r.setupUploader=n}angular.module("otusjs.deploy").service("otusjs.deploy.FileUploadDatasourceService",t),t.$inject=["$q","otusjs.utils.FileUploadFactory","otusjs.deploy.FileUploadRestService"]}(),function(){"use strict";function t(t,e,i){function o(){return a=t.defer(),r(),s(),a.promise}function n(){var e=t.defer();return a.promise.then(function(){e.resolve(i.getCollection().find())}),e.promise}function r(){e.initialize()}function s(){e.listIdexers().then(function(t){i.getCollection().clear(),i.getCollection().insert(t),i.save(),a.resolve()})}var c=this,a=t.defer();c.up=o,c.listIndexers=n}angular.module("otusjs.deploy").service("otusjs.deploy.ParticipantDataSourceService",t),t.$inject=["$q","otusjs.deploy.ParticipantRestService","otusjs.participant.storage.ParticipantStorageService"]}(),function(){"use strict";function t(t,e,i,o,n){function r(){return v=t.defer(),a(),u(),v.promise}function s(){return{getData:function(){return o.getCollection()},save:function(){o.save(),l()}}}function c(){return{getData:function(){return n.getCollection()},save:function(){n.save()}}}function a(){e.initialize(),i.initialize()}function u(){i.list().then(function(t){t.data&&t.data.length?(n.getCollection().clear(),n.getCollection().insert(t.data),n.save()):console.log("Não foi possível atualizar o storage local."),(d=!0)&&p&&v.resolve()}),e.list().then(function(t){t.data&&t.data.length?(o.getCollection().clear(),o.getCollection().insert(t.data),o.save(),console.log("Storage local de atividades atualizado com dados do servidor.")):console.log("Não foi possível atualizar o storage local."),p=!0,d&&p&&v.resolve()})}function l(){var t=o.getCollection().find();e.update(t).then(function(t){console.log("Dados de atividade sincronizados.")}).catch(function(t){console.log("Falha ao sincronizar dados de atividade.")})}var f=this,v=null,d=!1,p=!1;f.up=r,f.getActivityDataSet=s,f.getSurveyDataSet=c}angular.module("otusjs.deploy").service("otusjs.deploy.ActivityDataSourceService",t),t.$inject=["$q","otusjs.deploy.ActivityRestService","otusjs.deploy.SurveyRestService","otusjs.activity.storage.ActivityLocalStorageService","otusjs.activity.storage.SurveyStorageService"]}(),function(){"use strict";function t(t,e,i,o){function n(){var e=t.defer();return i.initialize(),e.resolve(!0),e.promise}function r(i){var n=t.defer();return s(i).then(function(t){i.forEach(function(e){t[e.getID()].bindedItems=e.getBindedItems()});var r=o.registerDatasource(t);e.provideDatasourcesAddress(r),n.resolve(!0)}),n.promise}function s(e){var i=t.defer(),o={};return c(e).then(function(t){t.forEach(function(t){o[t.data.id]=t.data}),i.resolve(o)}),i.promise}function c(e){var i=[];return e.forEach(function(t){i.push(a(t.getID()))}),t.all(i)}function a(t){return i.getByID(t)}var u=this;u.up=n,u.setupDatasources=r}angular.module("otusjs.deploy").service("otusjs.deploy.SurveyItemDatasourceService",t),t.$inject=["$q","otusjs.utils.DatasourceService","otusjs.deploy.SurveyItemRestService","otusjs.activity.storage.ActivityLocalStorageService"]}(),function(){"use strict";function t(t,e,i){function o(){return u=t.defer(),s(),c(),u.promise}function n(){return i.getCollection().find()}function r(){}function s(){e.initialize()}function c(){e.listIdexers().then(function(t){i.getCollection().clear(),i.getCollection().insert(t.data),i.save(),u.resolve()})}var a=this,u=null;a.up=o,a.getData=r,a.listIndexers=n}angular.module("otusjs.deploy").service("otusjs.deploy.UserDataSourceService",t),t.$inject=["$q","otusjs.deploy.UserRestService","otusjs.user.storage.UserStorageService"]}(),function(){"use strict";function t(t){function e(){}this.setup=e}angular.module("otusjs.deploy").service("otusjs.deploy.PlayerLabelMaker",t),t.$inject=["otusjs.labelMaker.setupView.setupComponent"]}(),function(){"use strict";function t(){function t(){r.loading_screen=null,o()}function e(){r.loading_screen||n()}function i(){r.loading_screen&&(r.loading_screen.finish(),r.loading_screen=null)}function o(t){r.message=void 0!==t?t:s}function n(){r.loading_screen=pleaseWait({logo:"app/static-resource/image/coruja_pesquisadora.png",backgroundColor:"#009688",loadingHtml:"<p class='loading-message' style='color:#FFF;'>"+r.message+"</p><div class='sk-circle'><div class='sk-circle1 sk-child'></div><div class='sk-circle2 sk-child'></div><div class='sk-circle3 sk-child'></div><div class='sk-circle4 sk-child'></div><div class='sk-circle5 sk-child'></div><div class='sk-circle6 sk-child'></div><div class='sk-circle7 sk-child'></div><div class='sk-circle8 sk-child'></div><div class='sk-circle9 sk-child'></div><div class='sk-circle10 sk-child'></div><div class='sk-circle11 sk-child'></div><div class='sk-circle12 sk-child'></div></div>"})}var r=this,s="Por favor, aguarde o carregamento.";r.$onInit=t,r.start=e,r.finish=i,r.changeMessage=o,t()}angular.module("otusjs.deploy").service("otusjs.deploy.LoadingScreenService",t),t.$inject=[]}(),function(){"use strict";function t(t){function e(t,e){}function i(e,i){t.activateParticipantActivities()}function o(t,e){}function n(t,e){return e}var r=this;r.beforeEffect=e,r.effect=i,r.afterEffect=o,r.getEffectResult=n}angular.module("otusjs.deploy").service("otusjs.deploy.ExitPlayerStepService",t),t.$inject=["otusjs.application.state.ApplicationStateService"]}(),function(){"use strict";function t(t,e,i,o,n,r,s,c){function a(){f||u(),t.setup()}function u(){e.onPrePlayerStart(i),e.onEject(o),e.onEject(r),e.onSave(r),e.onStop(n),f=!0}var l=this,f=!1;l.setup=a}angular.module("otusjs.deploy").service("otusjs.deploy.PlayerService",t),t.$inject=["otusjs.player.core.player.PlayerService","otusjs.player.core.player.PlayerConfigurationService","otusjs.deploy.PrePlayerStepService","otusjs.deploy.ExitPlayerStepService","otusjs.deploy.StopPlayerStepService","otusjs.deploy.SavePlayerStepService","$q","$timeout"]}(),function(){"use strict";function t(t,e,i,o,n){function r(t,e){}function s(r,s){var c=o.getCurrentSurvey().getSurveyDatasources(),a=[i.setupDatasources(c),n.setupUploader()];e.registerPhaseBlocker(t.all(a))}function c(t,e){}function a(t,e){return e}var u=this;t.defer(),u.beforeEffect=r,u.effect=s,u.afterEffect=c,u.getEffectResult=a}angular.module("otusjs.deploy").service("otusjs.deploy.PrePlayerStepService",t),t.$inject=["$q","otusjs.player.core.player.PlayerService","otusjs.deploy.SurveyItemDatasourceService","otusjs.player.data.activity.ActivityFacadeService","otusjs.deploy.FileUploadDatasourceService"]}(),function(){"use strict";function t(t,e,i){function o(t,e){}function n(o,n){e.whenActivityFacadeServiceReady().then(function(e){i.save(e.getActivity()).then(t.activateParticipantActivities)})}function r(t,e){}function s(t,e){return e}var c=this;c.beforeEffect=o,c.effect=n,c.afterEffect=r,c.getEffectResult=s}angular.module("otusjs.deploy").service("otusjs.deploy.SavePlayerStepService",t),t.$inject=["otusjs.application.state.ApplicationStateService","otusjs.activity.core.ModuleService","otusjs.activity.repository.ActivityRepositoryService"]}(),function(){"use strict";function t(t){function e(t,e){}function i(e,i){t.activateParticipantActivities()}function o(t,e){}function n(t,e){return e}var r=this;r.beforeEffect=e,r.effect=i,r.afterEffect=o,r.getEffectResult=n}angular.module("otusjs.deploy").service("otusjs.deploy.StopPlayerStepService",t),t.$inject=["otusjs.application.state.ApplicationStateService"]}(),function(){"use strict";function t(t,e,i,o,n,r,s,c,a,u,l,f,v,d,p,g){e.state(i.state),e.state(o.state),e.state(n.state),e.state(r.state),e.state(s.state),e.state(c.state),e.state(l.state),e.state(v.state),e.state(d.state),e.state(a.state),e.state(u.state),e.state(f.state),e.state(p.state),e.state(g.state),t.otherwise(l.state.url)}angular.module("otusjs.deploy").constant("STATE",{ACCESS:"access",ACTIVITY_ADDER:"activity-adder",ACTIVITY_PLAYER:"activity-player",PAPER_ACTIVITY_ADDER:"paper-activity-adder",PAPER_ACTIVITY_INITIALIZER:"paper-activity-initializer",APPLICATION:"application",DASHBOARD:"dashboard",INSTALLER:"installer",LOGIN:"login",PARTICIPANT:"participant",PARTICIPANT_ACTIVITY:"activity",PARTICIPANT_REPORT:"report",SESSION:"session",SIGNUP:"signup",SIGNUP_RESULT:"signup-result",LABORATORY:"laboratory-participant"}).config(t),t.$inject=["$urlRouterProvider","$stateProvider","otusjs.deploy.AccessStateProvider","otusjs.deploy.ActivityStateProvider","otusjs.deploy.ActivityAdderStateProvider","otusjs.deploy.ActivityPlayerStateProvider","otusjs.deploy.PaperActivityAdderStateProvider","otusjs.deploy.PaperActivityInitializerStateProvider","otusjs.deploy.DashboardStateProvider","otusjs.deploy.InstallerStateProvider","otusjs.deploy.LoginStateProvider","otusjs.deploy.ParticipantStateProvider","otusjs.deploy.SignupStateProvider","otusjs.deploy.SignupResultStateProvider","otusjs.deploy.SessionStateProvider","otusjs.deploy.LaboratoryStateProvider"]}(),function(){"use strict";function t(t,e,i,o,n,r){function s(){i.initialize()}function c(e){var i=t.defer();return o.newDb(e,v(r)).then(function(){i.resolve()}),i.promise}function a(e){var i=t.defer();return o.loadDb(e,v(r)).then(function(){i.resolve()}),i.promise}function u(e){var i=t.defer();return n.newDb(e,v(r)).then(function(){i.resolve()}),i.promise}function l(e){var i=t.defer();return n.loadDb(e,v(r)).then(function(){i.resolve()}),i.promise}function f(t){return n.dbExists(t)}function v(t){return t.map(function(t){return e.get(t)})}function d(){return n.deleteDatabase()}var p=this;p.initializeSessionStorage=s,p.createLocalStorage=c,p.createIndexedStorage=u,p.loadLocalStorage=a,p.loadIndexedStorage=l,p.dbExists=f,p.deleteDatabase=d}angular.module("otusjs.deploy").service("otusjs.deploy.StorageLoaderService",t),t.$inject=["$q","$injector","otusjs.application.storage.SessionStorageService","otusjs.application.storage.LocalStorageService","otusjs.application.storage.IndexedDbStorageService","OtusLocalStorage"]}(),function(){"use strict";function t(t,e){function i(){t.add(r),r=[],e.activateParticipantActivities()}function o(t){var e=r.indexOf(t);-1!==e?r.splice(e,1):r.push(t)}var n=this,r=[];n.addActivities=i,n.catchActivity=o}angular.module("otusjs.otus.uxComponent").component("otusActivityAdder",{controller:t,templateUrl:"app/ux-component/activity-adder/activity-adder-template.html"}),t.$inject=["otusjs.activity.business.ParticipantActivityService","otusjs.application.state.ApplicationStateService"]}(),function(){"use strict";function t(t){function e(){r.isListEmpty=!0,i()}function i(){t.listAvailables().then(function(t){r.activities=t,t.length&&(r.isListEmpty=!1)})}function o(t){return"FORM_INTERVIEW"===t.surveyFormType||"INTERVIEW"===t.surveyFormType?"Entrevista":"PROFILE"===t.surveyFormType?"Perfil":""}function n(t){r.onActivitySelection({activity:t})}var r=this;r.activities=[],r.isListEmpty=!0,r.getType=o,r.selectActivity=n,r.$onInit=e}angular.module("otusjs.otus.uxComponent").component("otusActivityAdderList",{controller:t,templateUrl:"app/ux-component/activity-adder-list/activity-adder-list-template.html",bindings:{onActivitySelection:"&"}}),t.$inject=["otusjs.activity.business.ParticipantActivityService"]}(),function(){"use strict";function t(t){function e(){o.onAddActivities()}function i(){t.activateParticipantActivities()}var o=this;o.addActivities=e,o.returnToParticipantActivities=i}angular.module("otusjs.otus.uxComponent").component("otusActivityAdderToolbar",{controller:t,templateUrl:"app/ux-component/activity-adder-toolbar/activity-adder-toolbar-template.html",bindings:{activityType:"<",onAddActivities:"&"}}),t.$inject=["otusjs.application.state.ApplicationStateService"]}(),function(){"use strict";function t(t,e,i){function o(){r.otusActivityManager.activityInfoComponent=r}function n(){var o=e.getSelectedActivities()[0];r.activity={},r.activity.details=o.surveyForm.surveyTemplate.identity,r.activity.history=o.statusHistory.getHistory().map(i.create),r.activity.history.reverse(),t("right").toggle()}var r=this;r.show=n,r.$onInit=o}angular.module("otusjs.otus.uxComponent").component("otusActivityInformation",{controller:t,templateUrl:"app/ux-component/activity-information/activity-information-template.html",require:{otusActivityManager:"^otusActivityManager"}}),t.$inject=["$mdSidenav","otusjs.activity.core.ContextService","otusjs.otus.uxComponent.ActivityStatusItemFactory"]}(),function(){"use strict";function t(){function t(t){return new e(t)}var i=this;return i.create=t,i}function e(t){var e=this;e.date=function(t){try{var e=new Date(t.date);return e.getDate()+"/"+(e.getMonth()+1)+"/"+e.getFullYear()}catch(t){return null}}(t),
e.user=t.user,e.user.name=t.user.name+" "+t.user.surname,e.status=function(t){return{CREATED:{label:"Criado",color:"#595959",icon:"fiber_new"},OPENED:{label:"Aberto",color:"#0091ea",icon:"visibility"},FINALIZED:{label:"Finalizado",color:"#009688",icon:"check_circle"},SAVED:{label:"Salvo",color:"#ae8323",icon:"save"},INITIALIZED_OFFLINE:{label:"Realizado em Papel",color:"#886430",icon:"edit"},INITIALIZED_ONLINE:{label:"Iniciado Online",color:"#513c1c",icon:"edit"}}[t.name]}(t)}angular.module("otusjs.otus.uxComponent").factory("otusjs.otus.uxComponent.ActivityStatusItemFactory",t)}(),function(){"use strict";function t(){function t(){o.listComponent.update()}function e(){o.activityInfoComponent.show()}function i(){o.listComponent={},o.activityInfoComponent={}}var o=this;o.handleDeleteAction=t,o.handleViewInfoAction=e,o.$onInit=i}angular.module("otusjs.otus.uxComponent").component("otusActivityManager",{controller:t,templateUrl:"app/ux-component/activity-manager/activity-manager-template.html"})}(),function(){"use strict";function t(t){function e(){t.activateActivityAdder()}function i(){t.activatePaperActivityInitializer()}var o=this;o.goToActivityAdder=e,o.goToPaperActivityInitializer=i}angular.module("otusjs.otus.uxComponent").component("otusActivityManagerCommander",{controller:t,templateUrl:"app/ux-component/activity-manager-commander/activity-manager-commander-template.html"}),t.$inject=["otusjs.application.state.ApplicationStateService"]}(),function(){"use strict";function t(){function t(t){return new e(t)}var i=this;return i.create=t,i}function e(t){var e=this;e.name=t.surveyForm.surveyTemplate.identity.name,e.acronym=t.surveyForm.surveyTemplate.identity.acronym,e.mode=function(){return"PAPER"===t.mode?{name:"Em papel",icon:"file-document"}:"ONLINE"===t.mode?{name:"Online",icon:"signal"}:{name:"",icon:""}}(),e.realizationDate=function(){try{var e=new Date(t.getRealizationDate());return e.getDate()+"/"+(e.getMonth()+1)+"/"+e.getFullYear()}catch(t){return null}}(),e.status=function(){var e=t.statusHistory.getLastStatus();return"INITIALIZED_OFFLINE"===e.name?"Realizado em papel":"SAVED"===e.name?"Salvo":"FINALIZED"===e.name?"Finalizado":""}(),e.isDiscarded=t.isDiscarded,e.activity=t,e.id=t.getID()}angular.module("otusjs.otus.uxComponent").factory("otusjs.otus.uxComponent.ActivityItemFactory",t)}(),function(){"use strict";function t(t,e,i,o){function n(e){var i=l.indexOf(e.activity);i>-1?(l.splice(i,1),e.isSelected=!1):(l.push(e.activity),e.isSelected=!0),t.selectActivities(l)}function r(){l=[],c()}function s(){e.onParticipantSelected(c),u.isListEmpty=!0,u.otusActivityManager.listComponent=u,c()}function c(){o.start(),t.listAll().then(function(t){u.activities=t.filter(a).map(i.create),u.isListEmpty=!u.activities.length,o.finish()})}function a(t){return!t.isDiscarded}var u=this,l=[];u.activities=[],u.isListEmpty=!0,u.selectActivity=n,u.update=r,u.$onInit=s}angular.module("otusjs.otus.uxComponent").component("otusActivityList",{controller:t,templateUrl:"app/ux-component/activity-manager-list/activity-manager-list-template.html",require:{otusActivityManager:"^otusActivityManager"}}),t.$inject=["otusjs.activity.business.ParticipantActivityService","otusjs.activity.core.EventService","otusjs.otus.uxComponent.ActivityItemFactory","otusjs.deploy.LoadingScreenService"]}(),function(){"use strict";function t(t,e,i,o){function n(){e.load().then(function(){o.activateActivityPlayer()})}function r(){t.getSelectedActivities().discard(),l.onDelete()}function s(){l.onViewInfo()}function c(){a(),i.onParticipantSelected(a),i.onActivitySelected(u)}function a(e){e?l.selectedParticipant=e:t.getSelectedParticipant().then(function(t){l.selectedParticipant=t})}function u(t){t.length<=0?(l.showVisualizationButton=!1,l.showFillingButton=!1,l.showDeleteButton=!1,l.showInfoButton=!1):1===t.length?(l.showVisualizationButton=!0,l.showFillingButton=!0,l.showDeleteButton=!0,l.showInfoButton=!0):(l.showVisualizationButton=!1,l.showFillingButton=!1,l.showDeleteButton=!0,l.showInfoButton=!1)}var l=this;l.fillSelectedActivity=n,l.deleteSelectedActivity=r,l.visualizeSelectedActivityInfo=s,l.$onInit=c}angular.module("otusjs.otus.uxComponent").component("otusActivityManagerToolbar",{controller:t,templateUrl:"app/ux-component/activity-manager-toolbar/activity-manager-toolbar-template.html",require:{otusActivityManager:"^otusActivityManager"},bindings:{onDelete:"&",onViewInfo:"&"}}),t.$inject=["otusjs.activity.business.ParticipantActivityService","otusjs.activity.business.ActivityPlayerService","otusjs.activity.core.EventService","otusjs.application.state.ApplicationStateService"]}(),function(){"use strict";function t(t){function e(){}this.x=e}angular.module("otusjs.otus.uxComponent").component("otusActivityPlayer",{controller:t,templateUrl:"app/ux-component/activity-player/activity-player-template.html"}),t.$inject=["otusjs.activity.core.EventService"]}(),function(){"use strict";function t(t){function e(t){o.selectedParticipant=t}function i(){o.selectedParticipant=null}var o=this;o.selectParticipant=e,o.$onInit=i}angular.module("otusjs.otus.uxComponent").component("otusDashboard",{controller:t,templateUrl:"app/ux-component/dashboard/dashboard-template.html"}),t.$inject=["otusjs.application.state.ApplicationStateService"]}(),function(){"use strict";function t(){}angular.module("otusjs.otus.uxComponent").component("otusDashboardDisplay",{controller:t,templateUrl:"app/ux-component/dashboard-display/dashboard-display-template.html"})}(),function(){"use strict";function t(t,e,i,o,n){function r(){e.activateParticipantActivities()}function s(){e.activateParticipantReports()}function c(){e.activateLaboratory()}function a(){l.isEmpty=!0,u(),o.onParticipantSelected(u)}function u(t){t?(l.selectedParticipant=t,l.isEmpty=!1):n.getSelectedParticipant().then(function(t){l.selectedParticipant=t,l.isEmpty=!1})}var l=this;l.loadParticipantActivities=r,l.loadParticipantReports=s,l.loadLaboratory=c,l.$onInit=a}angular.module("otusjs.otus.uxComponent").component("otusParticipantBox",{controller:t,templateUrl:"app/ux-component/dashboard-participant-box/dashboard-participant-box-template.html"}),t.$inject=["$element","otusjs.application.state.ApplicationStateService","otusjs.participant.core.ContextService","otusjs.otus.dashboard.core.EventService","otusjs.otus.dashboard.service.DashboardService"]}(),function(){"use strict";function t(t,e,i){function o(){u.toggle()}function n(){e.logout()}function r(){i.activateParticipantActivities()}function s(){i.activateParticipantReports()}function c(){t.when(l).then(function(t){u=t})}var a=this,u=null,l="left";a.close=o,a.logout=n,a.loadParticipantActivities=r,a.loadParticipantReports=s,a.$onInit=c}angular.module("otusjs.otus.uxComponent").component("otusDashboardSidenav",{controller:t,templateUrl:"app/ux-component/dashboard-sidenav/dashboard-sidenav-template.html",bindings:{participant:"<"}}),t.$inject=["$mdComponentRegistry","otusjs.user.access.service.LogoutService","otusjs.application.state.ApplicationStateService"]}(),function(){"use strict";function t(t){function e(){n&&n.toggle()}function i(){t.when(r).then(function(t){n=t})}var o=this,n=null,r="left";o.launchSidenav=e,o.$onInit=i}angular.module("otusjs.otus.uxComponent").component("otusDashboardSidenavLauncher",{controller:t,templateUrl:"app/ux-component/dashboard-sidenav-launcher/dashboard-sidenav-launcher-template.html"}),t.$inject=["$mdComponentRegistry"]}(),function(){"use strict";function t(t,e){function i(t){r.onParticipantSelect({participant:t})}function o(){n(),e.onLogin(n)}function n(e){e?r.loggedUser=e:t.getLoggedUser().then(function(t){r.loggedUser=t})}var r=this;r.selectParticipant=i,r.$onInit=o}angular.module("otusjs.otus.uxComponent").component("otusDashboardToolbar",{controller:t,templateUrl:"app/ux-component/dashboard-toolbar/dashboard-toolbar-template.html",bindings:{onParticipantSelect:"&"}}),t.$inject=["otusjs.otus.dashboard.core.ContextService","otusjs.otus.dashboard.core.EventService"]}(),function(){"use strict";function t(t,e,i,o,n,r,s){function c(t){o.isLoading=!0,delete t.userPasswordConfirm,j.config(t,function(t){t.data?y():u(t),o.isLoading=!1})}function a(t){i.setHostname(t),i.getInstallerResource().ready(function(t){t.data||v()})}function u(t){switch(t.STATUS){case"CONFLICT":l();break;case"PRECONDITION_FAILED":f();break;default:d()}}function l(){o.initialConfigForm.email.$setValidity("email",!1),o.initialConfigForm.$setValidity("email",!1)}function f(){o.initialConfigForm.emailSenderEmail.$setValidity("emailService",!1),o.initialConfigForm.$setValidity("emailService",!1)}function v(){o.initialConfigForm.urlProject.$setValidity("domainAccess",!1),o.initialConfigForm.$setValidity("domainAccess",!1)}function d(){S(m)}function p(){o.initialConfigForm.emailSenderEmail.$setValidity("emailService",!0),o.initialConfigForm.$setValidity("emailService",!0)}function g(){o.initialConfigForm.urlProject.$setValidity("domainAccess",!0),o.initialConfigForm.$setValidity("domainAccess",!0)}function y(){var t=s.alert().title("Informação").content(h).ok("ok");s.show(t).finally(function(){})}function S(t){n.show(n.simple().textContent(t))}var j,m="Erro ao adicionar novas configurações. Contate a equipe de desenvolvimento",h="Suas configurações foram realizadas com sucesso! Você vai ser redirecionado para a tela de login.",A=this;A.register=c,A.validateDomain=a,A.resetValidationEmail=p,A.resetValidationDomain=g,function(){j=e.getOtusInstallerResource()}()}angular.module("otusjs.otus.uxComponent").controller("otusjs.otus.uxComponent.InitialConfigController",t),t.$inject=["otusjs.application.state.ApplicationStateService","OtusRestResourceService","RestResourceService","$scope","$mdToast","$q","$mdDialog"]}(),function(){"use strict";function t(t,e,i){function o(){r(),i.onParticipantSelected(r),a.hasLaboratory=!1,e.start(),t.onParticipantSelected(n),n()}function n(){t.hasLaboratory().then(function(t){a.hasLaboratory=t,t&&c(),e.finish()})}function r(e){e?a.selectedParticipant=e:t.getSelectedParticipant().then(function(t){a.selectedParticipant=t})}function s(){e.start(),t.initializeLaboratory().then(function(t){t&&(a.hasLaboratory=!0,c()),e.finish()})}function c(){t.getLaboratory().then(function(){a.json=t.toJson()})}var a=this;a.json="",a.$onInit=o,a.intializeLaboratory=s}angular.module("otusjs.otus.uxComponent").component("otusLaboratory",{controller:t,templateUrl:"app/ux-component/laboratory/laboratory-start.html"}),t.$inject=["otusjs.laboratory.business.ParticipantLaboratoryService","otusjs.deploy.LoadingScreenService","otusjs.laboratory.core.EventService"]}(),function(){"use strict";function t(t,e){function i(){t.add(r),r=[],e.activateParticipantActivities()}function o(t){var e=r.indexOf(t);-1!==e?r.splice(e,1):r.push(t)}var n=this,r=[];n.addActivities=i,n.catchActivity=o}angular.module("otusjs.otus.uxComponent").component("otusPaperActivityAdder",{controller:t,templateUrl:"app/ux-component/paper-activity-adder/paper-activity-adder-template.html"}),t.$inject=["otusjs.activity.business.ParticipantActivityService","otusjs.application.state.ApplicationStateService"]}(),function(){"use strict";function t(t){function e(){i()}function i(){n.activities=t.listAvailables()}function o(t){n.onActivitySelection({activity:t})}var n=this;n.activities=[],n.selectActivity=o,n.$onInit=e}angular.module("otusjs.otus.uxComponent").component("otusPaperActivityAdderList",{controller:t,templateUrl:"app/ux-component/paper-activity-adder-list/paper-activity-adder-list-template.html",bindings:{onActivitySelection:"&"}}),t.$inject=["otusjs.activity.business.ParticipantActivityService"]}(),function(){"use strict";function t(){function t(t){return new e(t)}var i=this;return i.create=t,i}function e(t){var e=this;e.text=t.name+" "+t.surname,e.title=t.name+" "+t.surname,e.metastat={},e.metastat.code=t.$loki,e.metastat.email=t.email,e.checker=t}angular.module("otusjs.otus.uxComponent").factory("otusjs.otus.uxComponent.CheckerItemFactory",t)}(),function(){"use strict";function t(t,e,i,o,n){function r(i){var o=i?f.filter(u(i)):f,n=t.defer();return e(function(){n.resolve(o)},1e3*Math.random(),!1),n.promise}function s(){o.activateParticipantActivities()}function c(){l.paperActivityData.checker=l.selectedItem.checker,i.initializePaperActivityData(l.paperActivityData),o.activateActivityAdder()}function a(){l.paperActivityData={},l.paperActivityData.realizationDate=new Date}function u(t){var e=angular.lowercase(t);return function(t){return t.text.toLowerCase().indexOf(e)>-1}}var l=this,f=i.listActivityCheckers().map(n.create);l.querySearch=r,l.returnToParticipantActivities=s,l.goToActivityAdder=c,l.$onInit=a}angular.module("otusjs.otus.uxComponent").component("otusPaperActivityInitializer",{controller:t,templateUrl:"app/ux-component/paper-activity-initializer/paper-activity-initializer-template.html"}),t.$inject=["$q","$timeout","otusjs.activity.business.ParticipantActivityService","otusjs.application.state.ApplicationStateService","otusjs.otus.uxComponent.CheckerItemFactory"]}(),function(){"use strict";function t(t,e){function i(){r.inputedText="",e.setup()}function o(){var i=t.defer();return e.filter(r.inputedText).then(function(t){i.resolve(t)}),i.promise}function n(){r.selectedParticipant&&(e.selectParticipant(r.selectedParticipant),r.onSelect({participant:r.selectedParticipant}))}var r=this;r.$onInit=i,r.querySearch=o,r.selectParticipant=n}angular.module("otusjs.otus.uxComponent").component("otusParticipantSearch",{controller:t,templateUrl:"app/ux-component/participant-search/participant-search-template.html",bindings:{onSelect:"&"}}),t.$inject=["$q","otusjs.participant.business.ParticipantSearchService"]}(),function(){"use strict";function t(t,e,i){function o(e){t.authenticate(e).then(r,s)}function n(){e.activateSignup()}function r(){e.activateDashboard()}function s(){i.show(a)}var c=this,a=i.simple().textContent("Login Inválido! Verifique os dados informados.");c.authenticate=o,c.goToSignupPage=n}angular.module("otusjs.otus.uxComponent").controller("otusjs.otus.uxComponent.LoginController",t),t.$inject=["otusjs.user.access.service.LoginService","otusjs.application.state.ApplicationStateService","$mdToast"]}(),function(){"use strict";function t(t,e,i,o,n){function r(o){i.start(),e.executeSignup(o).then(function(e){e.data?t.activateSignupResult():(s(e),i.finish())},function(t){i.finish(),s(t)})}function s(t){switch(t.statusText){case"Conflict":c();break;default:a()}}function c(){o.signupForm.email.$setValidity("emailInUse",!1),d.isWaiting=!1}function a(){n.show(n.simple().textContent(v))}function u(){o.signupForm.email.$setValidity("emailInUse",!0),o.signupForm.$setValidity("emailInUse",!0)}function l(){t.activateLogin()}function f(){t.activateLogin()}var v="Houve um erro ao realizar o cadastro. Informe a equipe de desenvolvimento",d=this;d.signup=r,d.back=l,d.agree=f,d.resetEmailValidation=u}angular.module("otusjs.otus.uxComponent").controller("otusjs.otus.uxComponent.SignupController",t),t.$inject=["otusjs.application.state.ApplicationStateService","otusjs.user.access.service.SignupService","otusjs.deploy.LoadingScreenService","$scope","$mdToast"]}(),function(){"use strict";function t(t){}angular.module("otusjs.application.http").config(t),t.$inject=["$httpProvider"]}(),function(){"use strict";function t(){function t(t){return t}var e=this;return e.responseError=t,e}angular.module("otusjs.application.http").factory("otusjs.application.http.ResponseInterceptor",t),t.$inject=[]}(),function(){"use strict";function t(t,e){function i(e){t.sessionStorage.setItem("outk",e.token),u(A,e)}function o(){r(),d(),m&&(e.fireLogin(a(A)),m=!1)}function n(){j.removeItem(h),t.sessionStorage.removeItem("outk")}function r(){if(p(),!s())throw new Error("There is no active session context.","session/context-service.js",58)}function s(){return!!j.getItem(h)}function c(){p(),j.setItem(h,S.toJson())}function a(t){return p(),S.getData(t)}function u(t,e){p(),S.setData(t,e),c()}function l(t){p(),S.removeData(t),c()}function f(t){S=t.create(h)}function v(t){j=t}function d(){r(),s()&&S.fromJson(j.getItem(h))}function p(){if(!S)throw new Error("Internal context is not initialized.","session-context-service.js",152);if(!j)throw new Error("Internal storage is not initialized.","application-context-service.js",158)}function g(){return null}var y=this,S=null,j=null,m=!0,h="session_context",A="loggedUser";y.begin=i,y.restore=o,y.end=n,y.isValid=r,y.hasContextActive=s,y.save=c,y.configureContext=f,y.configureStorage=v,y.getData=a,y.setData=u,y.removeData=l,y.getToken=g}angular.module("otusjs.application.session.core").service("otusjs.application.session.core.ContextService",t),t.$inject=["$window","otusjs.application.session.core.EventService"]}(),function(){"use strict";function t(){function t(t){n(s,t,s.length)}function e(t){s.push(t)}function i(t){n(c,t,c.length)}function o(t){c.push(t)}function n(t,e,i){for(var o=0;o<i;o++)t[o](e)}var r=this,s=[],c=[];r.fireLogin=t,r.onLogin=e,r.fireLogout=i,r.onLogout=o}angular.module("otusjs.application.session.core").service("otusjs.application.session.core.EventService",t)}(),function(){"use strict";function t(t,e){function i(e){t.configureContext(e)}function o(e){t.configureStorage(e)}function n(){return t.hasContextActive()}var r=this;r.Event=e,r.configureContext=i,r.configureStorage=o,r.hasContextActive=n}angular.module("otusjs.application.session.core").service("otusjs.application.session.core.ModuleService",t),t.$inject=["otusjs.application.session.core.ContextService","otusjs.application.session.core.EventService"]}(),function(){"use strict";angular.module("otusjs.application.session.core",[])}(),function(){"use strict";angular.module("otusjs.application.state").constant("STATE",{ACCESS:"access",ACTIVITY_ADDER:"activity-adder",ACTIVITY_PLAYER:"activity-player",PAPER_ACTIVITY_ADDER:"paper-activity-adder",PAPER_ACTIVITY_INITIALIZER:"paper-activity-initializer",APPLICATION:"application",DASHBOARD:"dashboard",INSTALLER:"installer",LOGIN:"login",LABORATORY:"laboratory-participant",PARTICIPANT:"participant",PARTICIPANT_ACTIVITY:"activity",PARTICIPANT_REPORT:"report",SESSION:"session",SIGNUP:"signup",SIGNUP_RESULT:"signup-result",LABELMAKER:"labelMaker"})}(),function(){"use strict";function t(t,e,i,o){e.$on("$stateChangeSuccess",function(t,e,i,n,r){o.setCurrentState(e)})}angular.module("otusjs.application.state").service("otusjs.application.state.RouteResolverService",t),t.$inject=["$injector","$rootScope","$state","otusjs.application.state.ApplicationStateService"]}(),function(){"use strict";function t(t,e){function i(){e.go(t.ACTIVITY_ADDER)}function o(){e.go(t.ACTIVITY_PLAYER)}function n(){e.go(t.PAPER_ACTIVITY_ADDER)}function r(){e.go(t.PAPER_ACTIVITY_INITIALIZER)}function s(){e.go(t.INSTALLER)}function c(){e.go(t.LOGIN)}function a(){e.go(t.LABORATORY)}function u(){e.go(t.DASHBOARD)}function l(){e.go(t.PARTICIPANT_ACTIVITY)}function f(){e.go(t.PARTICIPANT_REPORT)}function v(){e.go(t.SIGNUP)}function d(){e.go(t.SIGNUP_RESULT)}var p=this;p.activateActivityAdder=i,p.activateActivityPlayer=o,p.activatePaperActivityAdder=n,p.activatePaperActivityInitializer=r,p.activateInstaller=s,p.activateLogin=c,p.activateLaboratory=a,p.activateDashboard=u,p.activateParticipantActivities=l,p.activateParticipantReports=f,p.activateSignup=v,p.activateSignupResult=d}angular.module("otusjs.application.state").service("otusjs.application.state.ApplicationStateService",t),t.$inject=["STATE","$state"]}(),function(){"use strict";function t(t,e){function i(t){return l[t].lokiDb}function o(e,i){return l[e]={},l[e].loading=t.defer(),l[e].storages=i,l[e].lokiDb=new loki(e,{autoload:!0,autoloadCallback:function(){s(e)},adapter:f}),l[e].loading.promise}function n(e,i){return l[e]={},l[e].loading=t.defer(),l[e].storages=i,l[e].lokiDb=new loki(e,{autoload:!0,autoloadCallback:function(){c(e)},adapter:f}),l[e].loading.promise}function r(e){var i=t.defer();return f.getDatabaseList(function(t){var o=t.some(function(t){return t===e});i.resolve(o)}),i.promise}function s(t){l[t].storages.forEach(function(e){e.options||(e.options={}),e.initialize(i(t).addCollection(e.collectionName,e.options),i(t))}),i(t).saveDatabase(),l[t].loading.resolve()}function c(t){l[t].storages.forEach(function(e){e.initialize(i(t).getCollection(e.collectionName),i(t))}),l[t].loading.resolve()}function a(){l.otus.lokiDb.collections.forEach(function(t){t.clear()})}var u=this,l={},f=new LokiIndexedAdapter("otus");u.getDb=i,u.newDb=o,u.loadDb=n,u.dbExists=r,u.deleteDatabase=a}angular.module("otusjs.application.storage").service("otusjs.application.storage.IndexedDbStorageService",t),t.$inject=["$q","$window"]}(),function(){"use strict";function t(t,e,i){function o(t){return l[t].lokiDb}function n(e,i){return l[e]={},l[e].loading=t.defer(),l[e].storages=i,l[e].lokiDb=new loki(e,{autoload:!0,autoloadCallback:function(){c(e)}}),l[e].loading.promise}function r(e,i){return l[e]={},l[e].loading=t.defer(),l[e].storages=i,l[e].lokiDb=new loki(e,{autoload:!0,autoloadCallback:function(){a(e)}}),l[e].loading.promise}function s(t){return!!e.localStorage.getItem(t)}function c(t){l[t].storages.forEach(function(e){e.options||(e.options={}),e.initialize(o(t).addCollection(e.collectionName,e.options),o(t))}),o(t).saveDatabase(),l[t].loading.resolve()}function a(t){l[t].storages.forEach(function(e){e.initialize(o(t).getCollection(e.collectionName),o(t))}),l[t].loading.resolve()}var u=this,l={};u.getDb=o,u.newDb=n,u.loadDb=r,u.dbExists=s}angular.module("otusjs.application.storage").service("otusjs.application.storage.LocalStorageService",t),t.$inject=["$q","$window","Lokiwork"]}(),function(){"use strict";function t(t,e){function i(){return p=t.defer(),v=e.sessionStorage,d=!0,p.resolve(),p.promise}function o(){return d}function n(t,e){return v.setItem(t,e)}function r(t){return v.getItem(t)}function s(t){return v.removeItem(t)}function c(){return v.clear()}function a(t){return v.key(t)}function u(){return v.keys()}function l(){return v.length()}var f=this,v=null,d=!1,p=null;f.initialize=i,f.isReady=o,f.setItem=n,f.getItem=r,f.removeItem=s,f.clear=c,f.key=a,f.keys=u,f.length=l}angular.module("otusjs.application.storage").service("otusjs.application.storage.SessionStorageService",t),t.$inject=["$q","$window"]}(),function(){"use strict";function t(t,e,i){function o(){return v=t.defer(),e.initialize().then(c),i.initialize().then(a),v.promise}function n(){return v=t.defer(),i.initialize().then(a),v.promise}function r(){return v=t.defer(),e.initialize().then(c),v.promise}function s(){return f}function c(){f=e.isReady()&&i.isReady(),u()}function a(){f=e.isReady()&&i.isReady(),u()}function u(){s()&&v.resolve("Application start data loaded.")}var l=this,f=!1,v=null;l.local=e,l.session=i,l.initialize=o,l.initializeSession=n,l.initializeLocal=r,l.isReady=s}angular.module("otusjs.application.storage").service("otusjs.application.storage.StorageService",t),t.$inject=["$q","otusjs.application.storage.LocalStorageService","otusjs.application.storage.SessionStorageService"]}(),function(){"use strict";function t(t,e){function i(){return t.whenActivityFacadeServiceReady().then(function(t){o(t),n()})}function o(t){var i=e.getSelectedActivities()[0];t.useActivity(i),t.openSurveyActivity(e.getLoggedUser()),e.setActivityToPlay(i)}function n(){t.whenActivityPlayerServiceReady().then(function(t){t.setup()})}this.load=i}angular.module("otusjs.activity.business").service("otusjs.activity.business.ActivityPlayerService",t),t.$inject=["otusjs.activity.core.ModuleService","otusjs.activity.core.ContextService"]}(),function(){"use strict";angular.module("otusjs.activity.business",[])}(),function(){"use strict";function t(t,e,i,o){function n(t){var o=e.getLoggedUser();l().then(function(e){d?(i.createFromPaperActivity(t,o,e,d),d=null):i.createFromSurvey(t,o,e)})}function r(){return l().then(function(t){return i.listAll(t)})}function s(){return i.listAvailables()}function c(t){d=t}function a(t){e.selectActivities(t)}function u(){return{list:function(){return e.getSelectedActivities()},discard:function(){var t=e.getSelectedActivities().map(function(t){return t.isDiscarded=!0,t});i.discard(t),e.clearSelectedActivities()}}}function l(){return e.getSelectedParticipant()}function f(){return o.listAll()}var v=this,d=null;v.initializePaperActivityData=c,v.add=n,v.listAll=r,v.listAvailables=s,v.selectActivities=a,v.getSelectedActivities=u,v.getSelectedParticipant=l,v.listActivityCheckers=f}angular.module("otusjs.activity.business").service("otusjs.activity.business.ParticipantActivityService",t),t.$inject=["otusjs.activity.core.ModuleService","otusjs.activity.core.ContextService","otusjs.activity.repository.ActivityRepositoryService","otusjs.activity.repository.UserRepositoryService"]}(),function(){"use strict";function t(t,e){function i(){I.clear(),c()}function o(){d()}function n(){E.removeItem(x)}function r(){if(p(),!s())throw new Error("There is no active activity context.","activity/context-service.js",61)}function s(){return!!E.getItem(x)}function c(){p(),E.setItem(x,I.toJson())}function a(t){return p(),I.getData(t)}function u(t,e){p(),I.setData(t,e),c()}function l(t){p(),I.removeData(t),c()}function f(t){I=t.create(x)}function v(t){E=t}function d(){r(),I.fromJson(E.getItem(x))}function p(){if(!I)throw new Error("Internal context is not initialized.","activity-context-service.js",159);if(!E)throw new Error("Internal storage is not initialized.","activity-context-service.js",165)}function g(){return C.promise}function y(e){C=t.defer(),e&&C.resolve(e)}function S(){return L}function j(t){L=t}function m(){return a("selectedActivities")||[]}function h(){u("selectedActivities",[])}function A(t){u("selectedActivities",t),e.fireActivitySelected(t)}function b(){return a("activityToPlay")}function P(t){u("activityToPlay",t)}function $(){return!!a("activityToPlay")}var D=this,I=null,E=null,x="activity_context",C=t.defer(),L=null;D.begin=i,D.restore=o,D.end=n,D.isValid=r,D.hasContextActive=s,D.save=c,D.configureContext=f,D.configureStorage=v,D.getData=a,D.setData=u,D.removeData=l,D.getSelectedParticipant=g,D.setSelectedParticipant=y,D.getLoggedUser=S,D.setLoggedUser=j,D.getSelectedActivities=m,D.clearSelectedActivities=h,D.selectActivities=A,D.getActivityToPlay=b,D.setActivityToPlay=P,D.existsActivityToPlay=$}angular.module("otusjs.activity.core").service("otusjs.activity.core.ContextService",t),t.$inject=["$q","otusjs.activity.core.EventService"]}(),function(){"use strict";function t(){function t(t){u(f,t,f.length)}function e(t){var e=t.name;f[e]=t}function i(t){a(v,t,v.length)}function o(t){v.push(t)}function n(t){a(d,t,d.length)}function r(t){d.push(t)}function s(t){a(p,t,p.length)}function c(t){p.push(t)}function a(t,e,i){for(var o=0;o<i;o++)t[o](e)}function u(t,e,i){for(var o in t)t[o](e)}var l=this,f={},v=[],d=[],p=[];l.fireParticipantSelected=t,l.onParticipantSelected=e,l.fireActivitySelected=i,l.onActivitySelected=o,l.fireLogin=n,l.onLogin=r,l.fireLogout=s,l.onLogout=c}angular.module("otusjs.activity.core").service("otusjs.activity.core.EventService",t)}(),function(){"use strict";function t(t,e,i){function o(t){e.configureContext(t)}function n(t){e.configureStorage(t)}function r(t){y.DataSource.Activity=t,m.resolve(y.DataSource.Activity.getSurveyDataSet())}function s(t){y.Model.ActivityFacadeService=t,h.resolve(y.Model.ActivityFacadeService)}function c(t){y.Model.ActivityPlayerService=t,A.resolve(y.Model.ActivityPlayerService)}function a(t){y.DataSource.User=t}function u(t){y.Model[t.OBJECT_TYPE]=t}function l(){return y.RemoteStorage.Activity&&(S=t.defer(),S.resolve(y.RemoteStorage.Activity)),{whenReady:function(){return S.promise}}}function f(t){y.RemoteStorage.Activity=t,S.resolve(y.RemoteStorage.Activity)}function v(){return y.DataSource.Activity&&(j=t.defer()),j.promise}function d(){return y.Model.ActivityFacadeService&&(h=t.defer(),h.resolve(y.Model.ActivityFacadeService)),h.promise}function p(){return y.Model.ActivityPlayerService&&(A=t.defer(),A.resolve(y.Model.ActivityPlayerService)),A.promise}function g(){return y.DataSource.Activity&&(m=t.defer(),m.resolve(y.DataSource.Activity.getSurveyDataSet())),m.promise}var y=this,S=t.defer(),j=t.defer(),m=t.defer(),h=t.defer(),A=t.defer();y.RemoteStorage={},y.DataSource={},y.Event=i,y.Model={},y.configureContext=o,y.configureStorage=n,y.configureActivityDataSourceService=r,y.configureActivityFacadeService=s,y.configureActivityPlayerService=c,y.configureUserDataSourceService=a,y.addModel=u,y.getActivityRemoteStorage=l,y.setActivityRemoteStorage=f,y.whenActivityDataSourceServiceReady=v,y.whenActivityFacadeServiceReady=d,y.whenActivityPlayerServiceReady=p,y.whenSurveyDataSourceServiceReady=g}angular.module("otusjs.activity.core").service("otusjs.activity.core.ModuleService",t),t.$inject=["$q","otusjs.activity.core.ContextService","otusjs.activity.core.EventService"]}(),function(){"use strict";function t(t){t.execute()}angular.module("otusjs.activity.core",[]).run(t),t.$inject=["otusjs.activity.core.ServiceLoader"]}(),function(){"use strict";function t(t){function e(){t.Service={},t.DataSource={}}this.execute=e}angular.module("otusjs.activity.core").service("otusjs.activity.core.ServiceLoader",t),t.$inject=["otusjs.activity.core.ModuleService"]}(),function(){"use strict";angular.module("otusjs.activity.repository",[])}(),function(){"use strict";function t(t){function e(t,e){a=t,u=e}function i(t){var e=a.insert(t);return u.saveDatabase(),e}function o(t){a.update(t),u.saveDatabase()}function n(){a.clear(),c.options.unique.forEach(function(t){a.constraints.unique[t].keyMap={},a.constraints.unique[t].lokiMap={}}),u.saveDatabase()}function r(t){return a.insert({name:"datasource",dataMap:t}),c.getDatasource}function s(){var t=a.findOne({name:"datasource"});if(t)return t.dataMap}var c=this,a={},u=null;t.defer(),c.collectionName="activities",c.options={unique:["_id"]},c.initialize=e,c.insert=i,c.update=o,c.clear=n,c.getDatasource=s,c.registerDatasource=r}angular.module("otusjs.activity.storage").service("otusjs.activity.storage.ActivityLocalStorageService",t),t.$inject=["$q"]}(),function(){"use strict";angular.module("otusjs.activity.storage",[])}(),function(){"use strict";function t(){function t(t,e){n=t,r=e}function e(){return n}function i(){r.saveDatabase()}var o=this,n={},r=null;o.collectionName="surveys",o.initialize=t,o.getCollection=e,o.save=i}angular.module("otusjs.activity.storage").service("otusjs.activity.storage.SurveyStorageService",t)}(),function(){"use strict";function t(t){function e(){s(),v=!0}function i(){v=!0}function o(){s(),v=!1}function n(){r()}function r(){if(!v)throw new Error("Does not exist a valid session.","dashboard-context-service.js",27)}function s(){a()}function c(){return d.promise}function a(e){d=t.defer(),e&&d.resolve(e)}function u(){return p.promise}function l(e){p=t.defer(),e&&p.resolve(e)}var f=this,v=!1,d=t.defer(),p=t.defer();f.begin=e,f.restore=i,f.end=o,f.isValid=n,f.getSelectedParticipant=c,f.setSelectedParticipant=a,f.getLoggedUser=u,f.setLoggedUser=l}angular.module("otusjs.otus.dashboard.core").service("otusjs.otus.dashboard.core.ContextService",t),t.$inject=["$q"]}(),function(){"use strict";function t(){function t(t){s(a,t,a.length)}function e(t){a.push(t)}function i(t){s(u,t,u.length)}function o(t){u.push(t)}function n(t){s(l,t,l.length)}function r(t){l.push(t)}function s(t,e,i){for(var o=0;o<i;o++)t[o](e)}var c=this,a=[],u=[],l=[];c.fireParticipantSelected=t,c.onParticipantSelected=e,c.fireLogin=i,c.onLogin=o,c.fireLogout=n,c.onLogout=r}angular.module("otusjs.otus.dashboard.core").service("otusjs.otus.dashboard.core.EventService",t)}(),function(){"use strict";function t(t,e){function i(){t.restore()}var o=this;o.Event=e,o.recover=i}angular.module("otusjs.otus.dashboard.core").service("otusjs.otus.dashboard.core.ModuleService",t),t.$inject=["otusjs.otus.dashboard.core.ContextService","otusjs.otus.dashboard.core.EventService"]}(),function(){"use strict";angular.module("otusjs.otus.dashboard.core",[])}(),
function(){"use strict";function t(t,e){function i(){return t.getSelectedParticipant()}function o(){return t.getLoggedUser()}var n=this;n.getSelectedParticipant=i,n.getLoggedUser=o}angular.module("otusjs.otus.dashboard.service").service("otusjs.otus.dashboard.service.DashboardService",t),t.$inject=["otusjs.otus.dashboard.core.ContextService","otusjs.otus.dashboard.core.EventService"]}(),function(){"use strict";angular.module("otusjs.otus.dashboard.service",[])}(),function(){"use strict";angular.module("otusjs.laboratory.business",[])}(),function(){"use strict";function t(){function t(){return new e}var i=this;return i.create=t,i}function e(){function t(t,r){var s={};return s.recruitment_number=t.recruitmentNumber,s.participant_name=t.name,s.gender=t.sex,s.birthday=e(new Date(t.birthdate.value)),s.cq_group=void 0!==r.collectGroupName&&r.collectGroupName!==n?r.collectGroupName:o,s.tubes=r.tubes,i(s.tubes),JSON.stringify(s)}function e(t){var e=new Date(t);return e.getDate()+"/"+(e.getMonth()+1)+"/"+e.getFullYear()}function i(t){var e={};e.GEL="Gel",e.FLUORIDE="Fluoreto",e.EDTA="EDTA",e.URINE="Urina",e.CITRATE="Citrato",e.EDTA_DNA="EDTA DNA",e.FASTING="Jejum",e.MIDDLE="Meio",e.POST_OVERLOAD="Pós",e.NONE="",t.forEach(function(t){t.label=e[t.type]+" "+e[t.moment]})}var o="Nenhum",n="DEFAULT";this.toJson=t}angular.module("otusjs.laboratory.business").factory("otusjs.laboratory.business.ParticipantLaboratoryFactory",t),t.$inject=[]}(),function(){"use strict";function t(t,e,i,o,n){function r(t){n.onParticipantSelected(t)}function s(){return c().then(function(t){return f.participant=t,e.initializeLaboratory(t).then(function(t){return f.laboratory=t,t})})}function c(){return i.getSelectedParticipant()}function a(){var i=t.defer();return c().then(function(t){e.getLaboratory(t).then(function(e){f.participant=t,f.laboratory=e,e?i.resolve(!0):i.resolve(!1)})}),i.promise}function u(){return c().then(function(t){e.getLaboratory(t).then(function(t){f.laboratory=t})})}function l(){return o.create().toJson(f.participant,f.laboratory)}var f=this;f.participant={},f.tubes={},f.initializeLaboratory=s,f.getSelectedParticipant=c,f.hasLaboratory=a,f.getLaboratory=u,f.onParticipantSelected=r,f.toJson=l}angular.module("otusjs.laboratory.business").service("otusjs.laboratory.business.ParticipantLaboratoryService",t),t.$inject=["$q","otusjs.laboratory.repository.ParticipantLaboratoryRepositoryService","otusjs.laboratory.core.ContextService","otusjs.laboratory.business.ParticipantLaboratoryFactory","otusjs.laboratory.core.EventService"]}(),function(){"use strict";function t(t,e){function i(){j.clear(),c()}function o(){d()}function n(){m.removeItem(h)}function r(){if(p(),!s())throw new Error("There is no a laboratory context.","laboratory/context-service.js",57)}function s(){return!!m.getItem(h)}function c(){p(),m.setItem(h,j.toJson())}function a(t){return p(),j.getData(t)}function u(t,e){p(),j.setData(t,e),c()}function l(t){p(),j.removeData(t),c()}function f(t){j=t.create(h)}function v(t){m=t}function d(){r(),j.fromJson(m.getItem(h))}function p(){if(!j)throw new Error("Internal context is not initialized.","context-service.js",111);if(!m)throw new Error("Internal storage is not initialized.","context-service.js",114)}function g(){return A.promise}function y(e){A=t.defer(),e&&A.resolve(e)}var S=this,j=null,m=null,h="laboratory_context",A=t.defer();S.begin=i,S.restore=o,S.end=n,S.isValid=r,S.hasContextActive=s,S.save=c,S.configureContext=f,S.configureStorage=v,S.getData=a,S.setData=u,S.removeData=l,S.getSelectedParticipant=g,S.setSelectedParticipant=y}angular.module("otusjs.laboratory.core").service("otusjs.laboratory.core.ContextService",t),t.$inject=["$q","otusjs.laboratory.core.EventService"]}(),function(){"use strict";function t(){function t(t){i(n,t,n.length)}function e(t){var e=t.name;n[e]=t}function i(t,e,i){for(var o in t)t[o](e)}var o=this,n={};o.fireParticipantSelected=t,o.onParticipantSelected=e}angular.module("otusjs.laboratory.core").service("otusjs.laboratory.core.EventService",t)}(),function(){"use strict";function t(t,e,i){function o(t){e.configureContext(t)}function n(t){e.configureStorage(t)}function r(){return c.RemoteStorage.ParticipantLaboratory&&(a=t.defer(),a.resolve(c.RemoteStorage.ParticipantLaboratory)),{whenReady:function(){return a.promise}}}function s(t){c.RemoteStorage.ParticipantLaboratory=t,a.resolve(c.RemoteStorage.ParticipantLaboratory)}var c=this,a=t.defer();t.defer(),c.RemoteStorage={},c.DataSource={},c.Event=i,c.configureContext=o,c.configureStorage=n,c.getParticipantLaboratoryRemoteStorage=r,c.setParticipantLaboratoryRemoteStorage=s}angular.module("otusjs.laboratory.core").service("otusjs.laboratory.core.ModuleService",t),t.$inject=["$q","otusjs.laboratory.core.ContextService","otusjs.laboratory.core.EventService"]}(),function(){"use strict";function t(){}angular.module("otusjs.laboratory.core",[]).run(t),t.$inject=[]}(),function(){"use strict";angular.module("otusjs.laboratory.repository",[])}(),function(){"use strict";angular.module("otusjs.laboratory.storage",[])}(),function(){"use strict";function t(t){function e(t,e){s=t,c=e}function i(t){var e=s.insert(t);return c.saveDatabase(),e}function o(t){s.update(t),c.saveDatabase()}function n(){s.clear(),r.options.unique.forEach(function(t){s.constraints.unique[t].keyMap={},s.constraints.unique[t].lokiMap={}}),c.saveDatabase()}var r=this,s={},c=null;t.defer(),r.collectionName="laboratory_participant",r.options={unique:["_id"]},r.initialize=e,r.insert=i,r.update=o,r.clear=n}angular.module("otusjs.laboratory.storage").service("otusjs.laboratory.storage.ParticipantLaboratoryLocalStorageService",t),t.$inject=["$q"]}(),function(){"use strict";angular.module("otusjs.participant.business",[])}(),function(){"use strict";function t(){return function(t,e){return t.filter(function(t){var i=new RegExp(e,"gi");return i.test(t.name)||i.test(t.recruitmentNumber.toString())})}}angular.module("otusjs.participant.business").filter("participantQuick",t)}(),function(){"use strict";function t(t,e,i,o,n){function r(){var t=n.defer();return i.listIdexers().then(function(e){e&&(u=o.newParticipantFilter(e),s(e),v=!0,t.resolve())}),t.promise}function s(t){for(var e=0;e<t.length;e++)t[e].stringfiedRN=String(t[e].recruitmentNumber);u=o.newParticipantFilter(t)}function c(t){return v||r(),u.perform(t)}function a(i){f=[],t.selectParticipant(i),e.fireParticipantSelected(i)}var u,l=this,f=[];l.setup=r,l.filter=c,l.selectParticipant=a;var v}angular.module("otusjs.participant.business").service("otusjs.participant.business.ParticipantSearchService",t),t.$inject=["otusjs.participant.core.ContextService","otusjs.participant.core.EventService","otusjs.participant.repository.ParticipantRepositoryService","otusjs.utils.SearchQueryFactory","$q"]}(),function(){"use strict";function t(t){function e(){s()}function i(){v(),t.fireParticipantSelected(c("selectedParticipant"))}function o(){j.removeItem(m)}function n(){if(d(),!r())throw new Error("There is no active participant context.","participant/context-service.js",56)}function r(){return!!j.getItem(m)}function s(){d(),j.setItem(m,S.toJson())}function c(t){return d(),S.getData(t)}function a(t,e){d(),S.setData(t,e),s()}function u(t){d(),S.removeData(t),s()}function l(t){S=t.create(m)}function f(t){j=t}function v(){n(),S.fromJson(j.getItem(m))}function d(){if(!S)throw new Error("Internal context is not initialized.");if(!j)throw new Error("Internal storage is not initialized.")}function p(t){a("selectedParticipant",t)}function g(){return S.getData("selectedParticipant")}var y=this,S=null,j=null,m="participant_context";y.begin=e,y.restore=i,y.end=o,y.isValid=n,y.hasContextActive=r,y.save=s,y.getData=c,y.setData=a,y.removeData=u,y.configureContext=l,y.configureStorage=f,y.selectParticipant=p,y.getSelectedParticipant=g}angular.module("otusjs.participant.core").service("otusjs.participant.core.ContextService",t),t.$inject=["otusjs.participant.core.EventService"]}(),function(){"use strict";function t(){function t(t){n(s,t,s.length)}function e(t){s.push(t)}function i(t){n(c,t,c.length)}function o(t){c.push(t)}function n(t,e,i){for(var o=0;o<i;o++)t[o](e)}var r=this,s=[],c=[];r.fireParticipantSelected=t,r.onParticipantSelected=e,r.fireLogout=i,r.onLogout=o}angular.module("otusjs.participant.core").service("otusjs.participant.core.EventService",t)}(),function(){"use strict";function t(t,e){function i(e){t.configureContext(e)}function o(e){t.configureStorage(e)}function n(t){r.DataSource.Participant=t}var r=this;r.DataSource={},r.Event=e,r.configureContext=i,r.configureStorage=o,r.configureParticipantDataSourceService=n}angular.module("otusjs.participant.core").service("otusjs.participant.core.ModuleService",t),t.$inject=["otusjs.participant.core.ContextService","otusjs.participant.core.EventService"]}(),function(){"use strict";function t(t){t.execute()}angular.module("otusjs.participant.core",[]).run(t),t.$inject=["otusjs.participant.core.ServiceLoader"]}(),function(){"use strict";function t(t){function e(){t.Service={},t.DataSource={}}this.execute=e}angular.module("otusjs.participant.core").service("otusjs.participant.core.ServiceLoader",t),t.$inject=["otusjs.participant.core.ModuleService"]}(),function(){"use strict";angular.module("otusjs.participant.model",[])}(),function(){"use strict";function t(){function t(t){return new e(t)}function i(t){return new e(t)}var o=this;return o.OBJECT_TYPE="Participant",o.create=t,o.fromJsonObject=i,o}function e(t){t.id,t.name,t.surname,t.fieldCenter}angular.module("otusjs.participant.model").factory("otusjs.participant.model.Participant",t),t.$inject=[]}(),function(){"use strict";angular.module("otusjs.participant.repository",[])}(),function(){"use strict";function t(t){function e(){var e=t.DataSource.Participant;if(e)return e.listIndexers()}this.listIdexers=e}angular.module("otusjs.participant.repository").service("otusjs.participant.repository.ParticipantRepositoryService",t),t.$inject=["otusjs.participant.core.ModuleService"]}(),function(){"use strict";angular.module("otusjs.participant.storage",[])}(),function(){"use strict";function t(){function t(t,e){n=t,r=e}function e(){return n}function i(){r.saveDatabase()}var o=this,n={},r=null;o.collectionName="participants",o.initialize=t,o.getCollection=e,o.save=i}angular.module("otusjs.participant.storage").service("otusjs.participant.storage.ParticipantStorageService",t)}(),function(){"use strict";angular.module("otusjs.user.business",[])}(),function(){"use strict";function t(t){function e(e){return t.Proxy.LoginProxy.authenticate(e)}this.authenticateUserData=e}angular.module("otusjs.user.business").service("otusjs.user.business.UserAuthenticationService",t),t.$inject=["otusjs.user.core.ModuleService"]}(),function(){"use strict";function t(t,e,i,o){function n(e){var i=o.listIdexers();l=e?t("userQuick")(i,e):[]}function r(){return o.listIdexers()}function s(){return l}function c(){return l.length>0}function a(t){l=[],e.selectUser(t),i.fireUserSelected(t)}var u=this,l=[];u.filter=n,u.getAll=r,u.getFilteredData=s,u.hasResultFilter=c,u.selectUser=a}angular.module("otusjs.user.business").service("otusjs.user.business.UserSearchService",t),t.$inject=["$filter","otusjs.user.core.ContextService","otusjs.user.core.EventService","otusjs.user.business.UserRepositoryService"]}(),function(){"use strict";function t(t){function e(){s()}function i(){v(),t.fireUserSelected(S.getData(h))}function o(){j.removeItem(m)}function n(){if(d(),!r())throw new Error("There is no active user context.","user/context-service.js",61)}function r(){return!!j.getItem(m)}function s(){d(),j.setItem(m,S.toJson())}function c(t){return d(),S.getData(t)}function a(t,e){d(),S.setData(t,e),s()}function u(t){d(),S.removeData(t),s()}function l(t){S=t.create(m)}function f(t){j=t}function v(){n(),S.fromJson(j.getItem(m))}function d(){if(!S)throw new Error("Internal context is not initialized.");if(!j)throw new Error("Internal storage is not initialized.")}function p(t){a("selectedUser",t)}function g(){return S.getData("selectedUser")}var y=this,S=null,j=null,m="user_context",h="selectedUser";y.begin=e,y.restore=i,y.end=o,y.isValid=n,y.hasContextActive=r,y.save=s,y.getData=c,y.setData=a,y.removeData=u,y.configureContext=l,y.configureStorage=f,y.selectUser=p,y.getSelectedUser=g}angular.module("otusjs.user.core").service("otusjs.user.core.ContextService",t),t.$inject=["otusjs.user.core.EventService"]}(),function(){"use strict";function t(){function t(t,e,i){for(var o=0;o<i;o++)t[o](e)}function e(e){t(v,e,v.length)}function i(t){v.push(t)}function o(e){t(f,e,f.length)}function n(t){f.push(t)}function r(e){t(d,e,d.length)}function s(t){d.push(t)}function c(e){t(p,e,p.length)}function a(t){p.push(t)}function u(e){t(f,e,f.length)}var l=this,f=[],v=[],d=[],p=[];l.fireUserIndexersLoaded=e,l.onUserIndexersLoaded=i,l.fireUsersResquet=o,l.onUserAuthentication=n,l.fireUserDataSourceProvided=r,l.onUserDataSourceProvided=s,l.fireLoginProxyProvided=c,l.onLoginProxyProvided=a,l.fireUserAuthentication=u,l.onUserAuthentication=n}angular.module("otusjs.user.core").service("otusjs.user.core.EventService",t)}(),function(){"use strict";function t(t,e){function i(e){t.configureContext(e)}function o(e){t.configureStorage(e)}function n(t){s.DataSource.User=t}function r(t){s.Proxy.LoginProxy=t,s.Proxy.LoginProxy.initialize()}var s=this;s.DataSource={},s.Proxy={},s.Service={},s.configureContext=i,s.configureStorage=o,s.configureUserDataSource=n,s.configureLoginProxy=r}angular.module("otusjs.user.core").service("otusjs.user.core.ModuleService",t),t.$inject=["otusjs.user.core.ContextService","otusjs.user.core.EventService"]}(),function(){"use strict";function t(t){t.execute()}angular.module("otusjs.user.core",[]).run(t),t.$inject=["otusjs.user.core.ServiceLoader"]}(),function(){"use strict";function t(t,e){function i(){t.Service={},t.Service.UserAuthenticationService={},t.Service.UserAuthenticationService.authenticateUserData=e.authenticateUserData}this.execute=i}angular.module("otusjs.user.core").service("otusjs.user.core.ServiceLoader",t),t.$inject=["otusjs.user.core.ModuleService","otusjs.user.business.UserAuthenticationService"]}(),function(){"use strict";angular.module("otusjs.user.model",[])}(),function(){"use strict";function t(){function t(t){return new e(t)}function i(t){return new e(t)}var o=this;return o.OBJECT_TYPE="User",o.create=t,o.fromJsonObject=i,o}function e(t){t.id,t.uuid,t.name,t.surname,t.email,t.phone,t.token}angular.module("otusjs.user.model").factory("otusjs.user.model.User",t),t.$inject=[]}(),function(){"use strict";angular.module("otusjs.user.storage",[])}(),function(){"use strict";function t(){function t(t,e){n=t,r=e}function e(){return n}function i(){r.saveDatabase()}var o=this,n={},r=null;o.collectionName="users",o.initialize=t,o.getCollection=e,o.save=i}angular.module("otusjs.user.storage").service("otusjs.user.storage.UserStorageService",t)}(),function(){"use strict";angular.module("otusjs.user.repository",[])}(),function(){"use strict";function t(t,e){function i(){return[]}this.listIdexers=i}angular.module("otusjs.user.business").service("otusjs.user.business.UserRepositoryService",t),t.$inject=["otusjs.user.core.ModuleService","otusjs.user.core.EventService"]}(),function(){"use strict";function t(){function t(){a=!1}function e(){a=!0}function i(){a=!0}function o(){s()}function n(t){}function r(t){}function s(){if(a)throw new Error("Already exists an initialized session.","access-context-service.js",34)}var c=this,a=!1;c.isValid=o,c.begin=t,c.ignore=e,c.end=i,c.configureContext=n,c.configureStorage=r}angular.module("otusjs.user.access.core").service("otusjs.user.access.core.ContextService",t)}(),function(){"use strict";function t(){function t(t){n(s,t,s.length)}function e(t){s.push(t)}function i(t){n(c,t,c.length)}function o(t){c.push(t)}function n(t,e,i){for(var o=0;o<i;o++)t[o](e)}var r=this,s=[],c=[];r.fireLogin=t,r.onLogin=e,r.fireLogout=i,r.onLogout=o}angular.module("otusjs.user.access.core").service("otusjs.user.access.core.EventService",t)}(),function(){"use strict";function t(t,e){function i(e){t.configureContext(e)}function o(e){t.configureStorage(e)}function n(){t.ignore()}function r(t){e.onLogin(t)}function s(t){e.onLogout(t)}var c=this;c.configureContext=i,c.configureStorage=o,c.ignore=n,c.onLogin=r,c.onLogout=s}angular.module("otusjs.user.access.core").service("otusjs.user.access.core.ModuleService",t),t.$inject=["otusjs.user.access.core.ContextService","otusjs.user.access.core.EventService"]}(),function(){"use strict";function t(t){t.Service={},t.DataSource={}}angular.module("otusjs.user.access.core",[]).run(t),t.$inject=["otusjs.user.access.core.ModuleService"]}(),function(){"use strict";function t(t,e){function i(i){return e.Service.Authentication.authenticateUserData(i).then(function(e){e.hasErrors||t.fireLogin(e.data)})}this.authenticate=i}angular.module("otusjs.user.access.service").service("otusjs.user.access.service.LoginService",t),t.$inject=["otusjs.user.access.core.EventService","otusjs.user.access.core.ModuleService"]}(),function(){"use strict";function t(t){function i(){o()}function o(){t.show({controller:e,templateUrl:"app/ux-component/user-logout/logout-dialog.html",clickOutsideToClose:!0})}this.logout=i}function e(t,e,i,o){t.hide=function(){e.hide()},t.cancel=function(){e.cancel()},t.answer=function(){o.logout().then(function(){e.hide(),i.activateLogin()})}}function i(t,e){function i(){return t.invalidate().then(function(){e.fireLogout()})}this.logout=i}angular.module("otusjs.user.access.service").service("otusjs.user.access.service.LogoutService",t),t.$inject=["$mdDialog"],e.$inject=["$scope","$mdDialog","otusjs.application.state.ApplicationStateService","otusjs.user.access.service.LogoutServiceService"],angular.module("otusjs.user.access.service").service("otusjs.user.access.service.LogoutServiceService",i),i.$inject=["otusjs.deploy.AuthenticationRestService","otusjs.user.access.core.EventService"]}(),function(){"use strict";angular.module("otusjs.user.access.service",[])}(),function(){"use strict";function t(t,e){function i(i){var o=e.getUserResource(),n=t.defer();return o.create(i,function(t){t.hasErrors?n.reject(t):n.resolve(t)},function(t){n.reject(t)}),n.promise}this.executeSignup=i}angular.module("otusjs.user.access.service").service("otusjs.user.access.service.SignupService",t),t.$inject=["$q","OtusRestResourceService"]}(),function(){"use strict";function t(t){function e(){return t.surveyActivity}function i(e){t.surveyActivity=e,u.surveyActivity=e}function o(i,o,n,r){return r?t.createPaperActivity(i,o,n,r):t.createActivity(i,o,n,n),e()}function n(e){l=e,t.openActivitySurvey(l)}function r(){t.initializeActivitySurvey()}function s(e,i,o,n){return t.createQuestionFill(e,i,o,n)}function c(e){t.fillQuestion(e)}function a(e){return t.getFillingByQuestionID(e)}var u=this,l=null;u.getActivity=e,u.useActivity=i,u.createActivity=o,u.createQuestionFill=s,u.fillQuestion=c,u.openSurveyActivity=n,u.initializeActivitySurvey=r,u.getFillingByQuestionID=a}angular.module("otusjs.deploy").service("otusjs.deploy.model.ActivityFacadeService",t),t.$inject=["otusjs.model.activity.ActivityFacadeService"]}(),function(){"use strict";function t(t){function e(){return r}function i(e){return t.get(n+e)}var o=this,n="otusjs.model.activity.",r=[];o.getModels=e,function(){r=r.concat([i("ActivityParticipantDataFactory"),i("ActivityStatusFactory"),i("ActivityFactory"),i("ActivityUserFactory"),i("AnswerFillFactory"),i("InterviewFactory"),i("InterviewerFactory")])}()}angular.module("otusjs.deploy").service("otusjs.deploy.model.ActivityModelPoolService",t),t.$inject=["$injector"]}(),function(){"use strict";function t(t){function e(){return r}function i(e){return t.get(n+e)}var o=this,n="",r=[];o.getModels=e,function(){r=r.concat([i("SurveyFactory"),i("SurveyFormFactory"),i("SurveyIdentityFactory"),i("SurveyMetaInfoFactory")])}()}angular.module("otusjs.deploy").service("otusjs.deploy.model.SurveyModelPoolService",t),t.$inject=["$injector"]}(),function(){"use strict";function t(t,e,i,o,n,r,s){function c(){t.initialize(),e.initialize()}function a(){i.initialize(),o.initialize(),n.initialize(),r.initialize(),s.initialize()}var u=this;u.initializeOpenResources=c,u.initializeRestrictResources=a}angular.module("otusjs.deploy").service("otusjs.deploy.OtusApiService",t),t.$inject=["otusjs.deploy.AuthenticationRestService","otusjs.deploy.InstallerRestService","otusjs.deploy.ActivityRestService","otusjs.deploy.ProjectConfigurationRestService","otusjs.deploy.ParticipantRestService","otusjs.deploy.UserRestService","otusjs.deploy.ParticipantLaboratoryRestService"]}(),function(){"use strict";function t(t){function e(){return n}function i(e,i,o){var n=e.defer();return o.isDeployed().then(function(){try{i.isValid(),n.resolve()}catch(e){n.resolve(t.DASHBOARD)}}),n.promise}function o(e){e.ready(function(e){return e.data?t.LOGIN:t.INSTALLER})}var n=this;n.$get=[e],n.state={abstract:!0,name:t.ACCESS,template:'<div flex layout="column"><div ui-view flex layout="row"></div></div>',data:{redirect:i},resolve:{applicationReady:o}},i.$inject=["$q","otusjs.user.access.core.ContextService","otusjs.application.core.ModuleService"],o.$inject=["otusjs.deploy.InstallerRestService"]}angular.module("otusjs.deploy").provider("otusjs.deploy.AccessState",t),t.$inject=["STATE"]}(),function(){"use strict";function t(t){function e(){return i}var i=this;i.$get=[e],i.state={parent:t.ACCESS,name:t.LOGIN,url:"/"+t.LOGIN,templateUrl:"app/ux-component/user-login/login.html",controller:"otusjs.otus.uxComponent.LoginController as $ctrl"}}angular.module("otusjs.deploy").provider("otusjs.deploy.LoginState",t),t.$inject=["STATE"]}(),function(){"use strict";function t(t){function e(){return i}var i=this;i.$get=[e],i.state={parent:t.ACCESS,name:t.SIGNUP_RESULT,url:"/"+t.SIGNUP_RESULT,templateUrl:"app/ux-component/user-signup/signup-result.html",controller:"otusjs.otus.uxComponent.SignupController as $ctrl"}}angular.module("otusjs.deploy").provider("otusjs.deploy.SignupResultState",t),t.$inject=["STATE"]}(),function(){"use strict";function t(t){function e(){return i}var i=this;i.$get=[e],i.state={parent:t.ACCESS,name:t.SIGNUP,url:"/"+t.SIGNUP,templateUrl:"app/ux-component/user-signup/signup.html",controller:"otusjs.otus.uxComponent.SignupController as $ctrl"}}angular.module("otusjs.deploy").provider("otusjs.deploy.SignupState",t),t.$inject=["STATE"]}(),function(){"use strict";function t(t){function e(){return o}function i(t,e){e.isDeployed().then(function(){try{t.restore()}catch(e){t.begin()}})}var o=this;o.$get=[e],o.state={parent:t.DASHBOARD,name:t.ACTIVITY_ADDER,url:"/"+t.ACTIVITY_ADDER,template:'<otus-activity-adder layout="column" flex></otus-activity-adder>',onEnter:i},i.$inject=["otusjs.activity.core.ContextService","otusjs.application.core.ModuleService"]}angular.module("otusjs.deploy").provider("otusjs.deploy.ActivityAdderState",t),t.$inject=["STATE"]}(),function(){"use strict";function t(t){function e(){return n}function i(e,i,o,n){var r=e.defer();return o.isDeployed().then(function(){try{i.isValid(),i.restore(),r.resolve()}catch(e){r.resolve(t.DASHBOARD)}}),r.promise}function o(t,e,i){i.isDeployed().then(function(){try{t.restore(),e.restore()}catch(t){console.log(t)}})}var n=this;n.$get=[e],n.state={name:t.ACTIVITY_PLAYER,url:"/"+t.ACTIVITY_PLAYER,template:'<otus-activity-player layout="row" flex></otus-activity-player>',data:{redirect:i},resolve:{loadPlayerContext:o}},i.$inject=["$q","otusjs.activity.core.ContextService","otusjs.application.core.ModuleService","otusjs.deploy.model.ActivityFacadeService"],o.$inject=["otusjs.activity.core.ContextService","otusjs.application.session.core.ContextService","otusjs.application.core.ModuleService"]}angular.module("otusjs.deploy").provider("otusjs.deploy.ActivityPlayerState",t),t.$inject=["STATE"]}(),function(){"use strict";function t(t){function e(){return n}function i(e,i,o){var n=e.defer();return o.isDeployed().then(function(){try{i.isValid(),n.resolve()}catch(e){n.resolve(t.LOGIN)}}),n.promise}function o(t,e,i,o,n){o.isDeployed().then(function(){try{e.restore(),i.restore()}catch(t){console.log(t)}})}var n=this;n.$get=[e],n.state={parent:t.DASHBOARD,name:t.PARTICIPANT_ACTIVITY,url:"/"+t.PARTICIPANT_ACTIVITY,template:'<otus-activity-manager layout="column" flex></otus-activity-manager>',data:{redirect:i},resolve:{loadStateData:o}},i.$inject=["$q","otusjs.activity.core.ContextService","otusjs.application.core.ModuleService"],o.$inject=["otusjs.activity.core.ContextService","otusjs.participant.core.ContextService","otusjs.application.session.core.ContextService","otusjs.application.core.ModuleService","otusjs.deploy.ActivityDataSourceService"]}angular.module("otusjs.deploy").provider("otusjs.deploy.ActivityState",t),t.$inject=["STATE"]}(),function(){"use strict";function t(t){function e(){return o}function i(t,e){e.isDeployed().then(function(){try{t.restore()}catch(e){t.begin()}})}var o=this;o.$get=[e],o.state={parent:t.DASHBOARD,name:t.PAPER_ACTIVITY_ADDER,url:"/"+t.PAPER_ACTIVITY_ADDER,template:'<otus-paper-activity-adder layout="column" flex></otus-paper-activity-adder>',onEnter:i},i.$inject=["otusjs.activity.core.ContextService","otusjs.application.core.ModuleService"]}angular.module("otusjs.deploy").provider("otusjs.deploy.PaperActivityAdderState",t),t.$inject=["STATE"]}(),function(){"use strict";function t(t){function e(){return o}function i(t,e){e.isDeployed().then(function(){try{t.restore()}catch(e){t.begin()}})}var o=this;o.$get=[e],o.state={parent:t.DASHBOARD,name:t.PAPER_ACTIVITY_INITIALIZER,url:"/"+t.PAPER_ACTIVITY_INITIALIZER,template:'<otus-paper-activity-initializer layout="column" flex></otus-paper-activity-initializer>',onEnter:i},i.$inject=["otusjs.activity.core.ContextService","otusjs.application.core.ModuleService"]}angular.module("otusjs.deploy").provider("otusjs.deploy.PaperActivityInitializerState",t),t.$inject=["STATE"]}(),function(){"use strict";function t(t){function e(){return n}function i(e,i,o){var n=e.defer();return o.isDeployed().then(function(){try{i.isValid(),n.resolve()}catch(e){n.resolve(t.LOGIN)}}),n.promise}function o(t,e,i){i.isDeployed().then(function(){try{t.restore(),e.restore()}catch(t){console.log(t)}})}var n=this;n.$get=[e],n.state={parent:t.SESSION,name:t.DASHBOARD,url:"/"+t.DASHBOARD,template:'<otus-dashboard layout="column" flex></otus-dashboard>',data:{redirect:i},resolve:{loadParticipantContext:o}},i.$inject=["$q","otusjs.otus.dashboard.core.ContextService","otusjs.application.core.ModuleService"],o.$inject=["otusjs.participant.core.ContextService","otusjs.application.session.core.ContextService","otusjs.application.core.ModuleService"]}angular.module("otusjs.deploy").provider("otusjs.deploy.DashboardState",t),t.$inject=["STATE"]}(),function(){"use strict";function t(t){function e(){return o}function i(e,i){var o=e.defer();return i.ready(function(e){e.data?o.resolve(t.LOGIN):o.resolve()}),o.promise}var o=this;o.$get=[e],o.state={name:t.INSTALLER,url:"/"+t.INSTALLER,templateUrl:"app/ux-component/installer/initial-config.html",controller:"otusjs.otus.uxComponent.InitialConfigController as controller",data:{redirect:i}},i.$inject=["$q","otusjs.deploy.InstallerRestService"]}angular.module("otusjs.deploy").provider("otusjs.deploy.InstallerState",t),t.$inject=["STATE"]}(),function(){"use strict";function t(t){function e(){return n}function i(e,i,o){var n=e.defer();return o.isDeployed().then(function(){try{i.isValid(),n.resolve()}catch(e){n.resolve(t.LOGIN)}}),n.promise}function o(t,e,i,o){o.isDeployed().then(function(){try{e.restore(),i.restore()}catch(t){console.log(t)}})}var n=this;n.$get=[e],n.state={parent:t.DASHBOARD,name:t.LABORATORY,url:"/"+t.LABORATORY,template:"<otus-laboratory></otus-laboratory>",data:{redirect:i},resolve:{loadStateData:o}},i.$inject=["$q","otusjs.laboratory.core.ContextService","otusjs.application.core.ModuleService"],o.$inject=["otusjs.laboratory.core.ContextService","otusjs.participant.core.ContextService","otusjs.application.session.core.ContextService","otusjs.application.core.ModuleService"]}angular.module("otusjs.deploy").provider("otusjs.deploy.LaboratoryState",t),t.$inject=["STATE"]}(),function(){"use strict";function t(t){function e(){return i}var i=this;i.$get=[e],i.state={abstract:!0,parent:t.DASHBOARD,name:t.PARTICIPANT,url:"/"+t.PARTICIPANT,template:'<div id="participant-state-template" flex ui-view></div>'}}angular.module("otusjs.deploy").provider("otusjs.deploy.ParticipantState",t),t.$inject=["STATE"]}(),function(){"use strict";function t(t){function e(){return r}function i(e,i){i.isDeployed().then(function(){try{e.isValid()}catch(e){return t.LOGIN}})}function o(e,i){i.isDeployed().then(function(){try{e.restore()}catch(e){return t.LOGIN}})}function n(t,e){e.isDeployed().then(function(){try{t.isValid()}catch(e){t.end()}})}var r=this;r.$get=[e],r.state={abstract:!0,name:t.SESSION,template:'<div flex layout="column"><div flex layout="row" ui-view></div></div>',data:{redirect:i},resolve:{loadContext:o},onExit:n},i.$inject=["otusjs.application.session.core.ContextService","otusjs.application.core.ModuleService"],o.$inject=["otusjs.application.session.core.ContextService","otusjs.application.core.ModuleService"],n.$inject=["otusjs.application.session.core.ContextService","otusjs.application.core.ModuleService"]}angular.module("otusjs.deploy").provider("otusjs.deploy.SessionState",t),t.$inject=["STATE"]}(),function(){"use strict";function t(t,e){function i(e){var i=t.defer();return r(e,function(t){i.resolve(t)}),i.promise}function o(e){var i=t.defer();return c(e,function(t){i.resolve(t)}),i.promise}function n(t){return e.list(t.recruitmentNumber)}function r(t,e,i){u(s)(t,e,i)}function s(i){var o=t.defer();return e.save(i).then(function(t){i._id=t.data,o.resolve(i)}),o.promise}function c(t,e,i){u(a)(t,e,i)}function a(i){var o=t.defer();return e.update(i).then(function(t){o.resolve(i)}),o.promise}function u(t){return function e(i,o,n){n=n||0;var r=i[n];t(r).then(function(){++n,n<i.length?e(i,o,n):o&&o(i)})}}var l=this;l.insert=i,l.update=o,l.find=n}angular.module("otusjs.deploy").service("otusjs.deploy.ActivityRemoteStorageService",t),t.$inject=["$q","otusjs.deploy.ActivityRestService"]}(),function(){"use strict";function t(t,e){function i(i){var o=t.defer();return e.create(),o.promise}function o(i){var o=t.defer();return e.initializeLaboratory(i).then(function(t){o.resolve(t.data)}),o.promise}function n(i){var o=t.defer();return e.getLaboratory(i).then(function(t){o.resolve(t.data)}),o.promise}var r=this;r.insert=i,r.initializeLaboratory=o,r.getLaboratory=n}angular.module("otusjs.deploy").service("otusjs.deploy.ParticipantLaboratoryRemoteStorageService",t),t.$inject=["$q","otusjs.deploy.ParticipantLaboratoryRestService"]}(),function(){"use strict";function t(t){function e(){t.activateLogin()}this.tryAgain=e}angular.module("otusjs.application.http").controller("otusjs.application.http.ResponseErrorOfflineController",t),t.$inject=["otusjs.application.state.ApplicationStateService"]}(),function(){"use strict";function t(t,e,i){function o(t){l=t}function n(){l=null}function r(e){var o=t.defer();return u.whenReady().then(function(t){return t.insert(e).then(function(t){var e=i.insert(t);o.resolve(e)})}),o.promise}function s(e){var o=t.defer();return u.whenReady().then(function(t){t.update(e).then(function(t){i.update(t),o.resolve()})}),o.promise}function c(){var e=t.defer();return u.whenReady().then(function(t){return t.find({recruitmentNumber:l.recruitmentNumber}).then(function(t){i.clear();var o=i.insert(t);e.resolve(o)})}),e.promise}var a=this,u=e.getActivityRemoteStorage(),l=null;a.useParticipant=o,a.resetParticipantInUse=n,a.insert=r,a.listAll=c,a.update=s}angular.module("otusjs.activity.repository").service("otusjs.activity.repository.ActivityCollectionService",t),t.$inject=["$q","otusjs.activity.core.ModuleService","otusjs.activity.storage.ActivityLocalStorageService"]}(),function(){"use strict"
;function t(t,e,i,o,n){function r(t){if(!t)throw new Error("No participant selected to list activities.","activity-repository-service.js",63);return o.useParticipant(t),h?h.then(function(){return v()}):v()}function s(){return n.listAll().then(y)}function c(t,e,i){return f(t,e,i)}function a(t,e,i,o){return f(t,e,i,o)}function u(t){return d([j(t)])}function l(t){return d(t.map(j))}function f(t,i,n,r){var s=g();e.whenActivityFacadeServiceReady().then(function(e){var c=p(t,i,n,r,e);return o.insert(c).then(s.finish)})}function v(){return o.listAll().then(y)}function d(t){if(t&&t.length){var e=g();return o.update(t).then(e.finish)}throw new Error("No activity to update.","activity-repository-service.js",50)}function p(t,e,i,o,n){return t.map(function(t){var r=n.createActivity(t,e,i,o);return JSON.parse(r.toJson())})}function g(){var e=t.defer();return h=e.promise,{finish:function(){e.resolve()}}}function y(t){return Array.isArray(t)?t.map(function(t){return S(t)}):[S(t)]}function S(t){var i=e.Model[t.objectType].fromJsonObject(t);return i.$loki=t.$loki,i.meta=t.meta,i}function j(t){var e=JSON.parse(t.toJson());return e.$loki=t.$loki,e.meta=t.meta,e}var m=this,h=null;m.createFromSurvey=c,m.createFromPaperActivity=a,m.listAll=r,m.listAvailables=s,m.save=u,m.discard=l}angular.module("otusjs.activity.repository").service("otusjs.activity.repository.ActivityRepositoryService",t),t.$inject=["$q","otusjs.activity.core.ModuleService","otusjs.activity.core.ContextService","otusjs.activity.repository.ActivityCollectionService","otusjs.activity.repository.SurveyCollectionService"]}(),function(){"use strict";function t(t){function e(){return i(function(t){return t.getData().find()})}function i(e){return t.whenSurveyDataSourceServiceReady().then(e)}this.listAll=e}angular.module("otusjs.activity.repository").service("otusjs.activity.repository.SurveyCollectionService",t),t.$inject=["otusjs.activity.core.ModuleService"]}(),function(){"use strict";function t(t,e,i,o){function n(){return e.DataSource.User.listIndexers()}this.listAll=n}angular.module("otusjs.activity.repository").service("otusjs.activity.repository.UserRepositoryService",t),t.$inject=["$q","otusjs.activity.core.ModuleService","otusjs.activity.core.ContextService","otusjs.activity.core.EventService"]}(),function(){"use strict";function t(t,e,i){function o(t){v=t}function n(){v=null}function r(e){var o=t.defer();return f.whenReady().then(function(t){return t.insert(e).then(function(t){var e=i.insert(t);o.resolve(e)})}),o.promise}function s(e){var o=t.defer();return f.whenReady().then(function(t){t.update(e).then(function(t){i.update(t),o.resolve()})}),o.promise}function c(){var e=t.defer();return f.whenReady().then(function(t){return t.find({recruitmentNumber:v.recruitmentNumber}).then(function(t){i.clear();var o=i.insert(t);e.resolve(o)})}),e.promise}function a(){var e=t.defer();return f.whenReady().then(function(t){return t.initializeLaboratory(v.recruitmentNumber).then(function(t){i.clear();var o=i.insert(t);e.resolve(o)})}),e.promise}function u(){var e=t.defer();return f.whenReady().then(function(t){return t.getLaboratory(v.recruitmentNumber).then(function(t){e.resolve(t)})}),e.promise}var l=this,f=e.getParticipantLaboratoryRemoteStorage(),v=null;l.useParticipant=o,l.resetParticipantInUse=n,l.insert=r,l.listAll=c,l.initializeLaboratory=a,l.update=s,l.getLaboratory=u}angular.module("otusjs.laboratory.repository").service("otusjs.laboratory.repository.ParticipantLaboratoryCollectionService",t),t.$inject=["$q","otusjs.laboratory.core.ModuleService","otusjs.laboratory.storage.ParticipantLaboratoryLocalStorageService"]}(),function(){"use strict";function t(t,e){function i(t){return e.useParticipant(t),e.initializeLaboratory().then(function(t){return t})}function o(t){return e.useParticipant(t),e.getLaboratory()}var n=this;n.initializeLaboratory=i,n.getLaboratory=o}angular.module("otusjs.laboratory.repository").service("otusjs.laboratory.repository.ParticipantLaboratoryRepositoryService",t),t.$inject=["otusjs.laboratory.core.ModuleService","otusjs.laboratory.repository.ParticipantLaboratoryCollectionService"]}(),function(){"use strict";function t(t,e){function i(){a=e.getActivityResource()}function o(t){if(!a)throw new Error("REST resource is not initialized.");return a.update({id:t._id,rn:t.participantData.recruitmentNumber},t).$promise}function n(t){if(!a)throw new Error("REST resource is not initialized.");return a.create({rn:t.participantData.recruitmentNumber},t).$promise}function r(e){if(!a)throw new Error("REST resource is not initialized.");var i=t.defer();return a.listAll({rn:e}).$promise.then(function(t){t.data&&t.data.length?i.resolve(t.data):i.resolve([])}),i.promise}function s(t){if(!a)throw new Error("REST resource is not initialized.");return a.remove(t).$promise}var c=this,a=null;c.initialize=i,c.update=o,c.list=r,c.save=n,c.remove=s}angular.module("otusjs.deploy").service("otusjs.deploy.ActivityRestService",t),t.$inject=["$q","OtusRestResourceService"]}(),function(){"use strict";function t(t){function e(){n=t.getProjectConfigurationResource()}function i(){if(!n)throw new Error("REST resource is not initialized.");return n.getSurveys().$promise}var o=this,n=null;o.initialize=e,o.getSurveys=i}angular.module("otusjs.deploy").service("otusjs.deploy.ProjectConfigurationRestService",t),t.$inject=["OtusRestResourceService"]}(),function(){"use strict";function t(t,e){function i(){u=e.getFileUploadResourceFactory()}function o(t,e){return c(),u.post(t,e)}function n(t){return c(),u.getByOID(t)}function r(t){return c(),u.deleteByOID(t)}function s(t){c(),u.setContentType(t)}function c(){if(!u)throw new Error("REST resource is not initialized.")}var a=this,u=null;a.initialize=i,a.post=o,a.getByOID=n,a.deleteByOID=r,a.setContentType=s}angular.module("otusjs.deploy").service("otusjs.deploy.FileUploadRestService",t),t.$inject=["$q","OtusRestResourceService"]}(),function(){"use strict";function t(t){function e(){s=t.getOtusInstallerResource()}function i(t){if(!s)throw new Error("REST resource is not initialized.");s.ready(t)}function o(t){if(!s)throw new Error("REST resource is not initialized.");s.config(t)}function n(t){if(!s)throw new Error("REST resource is not initialized.");return s.validateEmail(t).$promise}var r=this,s=null;r.initialize=e,r.ready=i,r.config=o,r.validateEmail=n}angular.module("otusjs.deploy").service("otusjs.deploy.InstallerRestService",t),t.$inject=["OtusRestResourceService"]}(),function(){"use strict";function t(t){function e(){s=t.getLaboratoryParticipantResource()}function i(){s.create()}function o(t){if(!s)throw new Error("REST resource is no initialized.");return s.initialize({rn:t}).$promise}function n(t){if(!s)throw new Error("REST resource is no initialized.");return s.getLaboratory({rn:t}).$promise}var r=this,s=null;r.initialize=e,r.create=i,r.initializeLaboratory=o,r.getLaboratory=n}angular.module("otusjs.deploy").service("otusjs.deploy.ParticipantLaboratoryRestService",t),t.$inject=["OtusRestResourceService"]}(),function(){"use strict";function t(t){function e(){n=t.getParticipantResource()}function i(){if(!n)throw new Error("REST resource is not initialized.");return n.list().$promise}var o=this,n=null;o.initialize=e,o.listIdexers=i}angular.module("otusjs.deploy").service("otusjs.deploy.ParticipantRestService",t),t.$inject=["OtusRestResourceService"]}(),function(){"use strict";function t(t){function e(){i=t.getSurveyResource()}var i=null;this.initialize=e}angular.module("otusjs.deploy").service("otusjs.deploy.SurveyRestService",t),t.$inject=["OtusRestResourceService"]}(),function(){"use strict";function t(t,e){function i(){s=e.getDatasourceResourceFactory()}function o(){if(!s)throw new Error("REST resource is not initialized.");return s.list().$promise}function n(t){if(!s)throw new Error("REST resource is not initialized.");return s.getByID({idx:t}).$promise}var r=this,s=null;r.initialize=i,r.list=o,r.getByID=n}angular.module("otusjs.deploy").service("otusjs.deploy.SurveyItemRestService",t),t.$inject=["$q","OtusRestResourceService"]}(),function(){"use strict";function t(t){function e(){s=t.getOtusAuthenticatorResource()}function i(t){if(!s)throw new Error("REST resource is not initialized.");return s.authenticate(t).$promise}function o(t){if(!s)throw new Error("REST resource is not initialized.");return s.authenticate(t).$promise}function n(){if(!s)throw new Error("REST resource is not initialized.");return s.invalidate().$promise}var r=this,s=null;r.initialize=e,r.authenticate=i,r.authenticateProject=o,r.invalidate=n}angular.module("otusjs.deploy").service("otusjs.deploy.AuthenticationRestService",t),t.$inject=["OtusRestResourceService"]}(),function(){"use strict";function t(t){function e(){u=t.getUserResource()}function i(t){if(!u)throw new Error("REST resource is not initialized.");return u.create(t).$promise}function o(t){if(!u)throw new Error("REST resource is not initialized.");return u.logged(t).$promise}function n(){if(!u)throw new Error("REST resource is not initialized.");return u.list().$promise}function r(){if(!u)throw new Error("REST resource is not initialized.");return u.list().$promise}function s(t){if(!u)throw new Error("REST resource is not initialized.");return u.enable(t).$promise}function c(t){if(!u)throw new Error("REST resource is not initialized.");return u.disable(t).$promise}var a=this,u=null;a.initialize=e,a.create=i,a.logged=o,a.list=n,a.listIdexers=r,a.enable=s,a.disable=c,a.listIdexers=r}angular.module("otusjs.deploy").service("otusjs.deploy.UserRestService",t),t.$inject=["OtusRestResourceService"]}();