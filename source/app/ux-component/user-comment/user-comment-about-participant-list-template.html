<div layout="column" layout-fill>
  <md-content layout="column" class="layout-box" ng-cloak>
    <div layout="column" layout-align="center center">
      <div layout-fill>
        <div class="comment-list-null" ng-show="$ctrl.ready">
        <span class="comment-null md-headline" ng-show="$ctrl.items.length === 0" layout="row" layout-align="center center">
          Não há comentários adicionados.
        </span>
        <span class="comment-null md-headline" ng-if="!$ctrl.selectedParticipant" layout="row" layout-align="center center">
          Não há participante selecionado.
        </span>
        </div>
        <md-list class="comment-list-layout" ng-repeat="item in $ctrl.items track by $id(item)">
          <div class="comment-name" layout="row" layout-align="start center">
            <p class="ng-binding md-body-2 margin-line" md-truncate>{{item.userName}}</p>
          </div>
          <div class="comment-status" layout="row" ng-show="item.edited" layout-align="center center">
            <p class="md-caption margin-line" ng-style="{ color: '#797985' }">Editado</p>
            <md-tooltip md-direction="top">
              Comentário foi editado
            </md-tooltip>
          </div>
          <div class="comment-date" layout="row" layout-align-gt-sm="center center">
            <p class="md-caption ng-binding margin-line" ng-bind-html="$ctrl.getFormattedDate(item.creationDate)"></p>
            <md-tooltip md-direction="top">
              Data de realização
            </md-tooltip>
          </div>
          <div class="comment-text" layout="row" layout-align="start start">
            <span class="md-body-1 margin-line">{{item.comment}}</span>
          </div>
          <div class="comment-button" layout="row" layout-align="center center">
            <md-button ng-click="$ctrl.showStarSelectedUserCommentAboutParticipant(item)">
              <md-tooltip md-direction="top">Favorito</md-tooltip>
              <md-icon layout="row" layout-align="center center" ng-style="$ctrl.colorStar(item.starred)"
                       class="md-default-theme material-icons icon-size" aria-label="star"
                       ng-bind-html="$ctrl.iconStar(item.starred)"></md-icon>
            </md-button>
          </div>
          <md-menu class="comment-button-menu" layout="row" layout-align="center center">
            <md-button ng-show="item.isCreator" aria-label="Menu" ng-click="$ctrl.openMenu($mdMenu, $event)">
              <md-tooltip md-direction="top">Menu</md-tooltip>
              <md-icon layout="row" layout-align="center center" md-font-set="material-icons" aria-label="Menu">
                more_vert
              </md-icon>
            </md-button>
            <md-menu-content width="2">
              <md-menu-item>
                <md-button class="md-accent" ng-show="item.isCreator" aria-label="Editar"
                           ng-click="$ctrl.updateUserCommentAboutParticipant(item)">
                  Editar
                </md-button>
              </md-menu-item>
              <md-menu-item>
                <md-button class="md-warn" ng-show="item.isCreator" aria-label="Excluir"
                           ng-click="$ctrl.deleteSelectedComment(item._id)">
                  Excluir
                </md-button>
              </md-menu-item>
            </md-menu-content>
          </md-menu>
        </md-list>
      </div>
    </div>
  </md-content>
  <div layout="column"  class="comment-layout-margin-line">
    <form flex="grow" name="userCommentAboutParticipant">
      <md-input-container layout="column" class="comment-box">
        <label> </label>
        <textarea name="comment" id="focus-textarea" rows="3" max-rows="10" class="md-textarea comment-textarea"
                  ng-model="$ctrl.comment" aria-label="comentar" placeholder="Digite o texto aqui"></textarea>
      </md-input-container>
    </form>
    <div flex="noshrink" class="margin-line comment-layout-padding" layout="row" layout-align="end center">
      <md-button class="md-raised" ng-show="$ctrl.comment" aria-label="cancel edited"
                 ng-click="$ctrl.cancelFillSelectedComment()">
        Cancelar
      </md-button>
      <md-button class="md-primary md-raised" ng-disabled="!$ctrl.comment" aria-label="save"
                 ng-click="$ctrl.saveUserCommentAboutParticipant()">
        Salvar
        <md-icon md-font-set="material-icons">save</md-icon>
      </md-button>
    </div>
  </div>
</div>
