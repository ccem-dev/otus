<md-card class="issue-list-filters" layout-margin>
  <md-toolbar-filler layout="row" layout-align="space-between center" layout-margin>
    <span>{{$ctrl.LABELS.CONTROL_PANEL.FILTERS}}</span>
    <md-button aria-label={{$ctrl.LABELS.CONTROL_PANEL.RESET_FILTERS}} class="md-fab md-mini"
               ng-click="$ctrl.clearAll()">
      <md-icon>autorenew
        <md-tooltip md-direction="left">{{$ctrl.LABELS.CONTROL_PANEL.RESET_FILTERS}}</md-tooltip>
      </md-icon>
    </md-button>
  </md-toolbar-filler>

  <div class='sorting-criteria'>
    <otus-list-sorting-criteria search-settings="$ctrl.searchSettings"
                                item-attributes="$ctrl.itemAttributes"
                                input-view-state="$ctrl.inputViewState"
                                get-default-order-fields="$ctrl.getDefaultOrderFields">
    </otus-list-sorting-criteria>
  </div>

  <md-radio-group class="status" ng-model="$ctrl.searchSettings.filter.status" layout="row"
                  layout-align="space-around center" ng-change="$ctrl.changePaginationViewState()">
    <md-radio-button ng-repeat="(status,label) in $ctrl.LABELS.FILTER_STATUS" ng-value="status">
      {{label}}
    </md-radio-button>
  </md-radio-group>


  <div ng-repeat="item in $ctrl.itemAttributes" layout-align="start center">
    <div class="item-filter">
      <span ng-if="!$ctrl.inputViewState[item.title] && item.title === $ctrl.LABELS.ISSUE_ATTRIBUTES.RN.TITLE">
        <md-button layout-fill class="md-raised padding-layout-fill"
                   aria-label={{item.translatedTitle}}
                   ng-click="$ctrl.changeInputViewState(item)">
          <md-icon>{{item.icon}}
            <md-tooltip md-direction="right">{{item.translatedTitle}}</md-tooltip>
          </md-icon>
          <md-icon>{{$ctrl.LABELS.ISSUE_ATTRIBUTES.SENDER.ICON}}
            <md-tooltip md-direction="right">{{item.translatedTitle}}</md-tooltip>
          </md-icon>
        </md-button>
      </span>

      <span ng-if="!$ctrl.inputViewState[item.title] && (item.title !== $ctrl.LABELS.ISSUE_ATTRIBUTES.RN.TITLE)">
        <md-button layout-fill class="md-raised padding-layout-fill"
                   aria-label={{item.translatedTitle}}
                   ng-click="$ctrl.changeInputViewState(item)">
          <md-icon>{{item.icon}}
            <md-tooltip md-direction="right">{{item.translatedTitle}}</md-tooltip>
          </md-icon>
        </md-button>
      </span>

      <span ng-if="$ctrl.inputViewState[item.title] && (item.title === $ctrl.LABELS.ISSUE_ATTRIBUTES.RN.TITLE)">
        <otus-participant-filter filter-item="item"
                                 search-settings="$ctrl.searchSettings"
                                 clear="$ctrl.clear"
                                 change-pagination-view-state="$ctrl.changePaginationViewState">
        </otus-participant-filter>
      </span>

      <span ng-if="$ctrl.inputViewState[item.title] && item.title === $ctrl.LABELS.ISSUE_ATTRIBUTES.CREATION_DATE.TITLE">
        <otus-date-filter filter-item="item"
                          search-settings="$ctrl.searchSettings"
                          clear="$ctrl.clear"
                          change-pagination-view-state="$ctrl.changePaginationViewState">
        </otus-date-filter>
      </span>

      <span ng-if="$ctrl.inputViewState[item.title] && item.title === $ctrl.LABELS.ISSUE_ATTRIBUTES.CENTER.TITLE">
        <otus-single-selection-filter filter-item="item"
                                      search-settings="$ctrl.searchSettings"
                                      clear="$ctrl.clear"
                                      change-pagination-view-state="$ctrl.changePaginationViewState"
                                      options="$ctrl.centers">
      </otus-single-selection-filter>
      </span>

<!--      TODO descomment when active filter by issue title-->
<!--      <span ng-if="$ctrl.inputViewState[item.title] && item.title === $ctrl.LABELS.ISSUE_ATTRIBUTES.TITLE.TITLE">-->
<!--        <otus-input-text-filter filter-item="item"-->
<!--                                search-settings="$ctrl.searchSettings"-->
<!--                                clear="$ctrl.clear"-->
<!--                                change-pagination-view-state="$ctrl.changePaginationViewState"-->
<!--                                placeholder="item.placeholder">-->
<!--        </otus-input-text-filter>-->
<!--      </span>-->

    </div>
  </div>
</md-card>
