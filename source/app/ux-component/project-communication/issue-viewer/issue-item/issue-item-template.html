<md-card class="md-accordion" id="{{$ctrl.elementID}}">

  <div class="issue-item-layout" ng-cloak ng-init="$ctrl.expanded = false"
       layout="row" layout-align="start center"  layout-margin >

    <div class="rn">
      <md-icon>{{$ctrl.itemAttributes.rn.icon}}
        <md-tooltip md-direction="top">{{$ctrl.itemAttributes.rn.translatedTitle}}</md-tooltip>
      </md-icon>
      <span class="padding">{{$ctrl.rn}}</span>
    </div>

    <div class="sender-name">
      <md-icon>{{$ctrl.itemAttributes.name.icon}}
        <md-tooltip md-direction="top">{{$ctrl.itemAttributes.name.translatedTitle}}</md-tooltip>
      </md-icon>
      <span class="padding">{{$ctrl.name}}</span>
    </div>

    <div class="center-name">
      <md-icon>{{$ctrl.itemAttributes.center.icon}}
        <md-tooltip md-direction="top">{{$ctrl.itemAttributes.center.translatedTitle}}</md-tooltip>
      </md-icon>
      <span class="padding">{{$ctrl.center}}</span>
    </div>

    <div class="creation-date">
      <md-icon >{{$ctrl.itemAttributes.creationDate.icon}}
        <md-tooltip md-direction="top">{{$ctrl.itemAttributes.creationDate.translatedTitle}}</md-tooltip>
      </md-icon>
      <span class="padding">{{$ctrl.creationDate}}</span>
    </div>


    <div class="msg-title">
      <md-icon>{{$ctrl.itemAttributes.title.icon}}
        <md-tooltip md-direction="top">{{$ctrl.itemAttributes.title.translatedTitle}}</md-tooltip>
      </md-icon>
      <span class="padding">{{$ctrl.item.title}}</span>
    </div>

    <div layout="row" layout-align="end center">
      <div class="issue-messages-status" ng-model="$ctrl.status" ng-change="$ctrl.refresh()">
        <md-menu md-position-mode="target-right target">
          <md-chips ng-click="$mdMenu.open()">
            <md-chip ng-style=$ctrl.status.color>
              {{$ctrl.status.translatedStatus}}
            </md-chip>
          </md-chips>
          <md-menu-content>
            <md-menu-item ng-repeat="status in $ctrl.statusOptions" layout="column">
              <md-button  id="{{status.actionLabel}}" ng-click="$ctrl.changeStatusTo(status.value)">
                {{status.actionLabel}}
              </md-button>
              <md-divider></md-divider>
            </md-menu-item>
          </md-menu-content>
        </md-menu>
      </div>
    </div>

    <div layout="row" layout-align="end center">
        <md-button class="see-last-msg md-mini" ng-click="$ctrl.showMore()">
          <md-icon>{{$ctrl.showMoreIcon.icon}}
            <md-tooltip md-direction="top">{{$ctrl.showMoreIcon.tooltip}}</md-tooltip>
          </md-icon>
        </md-button>
    </div>

    <div ng-if="$ctrl.expanded" ng-class="{expandCollapse:true, active:$ctrl.expanded}" style="margin: 0;padding: 0"></div>

  </div>

  <div ng-class="{dataContent:true, activeContent:$ctrl.expanded}">
    <div class="issue-item-text-layout">
      <span class="issue-text-layout">
        <md-icon>{{$ctrl.itemAttributes.text.icon}}
          <md-tooltip md-direction="top">{{$ctrl.itemAttributes.text.translatedTitle}}</md-tooltip>
        </md-icon>
      <span class="padding">{{$ctrl.item.text}}</span>
      </span>
      <md-button class="md-primary see-issue" ng-click="$ctrl.openIssueMessages()">Ver mensagens</md-button>
    </div>
  </div>

</md-card>