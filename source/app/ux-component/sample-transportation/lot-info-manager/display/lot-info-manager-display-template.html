<md-content layout="column" flex>
  <div layout-align="start center" flex>
    <div layout-gt-md="row" flex>
      <md-card layout="row" flex>
        <div layout="column" flex>
          <md-subheader class="md-no-sticky moment-type-title backgroud-color-default left-alignment">
            Informações do Lote
          </md-subheader>
          <div flex>
            <div flex layout-padding>
              <div flex>
                <div layout="row" layout-xs="column" flex>
                  <div layout="column" layout-align="center start" flex="20" flex-md="25" flex-gt-md="20">
                    <span>Envio:</span>
                  </div>
                  <md-input-container class="remove-errors-spacer input-container-lot-margin">
                    <md-datepicker ng-model="$ctrl.lot.shipmentDate"
                                   ng-change="$ctrl.onLotAlteration({ newData: $ctrl.lot.toJSON()})"
                                   aria-label="Data de Envio"></md-datepicker>
                  </md-input-container>
                  <md-input-container class="remove-errors-spacer input-container-lot-margin">
                    <md-icon class="material-icons">access_time</md-icon>
                    <input type="time" ng-model="$ctrl.lot.shipmentDate"
                           ng-change="$ctrl.onLotAlteration({ newData: $ctrl.lot.toJSON()})" aria-label="Tempo" min="0"
                           max="4999">
                  </md-input-container>
                </div>
              </div>
              <div>
                <div layout="row" layout-xs="column" flex>
                  <div layout="column" layout-align="center start" flex="20" flex-md="25" flex-gt-md="20">
                    <span>Processamento:</span>
                  </div>
                  <md-input-container class="remove-errors-spacer input-container-lot-margin">
                    <md-datepicker ng-model="$ctrl.lot.processingDate"
                                   ng-change="$ctrl.onLotAlteration({ newData: $ctrl.lot.toJSON()})"
                                   aria-label="Data de processamento"></md-datepicker>
                  </md-input-container>
                  <md-input-container class="remove-errors-spacer input-container-lot-margin">
                    <md-icon class="material-icons">access_time</md-icon>
                    <input type="time" ng-model="$ctrl.lot.processingDate"
                           ng-change="$ctrl.onLotAlteration({ newData: $ctrl.lot.toJSON()})" aria-label="Tempo" min="0"
                           max="4999">
                  </md-input-container>
                </div>
                <div layout="row" layout-align="start center">
                  <span>Responsável: </span> <span class="md-body-1" layout-margin
                                                   layout-padding>{{$ctrl.lot.operator}}</span>
                </div>

              </div>
            </div>
          </div>
        </div>
      </md-card>
      <md-card layout="column" flex flex-gt-md="30">
        <md-subheader class="md-no-sticky moment-type-title backgroud-color-default left-alignment">
          Rastreio do Lote
        </md-subheader>
        <div layout="row" layout-align="start center" layout-wrap layout-padding>
          <md-input-container flex="100" flex-gt-xs="80">
            <label>De:</label>
            <md-select ng-model="$ctrl.lot.originLocationPoint" ng-keydown="$ctrl.clearLot()">
              <md-option ng-repeat="origin in $ctrl.originLocationPoints track by $index" value="{{origin._id}}" selected="origin._id==$ctrl.selectedOriginLocationPoint">{{origin.name}}</md-option>
            </md-select>
          </md-input-container>

          <md-input-container flex="100" flex-gt-xs="80">
            <label>Para:</label>
            <md-select ng-model="$ctrl.lot.destinationLocationPoint" ng-disabled="$ctrl.lot.code">
              <md-option ng-repeat="destination in $ctrl.destinationLocationPoints track by $index" value="{{destination._id}}">{{destination.name}}</md-option>
            </md-select>
          </md-input-container>
        </div>
      </md-card>
    </div>
    <div flex layout="row" layout-align="center center" ng-show="$ctrl.lot.originLocationPoint.length">
      <md-card flex>
        <md-subheader class="md-no-sticky moment-type-title backgroud-color-default left-alignment">
          <div layout="row">
            <span>
          Alíquotas
        </span>
            <span flex></span>
            <md-input-container ng-show="$ctrl.currentNavItem == 'insertionByPeriod'"
                                class="remove-padding activity-item-icon remove-errors-spacer input-container-lot-margin"
                                ng-if="!$ctrl.userHaveCenter" style="margin-left:15px;min-width: 150px">
              <md-checkbox ng-model="$ctrl.storage" class="activity-item-icon remove-padding">
                <span class="md-subheader">
                  Armazenamento
                </span>
              </md-checkbox>
            </md-input-container>
          </div>
        </md-subheader>
        <md-tabs>
          <md-tab label="Inserção por Período">
            <div layout-align="start center" layout="row" layout-xs="column" layout-padding>
              <div layout-align="center center">
                <span>Período Inicial:</span>

                <md-input-container class="remove-errors-spacer input-container-lot-margin">
                  <md-datepicker ng-model="$ctrl.initialDate" aria-label="Período Inicial"
                                 ng-keydown="$ctrl.periodInputkeydown($event)"></md-datepicker>
                </md-input-container>
              </div>
              <div layout-align="center center">
                <span>Período Final:</span>

                <md-input-container class="remove-errors-spacer input-container-lot-margin">
                  <md-datepicker ng-model="$ctrl.finalDate" aria-label="Período Final"
                                 ng-keydown="$ctrl.periodInputkeydown($event)"></md-datepicker>
                </md-input-container>
              </div>
              <div>
                <md-button ng-click="$ctrl.insertAliquotsByPeriod()" class="md-raised md-primary"
                           aria-label="Adicionar Alíquotas por Período">
                  <md-tooltip md-direction="down">Adicionar</md-tooltip>
                  <md-icon md-svg-icon="plus" aria-label="Adicionar"></md-icon>
                </md-button>
              </div>
            </div>
          </md-tab>
          <md-tab label="Inserção Individual">
            <div layout="row" layout-xs="column" layout-align="center center" layout-padding>
              <span class="single-aliquot-label" hide-xs>Código:</span>
              <input type="text" numbers-only class="aliquot-lot-input" flex placeholder="Alíquota" name="fast-trigger"
                     value="Inserção rápida" ng-model="$ctrl.aliquotCode"
                     ng-keydown="$ctrl.aliquotInputkeydown($event)"/>
              <div>
                <md-button ng-click="$ctrl.fastInsertion($ctrl.aliquotCode)" class="md-raised md-primary"
                           aria-label="Adicionar Alíquota" ng-disabled="!$ctrl.aliquotCode.length">
                  <md-tooltip md-direction="down">Adicionar</md-tooltip>
                  <md-icon md-svg-icon="plus" aria-label="Adicionar"></md-icon>
                </md-button>
              </div>
            </div>
          </md-tab>
        </md-tabs>


        <div layout="row" layout-margin>
          <div layout="column" flex-gt-sm="40" flex-gt-md="25" flex="40">
            <otus-sample-transportation-lot-aliquots-chart
              lot-data-set="$ctrl.lot.chartDataSet"></otus-sample-transportation-lot-aliquots-chart>
          </div>
          <div layout="column" flex class="subtitle-table-container">
            <md-content class="no-background-color">
              <otus-sample-transportation-lot-chart-subtitle-table lot-data-set="$ctrl.lot.chartDataSet"
                                                                   flex></otus-sample-transportation-lot-chart-subtitle-table>
            </md-content>
          </div>
        </div>
        <md-divider></md-divider>
        <md-content>
          <div class="dynamic-table-container">
            <dynamic-data-table flex dynamic-table-settings="$ctrl.dynamicTableSettings"
                                table-update-function="$ctrl.AliquotTransportationService.dynamicDataTableFunction.updateDataTable">
            </dynamic-data-table>
          </div>
        </md-content>
      </md-card>
    </div>
  </div>
</md-content>
