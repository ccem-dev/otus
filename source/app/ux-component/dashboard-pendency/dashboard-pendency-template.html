<style>
  .full-list-items{
    min-width: 90vw;
  }

  .header-list {
    background-color: #009588;
    font-weight: bold;
    color: #FFFFFF !important;
    min-height: 70px !important;
    max-height: 70px !important;
  }

  .warning-card {
    -moz-transform: rotate(30deg);
    border-width: 1px;
    border-style: solid;
    border-radius: 5px;
    border-color: #ffffff;
    padding-left: 8px;
    padding-right: 8px;
    min-width: 60px;
  }

  .priority-icon-late{
    background: green;
  }
</style>

<md-card layout="column" class="full-list-items no-border">
  <md-card-content class="no-padding">

    <md-card-header flex layout-align="start center" class="md-primary header-list" ng-style="{color: '#f77a7a'}">
      <md-card-header-text layout="row">
        <span class="md-header" layout-padding>PENDÊNCIAS DE ATIVIDADE</span>

        <md-icon layout-margin md-badge="{{$ctrl.userActivityPendencies.curr.length}}" ng-hide="!$ctrl.showOpenedPendencies && $ctrl.userActivityPendencies.currIsEmpty"
                 md-font-library="material-icons" ng-style="{color: 'yellow'}">warning</md-icon>
      </md-card-header-text>


      <md-switch layout-margin  ng-model="$ctrl.whichIsShowing" ng-true-value="'Finalizadas'" ng-false-value="'Em aberto'"
      ng-change="$ctrl.changePendenciesListToShow()"
      ng-style="{color: white}">
        {{ $ctrl.whichIsShowing }}
      </md-switch>

    </md-card-header>

    <div ng-hide="$ctrl.userActivityPendencies.currIsEmpty" >Você não possui pendências de atividade.</div>

    <md-grid-list md-cols="4"  md-cols-xs="1" md-cols-sm="3" md-cols-md="4" md-cols-xl="6" md-cols-lg="4" md-cols-gt-md="4"
                  md-row-height-gt-md="1:0.5" md-row-height-sm="{{$ctrl.displayGridSmall()}}" md-row-height-md="1:1"  md-row-height-lg="{{$ctrl.displayGridLarge()}}"
                  md-row-height="1:0.9"  md-row-height-xs="1:0.6" md-gutter-gt-md="10px" md-gutter="12px" md-gutter-sm="6px" md-row-height-xl="1:0.8" >

      <md-grid-tile ng-hide="!$ctrl.userActivityPendencies.currIsEmpty"
                    class="md-whiteframe-1dp" ng-repeat="item in $ctrl.userActivityPendencies.curr">
        <md-grid-tile-header>
          <div layout="row" layout-align="space-between center">
            <div layout="row">
              <md-icon class="md-avatar-icon" ng-style="{color: '#00897b'}" md-font-library="material-icons" layout-align="end end">
                {{item.activityInfo.lastStatus.icon}}
                <md-tooltip md-direction="top">
                  {{item.activityInfo.lastStatus.tooltip}}
                </md-tooltip>
              </md-icon>
            </div>
            <span class="md-caption" ng-style="{color:'#797985'}">
                <small class="md-body-2" ng-style="{color:'black'}">{{ item.activityInfo.acronym }}</small></span>
            <div name="priority-icon" layout="row" ng-hide="!$ctrl.showOpenedPendencies">
              <md-icon class="md-avatar-icon" ng-style="{color: item.priority.color}" md-font-library="material-icons" layout-align="end end"">
              arrow_upward
                <md-tooltip md-direction="top">
                  Prioridade {{item.priority.level}}
                </md-tooltip>
              </md-icon>
            </div>
            <div flex="10" ng-show="!$ctrl.showOpenedPendencies"></div>
          </div>
          <md-divider></md-divider>
        </md-grid-tile-header>
        <div layout="column">
          <div layout="row">
            <span class="md-caption" ng-style="{color:'#797985'}">
                <small class="md-body-2 clipped" ng-style="{color:'black'}">{{ item.activityInfo.name }}</small></span>
          </div>

          <div class="md-list-item-text" layout="column" layout-xs="column" layout-sm="column" layout-md="column">
            <span class="md-caption" ng-style="{color:'#797985'}">Nº recrutamento:
                <small class="md-body-2"  ng-style="{color:'black'}">{{ item.activityInfo.recruitmentNumber }}</small>
              </span>
            <span class="md-caption" ng-style="{color:'#797985'}">Iniciada:
                <small class="md-body-2" ng-style="{color:'black'}">{{ item.creationDate }} ({{ item.existenceTime }})</small>
              </span>

            <div ng-show="(item.activityInfo.externalID.length>0)">
              <span class="md-caption" ng-style="{color:'#797985'}">ID externo:
                <small class="md-body-2" ng-style="{color:'black'}">{{ item.activityInfo.externalID }}</small>
              </span>
            </div>
          </div>
        </div>
        <md-grid-tile-footer layout="row" layout-align="center center">
          <md-button class="md-grid-item-content md-raised md-accent md-icon-button"
                     ng-click="$ctrl.loadActivities(item.activityInfo.recruitmentNumber)" ng-disabled="!$ctrl.participantManagerReady">
            <md-icon md-svg-icon="file-document-box"  material-iconslayout-align="end end">
              <md-tooltip md-direction="top">
                Atividades
              </md-tooltip>
            </md-icon>
          </md-button>

          <md-button class="md-grid-item-content md-raised md-accent md-icon-button"  ng-click="$ctrl.loadActivityPlayer(item.activityInfo.recruitmentNumber, item.activityId)" ng-disabled="!$ctrl.participantManagerReady">
            <md-icon md-svg-icon="clipboard-check" layout-align="end end">
              <md-tooltip md-direction="top">
                Preencher Atividade
              </md-tooltip>
            </md-icon>
          </md-button>

          <md-button  class="md-grid-item-content md-raised md-accent md-icon-button" ng-click="$ctrl.loadActivityViewer(item.activityInfo.recruitmentNumber, item.activityId)" ng-disabled="!$ctrl.participantManagerReady">
            <md-icon md-font-library="material-icons" layout-align="end end">playlist_add_check
              <md-tooltip md-direction="top">
                Visualizar Ativiadade
              </md-tooltip>
            </md-icon>
          </md-button>
        </md-grid-tile-footer>
      </md-grid-tile>
    </md-grid-list>

  </md-card-content>
</md-card>